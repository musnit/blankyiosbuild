/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
* @license SoundJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/

!function(){var t,e,i;!function(a){function n(t,e){return S.call(t,e)}function s(t,e){var i,a,n,s,o,r,l,p,c,u,h,d=e&&e.split("/"),m=_.map,g=m&&m["*"]||{};if(t&&"."===t.charAt(0))if(e){for(d=d.slice(0,d.length-1),t=t.split("/"),o=t.length-1,_.nodeIdCompat&&A.test(t[o])&&(t[o]=t[o].replace(A,"")),t=d.concat(t),c=0;c<t.length;c+=1)if(h=t[c],"."===h)t.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||g)&&m){for(i=t.split("/"),c=i.length;c>0;c-=1){if(a=i.slice(0,c).join("/"),d)for(u=d.length;u>0;u-=1)if(n=m[d.slice(0,u).join("/")],n&&(n=n[a])){s=n,r=c;break}if(s)break;!l&&g&&g[a]&&(l=g[a],p=c)}!s&&l&&(s=l,r=p),s&&(i.splice(0,r,s),t=i.join("/"))}return t}function o(t,e){return function(){return d.apply(a,x.call(arguments,0).concat([t,e]))}}function r(t){return function(e){return s(e,t)}}function l(t){return function(e){f[t]=e}}function p(t){if(n(y,t)){var e=y[t];delete y[t],v[t]=!0,h.apply(a,e)}if(!n(f,t)&&!n(v,t))throw new Error("No "+t);return f[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function u(t){return function(){return _&&_.config&&_.config[t]||{}}}var h,d,m,g,f={},y={},_={},v={},S=Object.prototype.hasOwnProperty,x=[].slice,A=/\.js$/;m=function(t,e){var i,a=c(t),n=a[0];return t=a[1],n&&(n=s(n,e),i=p(n)),n?t=i&&i.normalize?i.normalize(t,r(e)):s(t,e):(t=s(t,e),a=c(t),n=a[0],t=a[1],n&&(i=p(n))),{f:n?n+"!"+t:t,n:t,pr:n,p:i}},g={require:function(t){return o(t)},exports:function(t){var e=f[t];return"undefined"!=typeof e?e:f[t]={}},module:function(t){return{id:t,uri:"",exports:f[t],config:u(t)}}},h=function(t,e,i,s){var r,c,u,h,d,_,S=[],x=typeof i;if(s=s||t,"undefined"===x||"function"===x){for(e=!e.length&&i.length?["require","exports","module"]:e,d=0;d<e.length;d+=1)if(h=m(e[d],s),c=h.f,"require"===c)S[d]=g.require(t);else if("exports"===c)S[d]=g.exports(t),_=!0;else if("module"===c)r=S[d]=g.module(t);else if(n(f,c)||n(y,c)||n(v,c))S[d]=p(c);else{if(!h.p)throw new Error(t+" missing "+c);h.p.load(h.n,o(s,!0),l(c),{}),S[d]=f[c]}u=i?i.apply(f[t],S):void 0,t&&(r&&r.exports!==a&&r.exports!==f[t]?f[t]=r.exports:u===a&&_||(f[t]=u))}else t&&(f[t]=i)},t=e=d=function(t,e,i,n,s){if("string"==typeof t)return g[t]?g[t](e):p(m(t,e).f);if(!t.splice){if(_=t,_.deps&&d(_.deps,_.callback),!e)return;e.splice?(t=e,e=i,i=null):t=a}return e=e||function(){},"function"==typeof i&&(i=n,n=s),n?h(a,t,e,i):setTimeout(function(){h(a,t,e,i)},4),d},d.config=function(t){return d(t)},t._defined=f,i=function(t,e,i){e.splice||(i=e,e=[]),n(f,t)||n(y,t)||(y[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("almond",function(){}),i("Fixtures",["require","exports","module"],function(t,e,i){var a;a={results:[{camera:{height:"0",initialX:"0",initialY:"160",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",surfaceClass:"text-surface",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-05T08:12:25.853Z",device:"",editPopup:[{height:"0",initialX:"0",initialY:"160",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",surfaceClass:"text-surface",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomSpeed:"2000"}],name:"plain",objectId:"5BDkJ89cKR",page:{name:"text test",x:"568",y:"320"},popups:[{accel:!1,accelAmount:"1",height:"1",initialX:"0",initialY:"0",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",surfaceClass:"text-surface",surfaceType:"plain",text:"hey this is a test",textSurface:!0,timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],updatedAt:"2015-06-03T10:52:01.868Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-13T07:23:27.188Z",device:"new",name:"new",objectId:"nNH0qrQ3wA",page:{name:"new",x:"900",y:"1200"},popups:[],updatedAt:"2015-05-13T07:23:27.188Z"},{camera:{height:"0",initialX:"-21",initialY:"-250",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"0.6889",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-230",translateYSpeed:"5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2014-12-30T13:33:24.897Z",device:"1136x640",editPopup:[{height:"0",initialX:"-21",initialY:"-250",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"0.6889",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-230",translateYSpeed:"5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],hiddenOverflow:!1,name:"accelo test",objectId:"FnTu1Egg5v",page:{name:"hands",perspective:"5000",speed:"1000",x:"900",y:"1200"},popups:[{accel:!0,accelAmount:"1",height:"1",initialX:"0",initialY:"0",name:"background",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/background.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.16",height:"6",initialX:"0",initialY:"0",motionType:"sine",name:"hand1",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"50",timer:{initialTime:1419434956210},translate:!0,translateX:"3",translateXSpeed:"0.6",translateY:"3",translateYSpeed:"0.6",url:"./content/images/pages/19/hand1.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.18",height:"7",initialX:"0",initialY:"0",name:"hand2",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"200",timer:{initialTime:1419434956210},translate:!0,translateX:"3",translateXSpeed:"0.8",translateY:"4",translateYSpeed:"0.8",url:"./content/images/pages/19/hand2.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.22",height:"8",initialX:"0",initialY:"0",name:"hand3",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"300",translate:!0,translateX:"4",translateXSpeed:"0.8",translateY:"3",translateYSpeed:"0.8",url:"./content/images/pages/19/hand3.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.2",height:"9",initialX:"0",initialY:"0",name:"hand4",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"450",translate:!0,translateX:"4",translateXSpeed:"1",translateY:"4",translateYSpeed:"1",url:"./content/images/pages/19/hand4.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.15",height:"10",initialX:"0",initialY:"0",name:"hand5",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"550",translate:!0,translateX:"5",translateXSpeed:"0.9",translateY:"4",translateYSpeed:"0.9",url:"./content/images/pages/19/hand5.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.6",height:"3",initialX:"0",initialY:"0",name:"girl",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"1",height:"3",initialX:"0",initialY:"0",name:"front_ball",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/front_ball.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.25",height:"4",initialX:"0",initialY:"0",name:"george",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/george.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.8",height:"2",initialX:"0",initialY:"0",name:"boy",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/boy.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"Music",src:"hands_soundtrack.mp3",url:""}],updatedAt:"2015-05-22T09:51:05.992Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-05T08:46:03.724Z",device:"",editPopup:[{accel:!1,accelAmount:"1",height:"2",initialX:"284",initialY:"160",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",surfaceClass:"text-surface",surfaceType:"plain",text:"hey this is a test",textSurface:!0,timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],name:"plain with background",objectId:"c8rIApqevh",page:{name:"text test",x:"568",y:"320"},popups:[{accel:!1,accelAmount:"1",height:"2",initialX:"284",initialY:"160",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",surfaceClass:"text-surface",surfaceType:"plain",text:"hey this is a test",textSurface:!0,timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"1",initialX:"284",initialY:"160",name:"overlay",rotateAngle:"100",rotateSpeed:"2000",scale:"0.43",scaleX:"1",scaleY:"1",surfaceClass:"overlay-transparency",surfaceType:"transparency",text:"",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],updatedAt:"2015-05-25T05:56:44.320Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-05T09:01:05.691Z",device:"",editPopup:[{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomSpeed:"2000"}],name:"hightlighting with background",objectId:"84zIGGgmCH",page:{name:"text test",x:"568",y:"320"},popups:[{accel:!1,accelAmount:"1",height:"3",initialX:"284",initialY:"160",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"0.53",scaleX:"1",scaleY:"1",singSpeed:"2000",surfaceClass:"",surfaceType:"highlight",text:"hey this is a test,\nhighlighting as it goes",textSurface:!0,timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"1",initialX:"284",initialY:"160",name:"overlay",rotateAngle:"100",rotateSpeed:"2000",scale:"0.43",scaleX:"1",scaleY:"1",surfaceClass:"overlay-transparency",surfaceType:"transparency",text:"",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],updatedAt:"2015-05-24T07:12:29.912Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",surfaceClass:"singalong",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-06T05:48:47.302Z",device:"",editPopup:[{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",surfaceClass:"singalong",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomSpeed:"2000"}],name:"singalong text",objectId:"FybEISg2PH",page:{name:"text test",speed:"12000",x:"568",y:"320"},popups:[{accel:!1,accelAmount:"1",height:"1",initialX:"284",initialY:"275",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",surfaceClass:"",surfaceType:"singalong",text:"hey this is a test\nanother line to read\nit keeps going on\nand on and on and on...",textSurface:!0,timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],updatedAt:"2015-05-06T06:26:40.352Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",surfaceClass:"singalong",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-06T06:43:17.906Z",device:"",editPopup:[{accel:!1,accelAmount:"1",height:"1",initialX:"284",initialY:"275",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",surfaceClass:"",surfaceType:"singalong",text:"hey this is a test,\nsinging along",textSurface:!0,timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],name:"big text on bottom",objectId:"529dy573rm",page:{name:"text test",speed:"12000",x:"568",y:"320"},popups:[{accel:!1,accelAmount:"1",height:"1",initialX:"284",initialY:"275",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",surfaceClass:"",surfaceType:"singalong",text:"hey this is a test,\nsinging along",textSurface:!0,timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],updatedAt:"2015-05-24T06:47:40.726Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",perspectiveZoom:!1,perspectiveZoomAmount:"0",perspectiveZoomSpeed:"1",perspectiveZoomType:"sine",rotateAngle:"100",rotateSpeed:"2000",scale:"0.55",timeOffset:"100",translate:!1,translateX:"0.2",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-15T14:34:38.566Z",device:"new",editPopup:[{accel:!1,accelAmount:"1",height:"1",initialX:"0",initialY:"0",motionType:"cos",name:"new4",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"700",translateXSpeed:"1",translateY:"100",translateYSpeed:"1",url:"./content/images/pages/79/george_girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],name:"test",objectId:"TwOtI5nrZP",page:{name:"bad performance test",perspective:"5000",speed:"1000",x:"1039",y:"945"},popups:[{accel:!1,accelAmount:"1",height:"0",import3D:!0,initialX:"0",initialY:"0",motionType:"cos",name:"gg",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"100",translateXSpeed:"1",translateY:"100",translateYSpeed:"0.5",translateZ:"4000",translateZSpeed:"1",url:"./content/images/pages/79/george_girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"1",initialX:"0",initialY:"0",motionType:"cos",name:"new2",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"300",translateXSpeed:"0.5",translateY:"100",translateYSpeed:"0.5",url:"./content/images/pages/79/george_girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"1",initialX:"0",initialY:"0",motionType:"cos",name:"new3",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"500",translateXSpeed:"0.3",translateY:"200",translateYSpeed:"2",url:"./content/images/pages/79/george_girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"1",initialX:"0",initialY:"0",motionType:"cos",name:"new4",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"700",translateXSpeed:"1",translateY:"100",translateYSpeed:"1",url:"./content/images/pages/79/george_girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],updatedAt:"2015-05-20T09:22:10.580Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"cos",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-30000",perspectiveZoomSpeed:"1",perspectiveZoomType:"cos",rotateAngle:"100",rotateSpeed:"2000",scale:"0.55",text:"",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"8000",translateY:"-205",translateYSpeed:"1",url:"/content/images/pages/79/george_girl.png",xyRatio:"1",zoom:!1,zoomAmount:"0.1",zoomCutEnd:"50",zoomCutStart:"0",zoomRelativeTranslate:!1,zoomSpeed:"6.28318530718",zoomTypeCut:!0},createdAt:"2015-05-22T08:15:51.046Z",device:"iphone5",name:"dup of first test",objectId:"VudZWQfTJT",page:{name:"desks",perspective:"10000",speed:"15000",x:"1039",y:"945"},popups:[{accel:!1,accelAmount:"1",height:"2500",initialX:"519.5",initialY:"295",name:"george_girl",rotate:!0,rotateAngle:"20",rotateSpeed:"0.4",rotateType:"triangle",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/george_girl.png",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.3",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"3000",initialX:"0",initialY:"0",name:"front_board",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/front_board.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"2500",initialX:"0",initialY:"0",motionType:"triangle",name:"left_kid",rotate:!0,rotateAngle:"-15",rotateSpeed:"0.8",rotateType:"cos",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"8",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"600",url:"./content/images/pages/79/left_kid.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"2500",initialX:"1039",initialY:"0",motionType:"triangle",name:"right_kid",rotate:!0,rotateAngle:"-15",rotateSpeed:"0.8",rotateType:"cos",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"300",timer:{initialTime:1419434956210},translate:!1,translateX:"-8",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"600",url:"./content/images/pages/79/right_kid.png",xOrigin:"1",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"1500",initialX:"0",initialY:"0",name:"middle_desk",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/middle_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"500",initialX:"0",initialY:"0",name:"back_desk",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/back_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"5",initialX:"0",initialY:"0",name:"back_wall",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/back_wall.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"soundtrack",src:"bgMusic.mp3",url:"",volume:"1"}],updatedAt:"2015-05-22T08:15:51.046Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-24T10:07:27.896Z",device:"new",name:"new",objectId:"kNar98KPhc",page:{name:"new",x:"900",y:"1200"},popups:[],updatedAt:"2015-05-24T10:07:27.896Z"},{camera:{height:"0",initialX:"0",initialY:"160",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",surfaceClass:"text-surface",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-06-03T10:53:46.609Z",device:"",editPopup:[{accel:!1,accelAmount:"1",height:"1",initialX:"0",initialY:"0",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",surfaceClass:"text-surface",surfaceType:"plain",text:"andadtes",textSurface:!0,timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],name:"dup of plain",objectId:"PmCHzd1i56",page:{name:"text test",x:"568",y:"320"},popups:[{accel:!1,accelAmount:"1",height:"1",initialX:"0",initialY:"0",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",surfaceClass:"text-surface",surfaceType:"plain",text:"andadtes",textSurface:!0,timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],updatedAt:"2015-06-03T10:54:26.133Z"},{camera:{height:"0",initialX:"0",initialY:"430",lolcamera:!0,motionType:"sawtooth",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-20000",perspectiveZoomCut:!1,perspectiveZoomCutEnd:"100",perspectiveZoomCutStart:"1",perspectiveZoomSpeed:"1",perspectiveZoomType:"triangle",perspectivezoom:!0,rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-520",translateYSpeed:"1",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoom:!1,zoomAmount:"-0.2",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!1},createdAt:"2015-04-18T05:48:07.734Z",device:"1136x640",editPopup:[{height:"0",initialX:"0",initialY:"430",lolcamera:!0,motionType:"sawtooth",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-20000",perspectiveZoomCut:!1,perspectiveZoomCutEnd:"100",perspectiveZoomCutStart:"1",perspectiveZoomSpeed:"1",perspectiveZoomType:"triangle",perspectivezoom:!0,rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-520",translateYSpeed:"1",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoom:!1,zoomAmount:"-0.2",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!1}],name:"3D layout, static 2D car",objectId:"x9ofzQXCSR",page:{name:"street",perspective:"500",speed:"27000",x:"900",y:"1200"},popups:[{height:"1",initialX:"0",initialY:"-303","motion-type":"triangle",motionType:"sawtooth",name:"background",rotateAngle:"100",rotateSpeed:"0.5",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"1000",translateY:"105",translateYSpeed:"0.5",url:"/content/images/pages/16/background.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomRelativeTranslate:!1,zoomSpeed:"0.5"},{cameraBound:!0,cameraBoundOffset:"3",height:"0",initialX:"385",initialY:"-627","motion-type":"triangle",motionType:"sawtooth",name:"car",rotate:!0,rotateAngle:"-300",rotateSpeed:"0.02",scale:"0.24",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:2e3,translateY:"823",translateYSpeed:"1",url:"/content/images/pages/16/car_no_tyres.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"1700",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road1",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:2e3,translateY:"-900",translateYSpeed:"1",url:"/content/images/pages/16/road1.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"2500",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road2",rotateAngle:"100",rotateSpeed:"1",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-845",translateYSpeed:"1",url:"/content/images/pages/16/road2.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"3300",initialX:"966",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road3",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-820",translateYSpeed:"1",url:"/content/images/pages/16/road3.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{cameraBound:!0,cameraBoundOffset:"1",height:"0",initialX:"385",initialY:"-627","motion-type":"triangle",motionType:"sawtooth",name:"roadfront",rotateAngle:"100",rotateSpeed:"27000",scale:"0.24",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"823",translateYSpeed:"1",url:"/content/images/pages/16/road_nolines.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"4100",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"school",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-800",translateYSpeed:"1",url:"/content/images/pages/16/school.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.015",cameraBound:!0,cameraBoundOffset:"4",frames:[],height:"0",initialX:"385",initialY:"-627",motionType:"sawtooth",name:"car_tyres",numFrames:"3",rotateAngle:"100",rotateSpeed:"1",scale:"0.24",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"823",translateYSpeed:"1",url:"/content/images/pages/16/car_tyres_sprite.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.03",cameraBound:!0,cameraBoundOffset:"2",frames:[{url:"/content/images/pages/16/road_lines_1.png"},{url:"/content/images/pages/16/road_lines_2.png"},{url:"/content/images/pages/16/road_lines_3.png"},{url:"/content/images/pages/16/road_lines_4.png"},{url:"/content/images/pages/16/road_lines_5.png"}],height:"0",initialX:"385",initialY:"-627",motionType:"sawtooth",name:"road_lines",numFrames:"5",rotateAngle:"100",rotateSpeed:"1",scale:"0.24",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"823",translateYSpeed:"1",url:"/content/images/pages/16/road_lines_sprite.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",cameraBound:!0,cameraBoundOffset:"5",height:"0",initialX:"600",initialY:"-397",motionType:"sawtooth",name:"smoke",rotateAngle:"100",rotateSpeed:"2000",scale:"0.24",scaleX:"1",scaleY:"1",skew:!0,skewAmount:"0.1",skewAmountX:"0",skewAmountY:"-0.1",skewSpeed:"0.037",skewSpeedX:"0.037",skewSpeedY:"0.074",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"823",translateYSpeed:"1",url:"/content/images/pages/16/smoke.png",xOrigin:"1",xyRatio:"1",yOrigin:"0.8",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"}],sounds:[{loop:"-1",name:"Music",src:"bgMusic.mp3",url:"",volume:"1"},{loop:"-1",name:"Car",src:"car_soundtrack.mp3",url:"",volume:"0.4"}],updatedAt:"2015-05-25T12:11:55.846Z"},{camera:{accel:!0,accelAmount:"0.74",height:"0",initialX:"-21",initialY:"-250",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"0.6889",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-230",translateYSpeed:"5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-04-18T07:11:06.682Z",device:"1136x640",editPopup:[{accel:!1,accelAmount:"0.15",height:"5500",initialX:"0",initialY:"0",name:"hand5",rotateAngle:"100",rotateSpeed:"2000",scale:"0.89",timeOffset:"550",translate:!0,translateX:"5",translateXSpeed:"0.9",translateY:"4",translateYSpeed:"0.9",url:"/content/images/pages/19/hand5.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],name:"3d accelo test",objectId:"QGvfRAYuqT",page:{name:"hands",perspective:"10000",speed:"1000",x:"900",y:"1200"},popups:[{accel:!1,accelAmount:"1",height:"1",initialX:"0",initialY:"0",name:"background",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1",url:"/content/images/pages/19/background.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"0.16",height:"5400",initialX:"0",initialY:"0",motionType:"sine",name:"hand1",rotateAngle:"100",rotateSpeed:"2000",scale:"1.11",scaleX:"1",scaleY:"1",timeOffset:"50",timer:{initialTime:1419434956210},translate:!0,translateX:"3",translateXSpeed:"0.6",translateY:"3",translateYSpeed:"0.6",url:"/content/images/pages/19/hand1.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"0.18",height:"5100",initialX:"0",initialY:"0",name:"hand2",rotateAngle:"100",rotateSpeed:"2000",scale:"0.94",scaleX:"1",scaleY:"1",timeOffset:"200",timer:{initialTime:1419434956210},translate:!0,translateX:"3",translateXSpeed:"0.8",translateY:"4",translateYSpeed:"0.8",url:"/content/images/pages/19/hand2.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"0.22",height:"4500",initialX:"0",initialY:"0",name:"hand3",rotateAngle:"100",rotateSpeed:"2000",scale:"1.38",timeOffset:"300",translate:!0,translateX:"4",translateXSpeed:"0.8",translateY:"3",translateYSpeed:"0.8",url:"/content/images/pages/19/hand3.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"0.2",height:"4900",initialX:"0",initialY:"0",name:"hand4",rotateAngle:"100",rotateSpeed:"2000",scale:"1.19",timeOffset:"450",translate:!0,translateX:"4",translateXSpeed:"1",translateY:"4",translateYSpeed:"1",url:"/content/images/pages/19/hand4.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"0.15",height:"5500",initialX:"0",initialY:"0",name:"hand5",rotateAngle:"100",rotateSpeed:"2000",scale:"0.89",timeOffset:"550",translate:!0,translateX:"5",translateXSpeed:"0.9",translateY:"4",translateYSpeed:"0.9",url:"/content/images/pages/19/hand5.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"0.6",height:"2200",initialX:"0",initialY:"0",name:"girl",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"/content/images/pages/19/girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"2",initialX:"0",initialY:"0",name:"front_ball",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"/content/images/pages/19/front_ball.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"0.25",height:"3500",initialX:"0",initialY:"0",name:"george",rotateAngle:"100",rotateSpeed:"2000",scale:"0.79",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"/content/images/pages/19/george.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"0.8",height:"1200",initialX:"0",initialY:"0",name:"boy",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"/content/images/pages/19/boy.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"Music",src:"hands_soundtrack.mp3",url:""}],updatedAt:"2015-04-18T07:22:37.755Z"},{camera:{height:"0",initialX:"0",initialY:"430",lolcamera:!0,motionType:"sawtooth",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-20000",perspectiveZoomCut:!1,perspectiveZoomCutEnd:"100",perspectiveZoomCutStart:"1",perspectiveZoomSpeed:"1",perspectiveZoomType:"triangle",perspectivezoom:!0,rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-550",translateYSpeed:"1",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoom:!1,zoomAmount:"-0.2",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!1},createdAt:"2015-04-22T11:09:17.672Z",device:"1136x640",editPopup:[{height:"0",initialX:"0",initialY:"430",lolcamera:!0,motionType:"sawtooth",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-20000",perspectiveZoomCut:!1,perspectiveZoomCutEnd:"100",perspectiveZoomCutStart:"1",perspectiveZoomSpeed:"1",perspectiveZoomType:"triangle",perspectivezoom:!0,rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-550",translateYSpeed:"1",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoom:!1,zoomAmount:"-0.2",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!1}],name:"dup of first 3D tesqqqt",objectId:"kNP7QcMrmd",page:{name:"street",perspective:"500",speed:"27000",x:"900",y:"1200"},popups:[{height:"1",initialX:"0",initialY:"-303","motion-type":"triangle",motionType:"sawtooth",name:"background",rotateAngle:"100",rotateSpeed:"0.5",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"1000",translateY:"105",translateYSpeed:"0.5",url:"/content/images/pages/16/background.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomRelativeTranslate:!1,zoomSpeed:"0.5"},{height:"3302",initialX:"675",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"car",rotate:!0,rotateAngle:"-300",rotateSpeed:"0.02",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:2e3,translateY:"-740",translateYSpeed:"1",url:"/content/images/pages/16/car_no_tyres.png",xOrigin:"0.75",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"100",initialX:"900",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road1",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:2e3,translateY:"-900",translateYSpeed:"1",url:"/content/images/pages/16/road1.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"900",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road2",rotateAngle:"100",rotateSpeed:"1",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-845",translateYSpeed:"1",url:"/content/images/pages/16/road2.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"1700",initialX:"966",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road3",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-820",translateYSpeed:"1",url:"/content/images/pages/16/road3.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"3300",initialX:"900",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"roadfront",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"/content/images/pages/16/road_nolines.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"2500",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"school",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-800",translateYSpeed:"1",url:"/content/images/pages/16/school.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.015",frames:[],height:"3303",initialX:"675",initialY:"-520",motionType:"sawtooth",name:"car_tyres",numFrames:"3",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"/content/images/pages/16/car_tyres_sprite.png",xOrigin:"0.75",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.03",frames:[{url:"/content/images/pages/16/road_lines_1.png"},{url:"/content/images/pages/16/road_lines_2.png"},{url:"/content/images/pages/16/road_lines_3.png"},{url:"/content/images/pages/16/road_lines_4.png"},{url:"/content/images/pages/16/road_lines_5.png"}],height:"3301",initialX:"900",initialY:"-520",motionType:"sawtooth",name:"road_lines",numFrames:"5",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"/content/images/pages/16/road_lines_sprite.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",height:"3304",initialX:"900",initialY:"-520",motionType:"sawtooth",name:"smoke",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",skew:!0,skewAmount:"0.1",skewAmountX:"0",skewAmountY:"-0.1",skewSpeed:"0.037",skewSpeedX:"0.037",skewSpeedY:"0.074",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-638",translateYSpeed:"1",url:"/content/images/pages/16/smoke.png",xOrigin:"1",xyRatio:"1",yOrigin:"0.8",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"}],sounds:[{loop:"-1",name:"Music",src:"bgMusic.mp3",url:""},{loop:"-1",name:"Car",src:"car_soundtrack.mp3",url:"",volume:"0.4"}],updatedAt:"2015-04-22T11:09:52.480Z"},{camera:{height:"0",initialX:"0",initialY:"430",lolcamera:!0,motionType:"sawtooth",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-20000",perspectiveZoomCut:!1,perspectiveZoomCutEnd:"100",perspectiveZoomCutStart:"1",perspectiveZoomSpeed:"1",perspectiveZoomType:"triangle",perspectivezoom:!0,rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-550",translateYSpeed:"1",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoom:!1,zoomAmount:"-0.2",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!1},createdAt:"2015-04-01T08:18:09.601Z",device:"1136x640",editPopup:[{height:"0",initialX:"0",initialY:"430",lolcamera:!0,motionType:"sawtooth",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-20000",perspectiveZoomCut:!1,perspectiveZoomCutEnd:"100",perspectiveZoomCutStart:"1",perspectiveZoomSpeed:"1",perspectiveZoomType:"triangle",perspectivezoom:!0,rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-550",translateYSpeed:"1",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoom:!1,zoomAmount:"-0.2",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!1}],name:"3D layout",objectId:"Du6zsqF3x0",page:{name:"street",perspective:"500",speed:"27000",x:"900",y:"1200"},popups:[{height:"1",initialX:"0",initialY:"-303","motion-type":"triangle",motionType:"sawtooth",name:"background",rotateAngle:"100",rotateSpeed:"0.5",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"1000",translateY:"105",translateYSpeed:"0.5",url:"./content/images/pages/16/background.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomRelativeTranslate:!1,zoomSpeed:"0.5"},{height:"3302",initialX:"675",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"car",rotate:!0,rotateAngle:"-300",rotateSpeed:"0.02",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:2e3,translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/car_no_tyres.png",xOrigin:"0.75",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"100",initialX:"900",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road1",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:2e3,translateY:"-900",translateYSpeed:"1",url:"./content/images/pages/16/road1.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"900",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road2",rotateAngle:"100",rotateSpeed:"1",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-845",translateYSpeed:"1",url:"./content/images/pages/16/road2.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"1700",initialX:"966",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road3",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-820",translateYSpeed:"1",url:"./content/images/pages/16/road3.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"3300",initialX:"900",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"roadfront",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/road_nolines.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"2500",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"school",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-800",translateYSpeed:"1",url:"./content/images/pages/16/school.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.015",frames:[],height:"3303",initialX:"675",initialY:"-520",motionType:"sawtooth",name:"car_tyres",numFrames:"3",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/car_tyres_sprite.png",xOrigin:"0.75",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.03",frames:[{url:"/content/images/pages/16/road_lines_1.png"},{url:"/content/images/pages/16/road_lines_2.png"},{url:"/content/images/pages/16/road_lines_3.png"},{url:"/content/images/pages/16/road_lines_4.png"},{url:"/content/images/pages/16/road_lines_5.png"}],height:"3301",initialX:"900",initialY:"-520",motionType:"sawtooth",name:"road_lines",numFrames:"5",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/road_lines_sprite.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",height:"3304",initialX:"900",initialY:"-520",motionType:"sawtooth",name:"smoke",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",skew:!0,skewAmount:"0.1",skewAmountX:"0",skewAmountY:"-0.1",skewSpeed:"0.037",skewSpeedX:"0.037",skewSpeedY:"0.074",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-638",translateYSpeed:"1",url:"./content/images/pages/16/smoke.png",xOrigin:"1",xyRatio:"1",yOrigin:"0.8",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"}],sounds:[{loop:"-1",name:"Music",src:"bgMusic.mp3",url:"",volume:"1"},{loop:"-1",name:"Car",src:"car_soundtrack.mp3",url:"",volume:"0.4"}],updatedAt:"2015-05-25T12:11:32.803Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"cos",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-30000",perspectiveZoomSpeed:"1",perspectiveZoomType:"cos",rotateAngle:"100",rotateSpeed:"2000",scale:"0.55",text:"",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"8000",translateY:"-205",translateYSpeed:"1",url:"/content/images/pages/79/george_girl.png",xyRatio:"1",zoom:!1,zoomAmount:"0.1",zoomCutEnd:"50",zoomCutStart:"0",zoomRelativeTranslate:!1,zoomSpeed:"6.28318530718",zoomTypeCut:!0},createdAt:"2015-05-01T03:34:01.486Z",device:"iphone5",editPopup:[{height:"0",initialX:"0",initialY:"0",motionType:"cos",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-30000",perspectiveZoomSpeed:"1",perspectiveZoomType:"cos",rotateAngle:"100",rotateSpeed:"2000",scale:"0.55",text:"",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"8000",translateY:"-205",translateYSpeed:"1",url:"/content/images/pages/79/george_girl.png",xyRatio:"1",zoom:!1,zoomAmount:"0.1",zoomCutEnd:"50",zoomCutStart:"0",zoomRelativeTranslate:!1,zoomSpeed:"6.28318530718",zoomTypeCut:!0}],name:"first test",objectId:"ZSfVfOQ1HC",page:{name:"desks",perspective:"10000",speed:"15000",x:"1039",y:"945"},popups:[{accel:!1,accelAmount:"1",height:"2500",initialX:"519.5",initialY:"295",name:"george_girl",rotate:!0,rotateAngle:"20",rotateSpeed:"0.4",rotateType:"triangle",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/george_girl.png",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.3",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"3000",initialX:"0",initialY:"0",name:"front_board",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/front_board.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"2500",initialX:"0",initialY:"0",motionType:"triangle",name:"left_kid",rotate:!0,rotateAngle:"-15",rotateSpeed:"0.8",rotateType:"cos",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"8",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"600",url:"./content/images/pages/79/left_kid.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"2500",initialX:"1039",initialY:"0",motionType:"triangle",name:"right_kid",rotate:!0,rotateAngle:"-15",rotateSpeed:"0.8",rotateType:"cos",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"300",timer:{initialTime:1419434956210},translate:!1,translateX:"-8",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"600",url:"./content/images/pages/79/right_kid.png",xOrigin:"1",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"1500",initialX:"0",initialY:"0",name:"middle_desk",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/middle_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"500",initialX:"0",initialY:"0",name:"back_desk",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/back_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"5",initialX:"0",initialY:"0",name:"back_wall",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/back_wall.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"soundtrack",src:"bgMusic.mp3",url:"",volume:"1"}],updatedAt:"2015-05-22T08:12:16.470Z"},{camera:{height:"0",initialX:"0",initialY:"350",lolcamera:!0,motionType:"sawtooth",name:"camera",rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-150",translateYSpeed:"1",xOrigin:"1",xyRatio:"1",yOrigin:"1",zoom:!0,zoomAmount:"0.075",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!0},createdAt:"2015-04-15T14:30:13.298Z",device:"1136x640",editPopup:[{height:"6",initialX:"900",initialY:"-570","motion-type":"triangle",motionType:"sawtooth",name:"roadfront",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"-580",translateYSpeed:"1",url:"/content/images/pages/16/road_nolines.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!0,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"}],name:"2D layout, low movement, with zoom",objectId:"9SQujRMIQg",page:{name:"street",speed:"27000",x:"900",y:"1200"},popups:[{height:"1",initialX:"0",initialY:"-303","motion-type":"triangle",motionType:"sawtooth",name:"background",rotateAngle:"100",rotateSpeed:"0.5",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"1000",translateY:"105",translateYSpeed:"0.5",url:"/content/images/pages/16/background.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomRelativeTranslate:!1,zoomSpeed:"0.5"},{height:"8",initialX:"675",initialY:"-570","motion-type":"triangle",motionType:"sawtooth",name:"car",rotate:!0,rotateAngle:"-300",rotateSpeed:"0.02",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:2e3,translateY:"-580",translateYSpeed:"1",url:"/content/images/pages/16/car_no_tyres.png",xOrigin:"0.75",xyRatio:"1",yOrigin:"0",zoom:!0,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"2",initialX:"900",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road1",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:2e3,translateY:"-900",translateYSpeed:"1",url:"/content/images/pages/16/road1.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!0,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"3",initialX:"0",initialY:"-570","motion-type":"triangle",motionType:"sawtooth",name:"road2",rotateAngle:"100",rotateSpeed:"1",scale:"1",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"-790",translateYSpeed:"1",url:"/content/images/pages/16/road2.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!0,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"4",initialX:"966",initialY:"-570","motion-type":"triangle",motionType:"sawtooth",name:"road3",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"/content/images/pages/16/road3.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!0,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"6",initialX:"900",initialY:"-570","motion-type":"triangle",motionType:"sawtooth",name:"roadfront",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"-580",translateYSpeed:"1",url:"/content/images/pages/16/road_nolines.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!0,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"5",initialX:"0",initialY:"-450","motion-type":"triangle",motionType:"sawtooth",name:"school",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"-700",translateYSpeed:"1",url:"/content/images/pages/16/school.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!0,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.015",frames:[],height:"9",initialX:"675",initialY:"-570",motionType:"sawtooth",name:"car_tyres",numFrames:"3",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"-580",translateYSpeed:"1",url:"/content/images/pages/16/car_tyres_sprite.png",xOrigin:"0.75",xyRatio:"1",yOrigin:"0",zoom:!0,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.03",frames:[{url:"/content/images/pages/16/road_lines_1.png"},{url:"/content/images/pages/16/road_lines_2.png"},{url:"/content/images/pages/16/road_lines_3.png"},{url:"/content/images/pages/16/road_lines_4.png"},{url:"/content/images/pages/16/road_lines_5.png"}],height:"7",initialX:"900",initialY:"-570",motionType:"sawtooth",name:"road_lines",numFrames:"5",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"-580",translateYSpeed:"1",url:"/content/images/pages/16/road_lines_sprite.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!0,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",height:"10",initialX:"900",initialY:"390",motionType:"sawtooth",name:"smoke",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",skew:!0,skewAmount:"0.1",skewAmountX:"0",skewAmountY:"-0.1",skewSpeed:"0.037",skewSpeedX:"0.037",skewSpeedY:"0.074",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"2000",translateY:"-452",translateYSpeed:"1",url:"/content/images/pages/16/smoke.png",xOrigin:"1",xyRatio:"1",yOrigin:"0.8",zoom:!0,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"}],sounds:[{loop:"-1",name:"Music",src:"bgMusic.mp3",url:""},{loop:"-1",name:"Car",src:"car_soundtrack.mp3",url:"",volume:"0.4"}],updatedAt:"2015-05-05T08:02:27.516Z"},{camera:{height:"0",initialX:"-59",initialY:"-30",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"1",scale:"0.359",timeOffset:"100",translate:!0,translateX:"-40",translateXSpeed:"2.5",translateY:"0",translateYSpeed:"0.5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},createdAt:"2015-05-06T06:21:51.669Z",device:"1136x640",editPopup:[{height:"0",initialX:"-59",initialY:"-30",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"1",scale:"0.359",timeOffset:"100",translate:!0,translateX:"-40",translateXSpeed:"2.5",translateY:"0",translateYSpeed:"0.5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"}],name:"final with singalong text",objectId:"ndKCzNEswW",page:{name:"ship",speed:"2000",x:"2048",y:"1040"},popups:[{height:"1",initialX:"0",initialY:"0",name:"background",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"0.5",url:"./content/images/pages/22and23/background.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"0.4",height:"2",initialX:"-200",initialY:"-200",name:"wave1",rotateAngle:"100",rotateSpeed:"1",scale:"1.5",scaleX:"1",scaleY:"1",timeOffset:"1281",timer:{initialTime:1419434956210},translate:!0,translateX:100,translateXSpeed:"1",translateY:"30",translateYSpeed:"0.5",url:"./content/images/pages/22and23/waves.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"0.6",height:"3",initialX:"-200",initialY:"-200",name:"wave2",rotateAngle:"100",rotateSpeed:"1",scale:"1.5",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:100,translateXSpeed:"1",translateY:"30",translateYSpeed:"0.5",url:"./content/images/pages/22and23/waves.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"0.9",height:"4",initialX:"0",initialY:"0",name:"ship",rotate:!0,rotateAngle:"60",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translateX:"0",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"0.5",url:"./content/images/pages/22and23/ship.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"1.3",height:"5",initialX:"0",initialY:"0",name:"main_pirate",rotate:!0,rotateAngle:"80",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:-20,translateXSpeed:"1",translateY:0,translateYSpeed:"0.5",url:"./content/images/pages/22and23/main_pirate.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"1.7",height:"6",initialX:"0",initialY:"0",name:"george",rotate:!0,rotateAngle:"80",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"2000",timer:{initialTime:1419434956210},translate:!1,translateX:20,translateXSpeed:"1",translateY:0,translateYSpeed:"0.5",url:"./content/images/pages/22and23/george.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"2",height:"7",initialX:"0",initialY:"0",name:"front_rope",rotate:!0,rotateAngle:"60",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"2000",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"0.5",url:"./content/images/pages/22and23/front_rope.png",xyRatio:"1",zoom:!0,zoomAmount:"0",zoomSpeed:"1"},{accel:!1,accelAmount:"1",height:"8",initialX:"1024",initialY:"900",motionType:"sine",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"2",scaleX:"1",scaleY:"1",singSpeed:"15",surfaceType:"singalong",text:"...they were sailing the high seas,\ncrossing swords with cut-throat pirates,\nall of whom had horrible, rotten teeth!\nLittle George could feel the sway of the ocean\nand the drops of water breaking off angry waves\nthat smashed and crashed against the sides of the ship.",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"80",translateXSpeed:"2.5",translateY:"0.5",translateYSpeed:"1000",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"Waves",src:"light_ocean_waves_on_rocks_001.mp3",url:"",volume:"0.1"},{loop:"-1",name:"Music",src:"bgMusic.mp3",url:""}],updatedAt:"2015-05-06T06:43:48.746Z"},{camera:{height:"0",initialX:"-21",initialY:"-250",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"0.6889",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-230",translateYSpeed:"5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-06T09:45:31.011Z",device:"1136x640",editPopup:[{height:"0",initialX:"-21",initialY:"-250",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"0.6889",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-230",translateYSpeed:"5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],name:"2d with one line overlay",objectId:"1JnR9UltUW",page:{name:"hands",perspective:"5000",speed:"1000",x:"900",y:"1200"},popups:[{accel:!0,accelAmount:"1",height:"1",initialX:"0",initialY:"0",name:"background",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/background.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.16",height:"6",initialX:"0",initialY:"0",motionType:"sine",name:"hand1",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"50",timer:{initialTime:1419434956210},translate:!0,translateX:"3",translateXSpeed:"0.6",translateY:"3",translateYSpeed:"0.6",url:"./content/images/pages/19/hand1.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.18",height:"7",initialX:"0",initialY:"0",name:"hand2",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"200",timer:{initialTime:1419434956210},translate:!0,translateX:"3",translateXSpeed:"0.8",translateY:"4",translateYSpeed:"0.8",url:"./content/images/pages/19/hand2.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.22",height:"8",initialX:"0",initialY:"0",name:"hand3",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"300",translate:!0,translateX:"4",translateXSpeed:"0.8",translateY:"3",translateYSpeed:"0.8",url:"./content/images/pages/19/hand3.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.2",height:"9",initialX:"0",initialY:"0",name:"hand4",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"450",translate:!0,translateX:"4",translateXSpeed:"1",translateY:"4",translateYSpeed:"1",url:"./content/images/pages/19/hand4.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.15",height:"10",initialX:"0",initialY:"0",name:"hand5",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"550",translate:!0,translateX:"5",translateXSpeed:"0.9",translateY:"4",translateYSpeed:"0.9",url:"./content/images/pages/19/hand5.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.6",height:"3",initialX:"0",initialY:"0",name:"girl",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"1",height:"4",initialX:"0",initialY:"0",name:"front_ball",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/front_ball.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.25",height:"3",initialX:"0",initialY:"0",name:"george",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/george.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.8",height:"2",initialX:"0",initialY:"0",name:"boy",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/boy.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"11",initialX:"205",initialY:"770",name:"overlay",rotateAngle:"100",rotateSpeed:"2000",scale:"0.088",scaleX:"1",scaleY:"1",surfaceClass:"overlay-transparency",surfaceType:"transparency",text:"",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"1000",translateY:"334",translateYSpeed:"5",url:"",xOrigin:"0.5",xyRatio:"4",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"12",initialX:"205",initialY:"770",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"0.83",scaleX:"1",scaleY:"1",singSpeed:"5",surfaceType:"singalong",text:"hey this is a test,\ntext on the page changing\nhighlighting as it goes",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"1000",translateY:"334",translateYSpeed:"5",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"Music",src:"hands_soundtrack.mp3",url:""}],updatedAt:"2015-05-06T10:25:57.127Z"},{camera:{height:"0",initialX:"-21",initialY:"-135",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"0.48",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-115",translateYSpeed:"5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-06T10:59:25.837Z",device:"1136x640",editPopup:[{height:"0",initialX:"-21",initialY:"-135",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"0.48",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-115",translateYSpeed:"5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],name:"2d, splitscreen with multiline overlay",objectId:"UbTeKGsTfz",page:{name:"hands",perspective:"5000",speed:"1000",x:"900",y:"1200"},popups:[{accel:!0,accelAmount:"1",height:"1",initialX:"0",initialY:"0",name:"background",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/background.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.16",height:"6",initialX:"0",initialY:"0",motionType:"sine",name:"hand1",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"50",timer:{initialTime:1419434956210},translate:!0,translateX:"3",translateXSpeed:"0.6",translateY:"3",translateYSpeed:"0.6",url:"./content/images/pages/19/hand1.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.18",height:"7",initialX:"0",initialY:"0",name:"hand2",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"200",timer:{initialTime:1419434956210},translate:!0,translateX:"3",translateXSpeed:"0.8",translateY:"4",translateYSpeed:"0.8",url:"./content/images/pages/19/hand2.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.22",height:"8",initialX:"0",initialY:"0",name:"hand3",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"300",translate:!0,translateX:"4",translateXSpeed:"0.8",translateY:"3",translateYSpeed:"0.8",url:"./content/images/pages/19/hand3.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.2",height:"9",initialX:"0",initialY:"0",name:"hand4",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"450",translate:!0,translateX:"4",translateXSpeed:"1",translateY:"4",translateYSpeed:"1",url:"./content/images/pages/19/hand4.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.15",height:"10",initialX:"0",initialY:"0",name:"hand5",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"550",translate:!0,translateX:"5",translateXSpeed:"0.9",translateY:"4",translateYSpeed:"0.9",url:"./content/images/pages/19/hand5.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.6",height:"3",initialX:"0",initialY:"0",name:"girl",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"1",height:"4",initialX:"0",initialY:"0",name:"front_ball",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/front_ball.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.25",height:"3",initialX:"0",initialY:"0",name:"george",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/george.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.8",height:"2",initialX:"0",initialY:"0",name:"boy",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/boy.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"11",initialX:"900",initialY:"270",name:"overlay",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",sizeX:"350",sizeY:"700",surfaceClass:"overlay-transparency",surfaceType:"repeatingImage",text:"",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"1000",translateY:"240",translateYSpeed:"5",url:"./content/images/book_design.png",xOrigin:"0.5",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"12",initialX:"900",initialY:"270",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",singSpeed:"5",sizeX:"350",sizeY:"700",surfaceType:"highlight",text:"hey this is a test,\ntext on the page changing\nhighlighting as it goes",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"1000",translateY:"239.55",translateYSpeed:"5",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"Music",src:"hands_soundtrack.mp3",url:""}],updatedAt:"2015-05-29T14:11:15.021Z"},{camera:{height:"0",initialX:"-21",initialY:"-250",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"0.6889",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-230",translateYSpeed:"5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-06T10:18:16.253Z",device:"1136x640",editPopup:[{height:"0",initialX:"-21",initialY:"-250",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"0.6889",timeOffset:"0",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-230",translateYSpeed:"5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],name:"2d with multiline overlay",objectId:"UHGPYzstxO",page:{name:"hands",perspective:"5000",speed:"1000",x:"900",y:"1200"},popups:[{accel:!0,accelAmount:"1",height:"1",initialX:"0",initialY:"0",name:"background",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/background.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.16",height:"6",initialX:"0",initialY:"0",motionType:"sine",name:"hand1",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"50",timer:{initialTime:1419434956210},translate:!0,translateX:"3",translateXSpeed:"0.6",translateY:"3",translateYSpeed:"0.6",url:"./content/images/pages/19/hand1.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.18",height:"7",initialX:"0",initialY:"0",name:"hand2",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"200",timer:{initialTime:1419434956210},translate:!0,translateX:"3",translateXSpeed:"0.8",translateY:"4",translateYSpeed:"0.8",url:"./content/images/pages/19/hand2.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.22",height:"8",initialX:"0",initialY:"0",name:"hand3",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"300",translate:!0,translateX:"4",translateXSpeed:"0.8",translateY:"3",translateYSpeed:"0.8",url:"./content/images/pages/19/hand3.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.2",height:"9",initialX:"0",initialY:"0",name:"hand4",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"450",translate:!0,translateX:"4",translateXSpeed:"1",translateY:"4",translateYSpeed:"1",url:"./content/images/pages/19/hand4.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.15",height:"10",initialX:"0",initialY:"0",name:"hand5",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"550",translate:!0,translateX:"5",translateXSpeed:"0.9",translateY:"4",translateYSpeed:"0.9",url:"./content/images/pages/19/hand5.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.6",height:"3",initialX:"0",initialY:"0",name:"girl",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"1",height:"4",initialX:"0",initialY:"0",name:"front_ball",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/front_ball.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.25",height:"5",initialX:"0",initialY:"0",name:"george",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/george.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!0,accelAmount:"0.8",height:"2",initialX:"0",initialY:"0",name:"boy",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"0",translateX:"0",translateXSpeed:"2",translateY:"0",translateYSpeed:"1",url:"./content/images/pages/19/boy.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",cameraBound:!0,height:"3",initialX:"15",initialY:"190",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",singSpeed:"5",sizeX:"300",sizeY:"130",surfaceType:"plain",text:"“Look, he still has a blanky! Like a baby!” a little boy laughed and pointed at Little George. Some of the other children began to point and laugh as well.",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"334",translateYSpeed:"5",url:"",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",cameraBound:!0,height:"1",initialX:"10",initialY:"185",name:"overlay",opacity:"0.85",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",sizeX:"310",sizeY:"130",surfaceType:"repeatingImage",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"334",translateYSpeed:"5",url:"./content/images/book_design.png",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"Hands",src:"hands_soundtrack.mp3",url:"",volume:"0.8"},{loop:"-1",name:"Music",src:"bgMusic.mp3",url:"",volume:"1"},{loop:"0",name:"narration",src:"narration_hands.wav",url:"",volume:"1"}],updatedAt:"2015-06-02T08:52:05.588Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"3000",perspectiveZoomSpeed:"20",perspectiveZoomType:"triangle",rotateAngle:"100",rotateSpeed:"2000",scale:"0.55",timeOffset:"2000",translate:!1,translateX:"0.2",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-03T06:39:06.921Z",device:"new",editPopup:[{accel:!1,accelAmount:"1",height:"100",import3D:!0,initialX:"0",initialY:"0",motionType:"triangle",name:"gg",rotate:!0,rotateAngle:"2",rotateSpeed:"20",rotateType:"triangle",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"100",translateXSpeed:"20",translateY:"20",translateYSpeed:"10",translateZ:"4000",translateZSpeed:"1",url:"./content/images/pages/79/george_girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],name:"test",objectId:"0KdArIgF1J",page:{name:"performance test",perspective:"5000",speed:"1000",x:"1039",y:"945"},popups:[{accel:!1,accelAmount:"1",height:"100",import3D:!0,initialX:"0",initialY:"0",motionType:"triangle",name:"gg",rotate:!0,rotateAngle:"2",rotateSpeed:"20",rotateType:"triangle",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"100",translateXSpeed:"20",translateY:"20",translateYSpeed:"10",translateZ:"4000",translateZSpeed:"1",url:"./content/images/pages/79/george_girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",cameraBoundOffset:"",height:"1500",initialX:"0",initialY:"0",motionType:"triangle",name:"gg2",rotate:!0,rotateAngle:"2",rotateSpeed:"16",rotateType:"triangle",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"3000",timer:{initialTime:1419434956210},translate:!0,translateX:"20",translateXSpeed:"15",translateY:"30",translateYSpeed:"14",url:"./content/images/pages/79/middle_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"3",initialX:"-13",initialY:"0",name:"new1",rotate:!0,rotateAngle:"1",rotateSpeed:"1",rotateType:"sawtooth",scale:"0.05",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/middle_desk.png",xyRatio:"1",zoom:!1,zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"400",initialX:"0",initialY:"0",name:"new2",rotate:!0,rotateAngle:"3",rotateSpeed:"4",scale:"0.05",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"10",translateXSpeed:"0.2",translateY:"3",translateYSpeed:"0.4",url:"./content/images/pages/79/middle_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"250",initialX:"0",initialY:"0",name:"new3",rotateAngle:"12",rotateSpeed:"0.1",scale:"0.05",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"5",translateXSpeed:"1",translateY:"6",translateYSpeed:"2",url:"./content/images/pages/79/middle_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"111",initialX:"0",initialY:"0",name:"new4",rotateAngle:"3",rotateSpeed:"0.5",scale:"0.05",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"7",translateXSpeed:"4",translateY:"3",translateYSpeed:"8",url:"./content/images/pages/79/middle_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"22",initialX:"0",initialY:"0",name:"new5",rotate:!0,rotateAngle:"2",rotateSpeed:"0.2",scale:"0.05",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"2",translateXSpeed:"12",translateY:"1",translateYSpeed:"1",url:"./content/images/pages/79/middle_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"35",initialX:"0",initialY:"0",name:"new6",rotate:!0,rotateAngle:"1",rotateSpeed:"0.2",rotateType:"triangle",scale:"0.05",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"4",translateXSpeed:"5",translateY:"2",translateYSpeed:"1",url:"./content/images/pages/79/middle_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],updatedAt:"2015-05-20T13:00:44.333Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",perspectiveZoom:!1,perspectiveZoomAmount:"3000",perspectiveZoomSpeed:"20",perspectiveZoomType:"cos",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"2000",translate:!1,translateX:"0.2",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-20T12:46:43.401Z",device:"new",editPopup:[{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",perspectiveZoom:!1,perspectiveZoomAmount:"3000",perspectiveZoomSpeed:"20",perspectiveZoomType:"cos",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"2000",translate:!1,translateX:"0.2",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],name:"test",objectId:"wrmHYY7Vj8",page:{name:"slow performance test",perspective:"5000",speed:"1000",x:"1039",y:"945"},popups:[{accel:!1,accelAmount:"1",height:"100",import3D:!0,initialX:"0",initialY:"0",motionType:"cos",name:"gg",rotate:!1,rotateAngle:"2",rotateSpeed:"20",rotateType:"triangle",scale:"0.5",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"5",translateXSpeed:"500",translateY:"0",translateYSpeed:"10",translateZ:"4000",translateZSpeed:"1",url:"./content/images/pages/79/george_girl.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],updatedAt:"2015-05-20T13:15:59.401Z"},{camera:{height:"0",initialX:"0",initialY:"0",motionType:"sine",name:"camera",rotateAngle:"100",rotateSpeed:"2000",scale:"1",timeOffset:"100",translate:!1,translateX:"0",translateXSpeed:"5000",translateY:"200",translateYSpeed:"18000",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},createdAt:"2015-05-21T09:17:58.778Z",device:"new",name:"new",objectId:"FqwOqIvqwy",page:{name:"new",x:"900",y:"1200"},popups:[],updatedAt:"2015-05-21T09:17:58.778Z"},{camera:{height:"0",initialX:"0",initialY:"430",lolcamera:!0,motionType:"sawtooth",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-20000",perspectiveZoomCut:!1,perspectiveZoomCutEnd:"100",perspectiveZoomCutStart:"1",perspectiveZoomSpeed:"1",perspectiveZoomType:"triangle",perspectivezoom:!0,rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-550",translateYSpeed:"1",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoom:!1,zoomAmount:"-0.2",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!1},createdAt:"2015-05-29T09:58:22.112Z",device:"1136x640",editPopup:[{height:"0",initialX:"0",initialY:"430",lolcamera:!0,motionType:"sawtooth",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-20000",perspectiveZoomCut:!1,perspectiveZoomCutEnd:"100",perspectiveZoomCutStart:"1",perspectiveZoomSpeed:"1",perspectiveZoomType:"triangle",perspectivezoom:!0,rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-550",translateYSpeed:"1",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.5",zoom:!1,zoomAmount:"-0.2",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!1}],name:"static car newfamous 3D layout",objectId:"1110yYOHJZ",page:{name:"street",perspective:"500",speed:"27000",x:"900",y:"1200"},popups:[{height:"1",initialX:"0",initialY:"-303","motion-type":"triangle",motionType:"sawtooth",name:"background",rotateAngle:"100",rotateSpeed:"0.5",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"1000",translateY:"105",translateYSpeed:"0.5",url:"./content/images/pages/16/background.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomRelativeTranslate:!1,zoomSpeed:"0.5"},{cameraBound:!0,cameraBoundOffset:"2",height:"0",initialX:"150",initialY:"-230","motion-type":"triangle",motionType:"sawtooth",name:"car",rotate:!0,rotateAngle:"-300",rotateSpeed:"0.02",scale:"0.2",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:2e3,translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/car_no_tyres.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"100",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road1",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:2e3,translateY:"-900",translateYSpeed:"1",url:"./content/images/pages/16/road1.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"900",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road2",rotateAngle:"100",rotateSpeed:"1",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-845",translateYSpeed:"1",url:"./content/images/pages/16/road2.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"1700",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road3",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-820",translateYSpeed:"1",url:"./content/images/pages/16/road3.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{cameraBound:!0,cameraBoundOffset:"0",height:"0",initialX:"150",initialY:"-230","motion-type":"triangle",motionType:"sawtooth",name:"roadfront",rotateAngle:"100",rotateSpeed:"27000",scale:"0.2",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/road_nolines.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"2500",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"school",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-800",translateYSpeed:"1",url:"./content/images/pages/16/school.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.015",cameraBound:!0,cameraBoundOffset:"3",frames:[],height:"0",initialX:"150",initialY:"-230",motionType:"sawtooth",name:"car_tyres",numFrames:"3",rotateAngle:"100",rotateSpeed:"1",scale:"0.2",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/car_tyres_sprite.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.03",cameraBound:!0,cameraBoundOffset:"1",frames:[{url:"/content/images/pages/16/road_lines_1.png"},{url:"/content/images/pages/16/road_lines_2.png"},{url:"/content/images/pages/16/road_lines_3.png"},{url:"/content/images/pages/16/road_lines_4.png"},{url:"/content/images/pages/16/road_lines_5.png"}],height:"0",initialX:"150",initialY:"-230",motionType:"sawtooth",name:"road_lines",numFrames:"5",rotateAngle:"100",rotateSpeed:"1",scale:"0.2",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/road_lines_sprite.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",cameraBound:!0,cameraBoundOffset:"4",height:"0",initialX:"-600",initialY:"-230",motionType:"sawtooth",name:"smoke",rotateAngle:"100",rotateSpeed:"2000",scale:"0.2",scaleX:"1",scaleY:"1",skew:!0,skewAmount:"0.1",skewAmountX:"0",skewAmountY:"-0.1",skewSpeed:"0.037",skewSpeedX:"0.037",skewSpeedY:"0.074",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-638",translateYSpeed:"1",url:"./content/images/pages/16/smoke.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"}],sounds:[{loop:"-1",name:"Music",src:"bgMusic.mp3",url:"",volume:"1"},{loop:"-1",name:"Car",src:"car_soundtrack.mp3",url:"",volume:"0.4"}],updatedAt:"2015-05-29T11:11:12.977Z"},{camera:{height:"0",initialX:"0",initialY:"430",lolcamera:!0,motionType:"sawtooth",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-20000",perspectiveZoomCut:!1,perspectiveZoomCutEnd:"100",perspectiveZoomCutStart:"1",perspectiveZoomSpeed:"1",perspectiveZoomType:"triangle",perspectivezoom:!0,rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-550",translateYSpeed:"1",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"-0.2",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!1},createdAt:"2015-05-29T09:49:37.433Z",device:"1136x640",editPopup:[{height:"0",initialX:"0",initialY:"430",lolcamera:!0,motionType:"sawtooth",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-20000",perspectiveZoomCut:!1,perspectiveZoomCutEnd:"100",perspectiveZoomCutStart:"1",perspectiveZoomSpeed:"1",perspectiveZoomType:"triangle",perspectivezoom:!0,rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-550",translateYSpeed:"1",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"-0.2",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!1}],name:"newfamous 3D layout",objectId:"mt1s3uZ90p",page:{name:"street",perspective:"500",speed:"27000",x:"900",y:"1200"},popups:[{height:"1",initialX:"0",initialY:"-303","motion-type":"triangle",motionType:"sawtooth",name:"background",rotateAngle:"100",rotateSpeed:"0.5",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"1000",translateY:"105",translateYSpeed:"0.5",url:"./content/images/pages/16/background.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomRelativeTranslate:!1,zoomSpeed:"0.5"},{height:"3302",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"car",rotate:!0,rotateAngle:"-300",rotateSpeed:"0.02",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:2e3,translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/car_no_tyres.png",xOrigin:"0.75",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"100",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road1",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:2e3,translateY:"-900",translateYSpeed:"1",url:"./content/images/pages/16/road1.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"900",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road2",rotateAngle:"100",rotateSpeed:"1",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-845",translateYSpeed:"1",url:"./content/images/pages/16/road2.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"1700",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road3",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-820",translateYSpeed:"1",url:"./content/images/pages/16/road3.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"3300",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"roadfront",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/road_nolines.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"2500",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"school",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-800",translateYSpeed:"1",url:"./content/images/pages/16/school.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.015",frames:[],height:"3303",initialX:"0",initialY:"-520",motionType:"sawtooth",name:"car_tyres",numFrames:"3",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/car_tyres_sprite.png",xOrigin:"0.75",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.03",frames:[{url:"/content/images/pages/16/road_lines_1.png"},{url:"/content/images/pages/16/road_lines_2.png"},{url:"/content/images/pages/16/road_lines_3.png"},{url:"/content/images/pages/16/road_lines_4.png"},{url:"/content/images/pages/16/road_lines_5.png"}],height:"3301",initialX:"0",initialY:"-520",motionType:"sawtooth",name:"road_lines",numFrames:"5",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/road_lines_sprite.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",height:"3304",initialX:"0",initialY:"-520",motionType:"sawtooth",name:"smoke",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",skew:!0,skewAmount:"0.1",skewAmountX:"0",skewAmountY:"-0.1",skewSpeed:"0.037",skewSpeedX:"0.037",skewSpeedY:"0.074",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-638",translateYSpeed:"1",url:"./content/images/pages/16/smoke.png",xOrigin:"1",xyRatio:"1",yOrigin:"0.8",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",cameraBound:!0,height:"1",initialX:"10",initialY:"210",name:"overlay",opacity:"0.85",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",sizeX:"310",sizeY:"105",surfaceType:"repeatingImage",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/book_design.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",cameraBound:!0,height:"3",initialX:"15",initialY:"215",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",sizeX:"300",sizeY:"100",surfaceType:"plain",text:"Because they were in such a hurry, Little George’s father did not think to ask if Little George had left Blanky at home.",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"Music",src:"bgMusic.mp3",url:"",volume:"1"},{loop:"-1",name:"Car",src:"car_soundtrack.mp3",url:"",volume:"0.4"},{loop:"0",name:"narration",src:"narration_car.wav",url:"",volume:"1"}],updatedAt:"2015-06-02T09:16:20.299Z"},{camera:{height:"0",initialX:"-59",initialY:"-17",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"1",scale:"0.3364",timeOffset:"100",translate:!0,translateX:"-55",translateXSpeed:"2.5",translateY:"0",translateYSpeed:"0.5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},createdAt:"2015-04-15T09:52:44.237Z",device:"1136x640",editPopup:[{height:"1",initialX:"0",initialY:"0",name:"background",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"0.5",url:"/content/images/pages/22and23/background.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"}],name:"final, no accelo",objectId:"CIQrfRf3Gr",page:{name:"ship",speed:"2000",x:"2048",y:"1040"},popups:[{height:"1",initialX:"0",initialY:"0",name:"background",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"0.5",url:"/content/images/pages/22and23/background.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!1,accelAmount:"0.4",height:"2",initialX:"-200",initialY:"-200",name:"wave1",rotateAngle:"100",rotateSpeed:"1",scale:"1.5",scaleX:"1",scaleY:"1",timeOffset:"1281",timer:{initialTime:1419434956210},translate:!0,translateX:100,translateXSpeed:"1",translateY:"30",translateYSpeed:"0.5",url:"/content/images/pages/22and23/waves.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!1,accelAmount:"0.6",height:"3",initialX:"-200",initialY:"-200",name:"wave2",rotateAngle:"100",rotateSpeed:"1",scale:"1.5",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:100,translateXSpeed:"1",translateY:"30",translateYSpeed:"0.5",url:"/content/images/pages/22and23/waves.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!1,accelAmount:"0.9",height:"4",initialX:"0",initialY:"0",name:"ship",rotate:!0,rotateAngle:"60",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translateX:"0",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"0.5",url:"/content/images/pages/22and23/ship.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!1,accelAmount:"1.3",height:"5",initialX:"0",initialY:"0",name:"main_pirate",rotate:!0,rotateAngle:"80",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:-20,translateXSpeed:"1",translateY:0,translateYSpeed:"0.5",url:"/content/images/pages/22and23/main_pirate.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!1,accelAmount:"1.7",height:"6",initialX:"0",initialY:"0",name:"george",rotate:!0,rotateAngle:"80",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"2000",timer:{initialTime:1419434956210},translate:!1,translateX:20,translateXSpeed:"1",translateY:0,translateYSpeed:"0.5",url:"/content/images/pages/22and23/george.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!1,accelAmount:"2",height:"7",initialX:"0",initialY:"0",name:"front_rope",rotate:!0,rotateAngle:"60",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"2000",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"0.5",url:"/content/images/pages/22and23/front_rope.png",xyRatio:"1",zoom:!0,zoomAmount:"0",zoomSpeed:"1"},{accel:!1,accelAmount:"1",height:"1",initialX:"0",initialY:"0",name:"overlay",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",surfaceType:"repeatingImage",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/book_design.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"1",initialX:"0",initialY:"0",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",surfaceType:"plain",text:"... they were sailing the high seas, crossing swords with cut-throat pirates. \nAll of whom had horrible, rotten teeth! Little George could feel the sway \nof the ocean and the drops of water breaking off angry waves that \nsmashed and crashed against the sides of the ship. ",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"Waves",src:"light_ocean_waves_on_rocks_001.mp3",url:"",volume:"0.1"},{loop:"-1",name:"Music",src:"bgMusic.mp3",url:""},{name:"",url:""}],updatedAt:"2015-06-02T07:47:14.916Z"},{camera:{accel:!1,accelRotate:!0,accelRotateAmount:"0.0002",height:"0",initialX:"0",initialY:"0",motionType:"cos",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-30000",perspectiveZoomSpeed:"1",perspectiveZoomType:"cos",rotateAngle:"100",rotateSpeed:"2000",scale:"0.55",text:"",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"8000",translateY:"-192",translateYSpeed:"1",url:"/content/images/pages/79/george_girl.png",xyRatio:"1",zoom:!1,zoomAmount:"0.1",zoomCutEnd:"50",zoomCutStart:"0",zoomRelativeTranslate:!1,zoomSpeed:"6.28318530718",zoomTypeCut:!0},createdAt:"2015-05-22T08:15:51.411Z",device:"iphone5",editPopup:[{accel:!1,accelRotate:!0,accelRotateAmount:"0.0002",height:"0",initialX:"0",initialY:"0",motionType:"cos",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-30000",perspectiveZoomSpeed:"1",perspectiveZoomType:"cos",rotateAngle:"100",rotateSpeed:"2000",scale:"0.55",text:"",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"8000",translateY:"-192",translateYSpeed:"1",url:"/content/images/pages/79/george_girl.png",xyRatio:"1",zoom:!1,zoomAmount:"0.1",zoomCutEnd:"50",zoomCutStart:"0",zoomRelativeTranslate:!1,zoomSpeed:"6.28318530718",zoomTypeCut:!0}],name:"test accel rotation",objectId:"gBqF9PtfBm",page:{name:"desks",perspective:"10000",speed:"15000",x:"1039",y:"945"},popups:[{accel:!1,accelAmount:"1",height:"2500",initialX:"0",initialY:"0",name:"george_girl",rotate:!1,rotateAngle:"20",rotateSpeed:"0.4",rotateType:"triangle",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/george_girl.png",xOrigin:"0.5",xyRatio:"1",yOrigin:"0.3",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"3000",initialX:"0",initialY:"0",name:"front_board",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/front_board.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"2500",initialX:"0",initialY:"0",motionType:"triangle",name:"left_kid",rotate:!1,rotateAngle:"-15",rotateSpeed:"0.8",rotateType:"cos",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"8",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"600",url:"./content/images/pages/79/left_kid.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"2500",initialX:"0",initialY:"0",motionType:"triangle",name:"right_kid",rotate:!1,rotateAngle:"-15",rotateSpeed:"0.8",rotateType:"cos",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"300",timer:{initialTime:1419434956210},translate:!1,translateX:"-8",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"600",url:"./content/images/pages/79/right_kid.png",xOrigin:"1",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"1500",initialX:"0",initialY:"0",name:"middle_desk",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/middle_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"500",initialX:"0",initialY:"0",name:"back_desk",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/back_desk.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",height:"5",initialX:"0",initialY:"0",name:"back_wall",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/pages/79/back_wall.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",cameraBound:!0,height:"1",initialX:"10",initialY:"205",name:"overlay",opacity:"0.85",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",sizeX:"270",sizeY:"105",surfaceType:"repeatingImage",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/book_design.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",cameraBound:!0,height:"3",initialX:"15",initialY:"210",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",sizeX:"260",sizeY:"130",surfaceType:"plain",text:"The next day George went to school without Blanky.\nHe and Ruth played together the whole day.",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"soundtrack",src:"bgMusic.mp3",url:"",volume:"1"},{loop:"0",name:"narration",src:"narration_desk.wav",url:"",volume:"1"}],updatedAt:"2015-06-02T09:01:06.611Z"},{camera:{height:"0",initialX:"-59",initialY:"-30",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"1",scale:"0.359",timeOffset:"100",translate:!0,translateX:"-40",translateXSpeed:"2.5",translateY:"0",translateYSpeed:"0.5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},createdAt:"2014-12-24T15:29:15.795Z",device:"1136x640",editPopup:[{height:"0",initialX:"-59",initialY:"-30",lolcamera:!0,name:"camera",rotateAngle:"100",rotateSpeed:"1",scale:"0.359",timeOffset:"100",translate:!0,translateX:"-40",translateXSpeed:"2.5",translateY:"0",translateYSpeed:"0.5",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"}],hiddenOverflow:!1,name:"final",objectId:"w9zCNnEbfC",page:{name:"ship",speed:"2000",x:"2048",y:"1040"},popups:[{height:"1",initialX:"0",initialY:"0",name:"background",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"0.5",url:"./content/images/pages/22and23/background.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"0.4",height:"2",initialX:"-200",initialY:"-200",name:"wave1",rotateAngle:"100",rotateSpeed:"1",scale:"1.5",scaleX:"1",scaleY:"1",timeOffset:"1281",timer:{initialTime:1419434956210},translate:!0,translateX:100,translateXSpeed:"1",translateY:"30",translateYSpeed:"0.5",url:"./content/images/pages/22and23/waves.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"0.6",height:"3",initialX:"-200",initialY:"-200",name:"wave2",rotateAngle:"100",rotateSpeed:"1",scale:"1.5",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:100,translateXSpeed:"1",translateY:"30",translateYSpeed:"0.5",url:"./content/images/pages/22and23/waves.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"0.9",height:"4",initialX:"0",initialY:"0",name:"ship",rotate:!0,rotateAngle:"60",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translateX:"0",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"0.5",url:"./content/images/pages/22and23/ship.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"1.3",height:"5",initialX:"0",initialY:"0",name:"main_pirate",rotate:!0,rotateAngle:"80",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:-20,translateXSpeed:"1",translateY:0,translateYSpeed:"0.5",url:"./content/images/pages/22and23/main_pirate.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"1.7",height:"6",initialX:"0",initialY:"0",name:"george",rotate:!0,rotateAngle:"80",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"2000",timer:{initialTime:1419434956210},translate:!1,translateX:20,translateXSpeed:"1",translateY:0,translateYSpeed:"0.5",url:"./content/images/pages/22and23/george.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"1"},{accel:!0,accelAmount:"2",height:"7",initialX:"0",initialY:"0",name:"front_rope",rotate:!0,rotateAngle:"60",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"2000",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"0.5",translateY:"0",translateYSpeed:"0.5",url:"./content/images/pages/22and23/front_rope.png",xyRatio:"1",zoom:!0,zoomAmount:"0",zoomSpeed:"1"},{accel:!1,accelAmount:"1",cameraBound:!0,height:"1",initialX:"5",initialY:"210",name:"overlay",opacity:"0.85",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",sizeX:"560",sizeY:"105",surfaceType:"repeatingImage",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/book_design.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",cameraBound:!0,height:"3",initialX:"10",initialY:"215",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",sizeX:"550",sizeY:"130",surfaceType:"plain",text:"... they were sailing the high seas, crossing swords with cut-throat pirates. All of whom had horrible, rotten teeth! Little George could feel the sway of the ocean and the drops of water breaking off angry waves that smashed and crashed against the sides of the ship.",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"Waves",src:"light_ocean_waves_on_rocks_001.mp3",url:"",volume:"0.1"},{loop:"-1",name:"Music",src:"bgMusic.mp3",url:"",volume:"1"},{loop:"0",name:"narration",src:"narration_ship.wav",url:"",volume:"1"}],updatedAt:"2015-06-02T09:06:21.146Z"},{camera:{height:"0",initialX:"0",initialY:"430",lolcamera:!0,motionType:"sawtooth",name:"camera",perspectiveZoom:!0,perspectiveZoomAmount:"-20000",perspectiveZoomCut:!1,perspectiveZoomCutEnd:"100",perspectiveZoomCutStart:"1",perspectiveZoomSpeed:"1",perspectiveZoomType:"triangle",perspectivezoom:!0,rotateAngle:"100",rotateSpeed:"1",scale:"0.6320250000000001",timeOffset:"100",translate:!0,translateX:"0",translateXSpeed:"1",translateY:"-550",translateYSpeed:"1",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"-0.2",zoomCutEnd:"100",zoomCutStart:"70",zoomSpeed:"1",zoomTypeCut:!1},createdAt:"2015-06-02T09:16:51.261Z",device:"1136x640",editPopup:[{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.015",cameraBound:!0,frames:[],height:"4",initialX:"-230",initialY:"-393",motionType:"sawtooth",name:"car_tyres",numFrames:"3",rotate:!1,rotateAngle:"-300",rotateSpeed:"0.02",scale:"0.6",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/car_tyres_sprite.png",xOrigin:"0.75",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"}],name:"static car newfamous 3D layout",objectId:"rZ4dWe9BGU",page:{name:"street",perspective:"500",speed:"27000",x:"900",y:"1200"},popups:[{height:"1",initialX:"0",initialY:"-303","motion-type":"triangle",motionType:"sawtooth",name:"background",rotateAngle:"100",rotateSpeed:"0.5",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!0,translateX:"0",translateXSpeed:"1000",translateY:"105",translateYSpeed:"0.5",url:"./content/images/pages/16/background.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoomAmount:"0",zoomRelativeTranslate:!1,zoomSpeed:"0.5"},{cameraBound:!0,height:"3",initialX:"-230",initialY:"-393","motion-type":"triangle",motionType:"sawtooth",name:"car",rotate:!0,rotateAngle:"-300",rotateSpeed:"0.02",scale:"0.6",scaleX:"1",scaleY:"1",sizeX:"",sizeY:"",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:2e3,translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/car_no_tyres.png",xOrigin:"0.75",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"100",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road1",rotateAngle:"100",rotateSpeed:"1",scale:"1",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:2e3,translateY:"-900",translateYSpeed:"1",url:"./content/images/pages/16/road1.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"900",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road2",rotateAngle:"100",rotateSpeed:"1",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-845",translateYSpeed:"1",url:"./content/images/pages/16/road2.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"1700",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"road3",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-820",translateYSpeed:"1",url:"./content/images/pages/16/road3.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{cameraBound:!0,height:"1",initialX:"-320",initialY:"-395","motion-type":"triangle",motionType:"sawtooth",name:"roadfront",rotateAngle:"100",rotateSpeed:"27000",scale:"0.6",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/road_nolines.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{height:"2500",initialX:"0",initialY:"-520","motion-type":"triangle",motionType:"sawtooth",name:"school",rotateAngle:"100",rotateSpeed:"27000",scale:"1",timeOffset:"0",translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-800",translateYSpeed:"1",url:"./content/images/pages/16/school.png",xOrigin:"0",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.015",cameraBound:!0,frames:[],height:"4",initialX:"-230",initialY:"-393",motionType:"sawtooth",name:"car_tyres",numFrames:"3",rotate:!1,rotateAngle:"-300",rotateSpeed:"0.02",scale:"0.6",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/car_tyres_sprite.png",xOrigin:"0.75",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",animation:!0,animationSpeed:"0.03",cameraBound:!0,frames:[{url:"/content/images/pages/16/road_lines_1.png"},{url:"/content/images/pages/16/road_lines_2.png"},{url:"/content/images/pages/16/road_lines_3.png"},{url:"/content/images/pages/16/road_lines_4.png"},{url:"/content/images/pages/16/road_lines_5.png"}],height:"2",initialX:"-320",initialY:"-395",motionType:"sawtooth",name:"road_lines",numFrames:"5",rotateAngle:"100",rotateSpeed:"1",scale:"0.6",scaleX:"1",scaleY:"1",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-740",translateYSpeed:"1",url:"./content/images/pages/16/road_lines_sprite.png",xOrigin:"1",xyRatio:"1",yOrigin:"0",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",cameraBound:!0,height:"5",initialX:"-325",initialY:"-778",motionType:"sawtooth",name:"smoke",rotateAngle:"100",rotateSpeed:"2000",scale:"0.6",scaleX:"1",scaleY:"1",skew:!0,skewAmount:"0.1",skewAmountX:"0",skewAmountY:"-0.1",skewSpeed:"0.037",skewSpeedX:"0.037",skewSpeedY:"0.074",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"2000",translateY:"-638",translateYSpeed:"1",url:"./content/images/pages/16/smoke.png",xOrigin:"1",xyRatio:"1",yOrigin:"0.8",zoom:!1,zoomAmount:"0",zoomRelativeMultiplier:"-77",zoomRelativeTranslate:!0,zoomSpeed:"1"},{accel:!1,accelAmount:"1",cameraBound:!0,height:"7",initialX:"10",initialY:"210",name:"overlay",opacity:"0.85",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",sizeX:"310",sizeY:"105",surfaceType:"repeatingImage",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"./content/images/book_design.png",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"},{accel:!1,accelAmount:"1",cameraBound:!0,height:"9",initialX:"15",initialY:"215",name:"text",rotateAngle:"100",rotateSpeed:"2000",scale:"1",scaleX:"1",scaleY:"1",sizeX:"300",sizeY:"100",surfaceType:"plain",text:"Because they were in such a hurry, Little George’s father did not think to ask if Little George had left Blanky at home.",timeOffset:"0",timer:{initialTime:1419434956210},translate:!1,translateX:"0",translateXSpeed:"1000",translateY:"0",translateYSpeed:"1000",url:"",xyRatio:"1",zoomAmount:"0",zoomSpeed:"2000"}],sounds:[{loop:"-1",name:"Music",src:"bgMusic.mp3",url:"",volume:"1"},{loop:"-1",name:"Car",src:"car_soundtrack.mp3",url:"",volume:"0.4"},{loop:"0",name:"narration",src:"narration_car.wav",url:"",volume:"1"}],updatedAt:"2015-06-02T13:09:08.257Z"}]},i.exports=a
}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof i&&i.amd)i("famous",[],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.famous=t()}}(function(){return function t(i,a,n){function s(r,l){if(!a[r]){if(!i[r]){var p="function"==typeof e&&e;if(!l&&p)return p(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=a[r]={exports:{}};i[r][0].call(u.exports,function(t){var e=i[r][1][t];return s(e?e:t)},u,u.exports,t,i,a,n)}return a[r].exports}for(var o="function"==typeof e&&e,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e){function i(t){a.call(this,t);var e=t.getAlign();this._x.set(e[0]),this._y.set(e[1]),this._z.set(e[2])}var a=t("./Position");i.prototype.toString=function(){return"Align"},i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.update=function(){this._node.setAlign(this._x.get(),this._y.get(),this._z.get()),this._checkUpdate()},i.prototype.onUpdate=i.prototype.update,e.exports=i},{"./Position":7}],2:[function(t,e){function i(t){this._node=t,this._projectionType=i.ORTHOGRAPHIC_PROJECTION,this._focalDepth=0,this._near=0,this._far=0,this._requestingUpdate=!1,this._id=t.addComponent(this),this._viewTransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._viewDirty=!1,this._perspectiveDirty=!1,this.setFlat()}i.FRUSTUM_PROJECTION=0,i.PINHOLE_PROJECTION=1,i.ORTHOGRAPHIC_PROJECTION=2,i.prototype.toString=function(){return"Camera"},i.prototype.getValue=function(){return{component:this.toString(),projectionType:this._projectionType,focalDepth:this._focalDepth,near:this._near,far:this._far}},i.prototype.setValue=function(t){return this.toString()===t.component?(this.set(t.projectionType,t.focalDepth,t.near,t.far),!0):!1},i.prototype.set=function(t,e,i,a){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._projectionType=t,this._focalDepth=e,this._near=i,this._far=a},i.prototype.setDepth=function(t){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=i.PINHOLE_PROJECTION,this._focalDepth=t,this._near=0,this._far=0,this},i.prototype.setFrustum=function(t,e){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=i.FRUSTUM_PROJECTION,this._focalDepth=0,this._near=t,this._far=e,this},i.prototype.setFlat=function(){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=i.ORTHOGRAPHIC_PROJECTION,this._focalDepth=0,this._near=0,this._far=0,this},i.prototype.onUpdate=function(){this._requestingUpdate=!1;var t=this._node.getLocation();if(this._node.sendDrawCommand("WITH").sendDrawCommand(t),this._perspectiveDirty)switch(this._perspectiveDirty=!1,this._projectionType){case i.FRUSTUM_PROJECTION:this._node.sendDrawCommand("FRUSTUM_PROJECTION"),this._node.sendDrawCommand(this._near),this._node.sendDrawCommand(this._far);break;case i.PINHOLE_PROJECTION:this._node.sendDrawCommand("PINHOLE_PROJECTION"),this._node.sendDrawCommand(this._focalDepth);break;case i.ORTHOGRAPHIC_PROJECTION:this._node.sendDrawCommand("ORTHOGRAPHIC_PROJECTION")}this._viewDirty&&(this._viewDirty=!1,this._node.sendDrawCommand("CHANGE_VIEW_TRANSFORM"),this._node.sendDrawCommand(this._viewTransform[0]),this._node.sendDrawCommand(this._viewTransform[1]),this._node.sendDrawCommand(this._viewTransform[2]),this._node.sendDrawCommand(this._viewTransform[3]),this._node.sendDrawCommand(this._viewTransform[4]),this._node.sendDrawCommand(this._viewTransform[5]),this._node.sendDrawCommand(this._viewTransform[6]),this._node.sendDrawCommand(this._viewTransform[7]),this._node.sendDrawCommand(this._viewTransform[8]),this._node.sendDrawCommand(this._viewTransform[9]),this._node.sendDrawCommand(this._viewTransform[10]),this._node.sendDrawCommand(this._viewTransform[11]),this._node.sendDrawCommand(this._viewTransform[12]),this._node.sendDrawCommand(this._viewTransform[13]),this._node.sendDrawCommand(this._viewTransform[14]),this._node.sendDrawCommand(this._viewTransform[15]))},i.prototype.onTransformChange=function(t){var e=t;this._viewDirty=!0,this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0);var i=e[0],a=e[1],n=e[2],s=e[3],o=e[4],r=e[5],l=e[6],p=e[7],c=e[8],u=e[9],h=e[10],d=e[11],m=e[12],g=e[13],f=e[14],y=e[15],_=i*r-a*o,v=i*l-n*o,S=i*p-s*o,x=a*l-n*r,A=a*p-s*r,b=n*p-s*l,T=c*g-u*m,z=c*f-h*m,w=c*y-d*m,R=u*f-h*g,O=u*y-d*g,C=h*y-d*f,E=1/(_*C-v*O+S*R+x*w-A*z+b*T);this._viewTransform[0]=(r*C-l*O+p*R)*E,this._viewTransform[1]=(n*O-a*C-s*R)*E,this._viewTransform[2]=(g*b-f*A+y*x)*E,this._viewTransform[3]=(h*A-u*b-d*x)*E,this._viewTransform[4]=(l*w-o*C-p*z)*E,this._viewTransform[5]=(i*C-n*w+s*z)*E,this._viewTransform[6]=(f*S-m*b-y*v)*E,this._viewTransform[7]=(c*b-h*S+d*v)*E,this._viewTransform[8]=(o*O-r*w+p*T)*E,this._viewTransform[9]=(a*w-i*O-s*T)*E,this._viewTransform[10]=(m*A-g*S+y*_)*E,this._viewTransform[11]=(u*S-c*A-d*_)*E,this._viewTransform[12]=(r*z-o*R-l*T)*E,this._viewTransform[13]=(i*R-a*z+n*T)*E,this._viewTransform[14]=(g*v-m*x-f*_)*E,this._viewTransform[15]=(c*x-u*v+h*_)*E},e.exports=i},{}],3:[function(t,e){function i(t,e){this.node=t,this.id=t.addComponent(this),this._events=new r,this.last1=new l,this.last2=new l,this.delta1=new l,this.delta2=new l,this.velocity1=new l,this.velocity2=new l,this.dist=0,this.diff12=new l,this.center=new l,this.centerDelta=new l,this.centerVelocity=new l,this.pointer1={position:this.last1,delta:this.delta1,velocity:this.velocity1},this.pointer2={position:this.last2,delta:this.delta2,velocity:this.velocity2},this.event={status:null,time:0,pointers:[],center:this.center,centerDelta:this.centerDelta,centerVelocity:this.centerVelocity,points:0,current:0},this.trackedPointerIDs=[-1,-1],this.timeOfPointer=0,this.multiTap=0,this.mice=[],this.gestures=[],this.options={},this.trackedGestures={};var i,a;if(e)for(i=0,a=e.length;a>i;i++)this.on(e[i],e[i].callback);t.addUIEvent("touchstart"),t.addUIEvent("mousedown"),t.addUIEvent("touchmove"),t.addUIEvent("mousemove"),t.addUIEvent("touchend"),t.addUIEvent("mouseup"),t.addUIEvent("mouseleave")}function a(t){var e;if(t.targetTouches?e=t.targetTouches:(this.mice[0]=t,e=this.mice,t.identifier=1),!e[0]||!e[1]||this.trackedPointerIDs[0]!==e[0].identifier||this.trackedPointerIDs[1]!==e[1].identifier){this.event.time=Date.now();var i,a;this.trackedPointerIDs[0]!==e[0].identifier&&(this.trackedGestures.tap&&(i=this.options.tap&&this.options.tap.threshold||250,this.event.time-this.timeOfPointer<i?this.event.taps++:this.event.taps=1,this.timeOfPointer=this.event.time,this.multiTap=1),this.event.current=1,this.event.points=1,a=e[0].identifier,this.trackedPointerIDs[0]=a,this.last1.set(e[0].pageX,e[0].pageY),this.velocity1.clear(),this.delta1.clear(),this.event.pointers.push(this.pointer1)),e[1]&&this.trackedPointerIDs[1]!==e[1].identifier&&(this.trackedGestures.tap&&(i=this.options.tap&&this.options.tap.threshold||250,this.event.time-this.timeOfPointer<i&&(this.multiTap=2)),this.event.current=2,this.event.points=2,a=e[1].identifier,this.trackedPointerIDs[1]=a,this.last2.set(e[1].pageX,e[1].pageY),this.velocity2.clear(),this.delta2.clear(),l.add(this.last1,this.last2,this.center).scale(.5),this.centerDelta.clear(),this.centerVelocity.clear(),l.subtract(this.last2,this.last1,this.diff12),this.dist=this.diff12.length(),this.trackedGestures.pinch&&(this.event.scale=this.event.scale||1,this.event.scaleDelta=0,this.event.scaleVelocity=0),this.trackedGestures.rotate&&(this.event.rotation=this.event.rotation||0,this.event.rotationDelta=0,this.event.rotationVelocity=0),this.event.pointers.push(this.pointer2)),this.event.status="start",1===this.event.points&&(this.center.copy(this.last1),this.centerDelta.clear(),this.centerVelocity.clear(),this.trackedGestures.pinch&&(this.event.scale=1,this.event.scaleDelta=0,this.event.scaleVelocity=0),this.trackedGestures.rotate&&(this.event.rotation=0,this.event.rotationDelta=0,this.event.rotationVelocity=0)),this.triggerGestures()}}function n(t){var e;if(t.targetTouches)e=t.targetTouches;else{if(!this.event.current)return;this.mice[0]=t,e=this.mice,t.identifier=1}var i=Date.now(),a=i-this.event.time;if(0!==a){var n=1e3/a;if(this.event.time=i,this.event.current=1,this.event.points=1,this.trackedPointerIDs[0]===e[0].identifier&&(p.set(e[0].pageX,e[0].pageY),l.subtract(p,this.last1,this.delta1),l.scale(this.delta1,n,this.velocity1),this.last1.copy(p)),e[1]){if(this.event.current=2,this.event.points=2,p.set(e[1].pageX,e[1].pageY),l.subtract(p,this.last2,this.delta2),l.scale(this.delta2,n,this.velocity2),this.last2.copy(p),l.add(this.last1,this.last2,p).scale(.5),l.subtract(p,this.center,this.centerDelta),l.add(this.velocity1,this.velocity2,this.centerVelocity).scale(.5),this.center.copy(p),l.subtract(this.last2,this.last1,p),this.trackedGestures.rotate){var s=p.dot(this.diff12),o=p.cross(this.diff12),r=-Math.atan2(o,s);this.event.rotation+=r,this.event.rotationDelta=r,this.event.rotationVelocity=r*n}var c=p.length(),u=c/this.dist;this.diff12.copy(p),this.dist=c,this.trackedGestures.pinch&&(this.event.scale*=u,u-=1,this.event.scaleDelta=u,this.event.scaleVelocity=u*n)}this.event.status="move",1===this.event.points&&(this.center.copy(this.last1),this.centerDelta.copy(this.delta1),this.centerVelocity.copy(this.velocity1),this.trackedGestures.pinch&&(this.event.scale=1,this.event.scaleDelta=0,this.event.scaleVelocity=0),this.trackedGestures.rotate&&(this.event.rotation=0,this.event.rotationDelta=0,this.event.rotationVelocity=0)),this.triggerGestures()}}function s(t){var e;if(t.targetTouches)e=t.targetTouches;else{if(!this.event.current)return;this.mice.pop(),e=this.mice}if(!e[0]||!e[1]||this.trackedPointerIDs[0]!==e[0].identifier||this.trackedPointerIDs[1]!==e[1].identifier){var i;if(this.event.status="end",!e[0])return this.event.current=0,this.trackedPointerIDs[0]=-1,this.trackedPointerIDs[1]=-1,this.triggerGestures(),this.event.pointers.pop(),void this.event.pointers.pop();this.trackedPointerIDs[0]!==e[0].identifier&&(this.trackedPointerIDs[0]=-1,i=e[0].identifier,this.trackedPointerIDs[0]=i,this.last1.set(e[0].pageX,e[0].pageY),this.velocity1.clear(),this.delta1.clear()),e[1]?this.trackedPointerIDs[1]!==e[1].identifier&&(this.trackedPointerIDs[1]=-1,this.event.points=2,i=e[1].identifier,this.trackedPointerIDs[1]=i,this.last2.set(e[1].pageX,e[1].pageY),this.velocity2.clear(),this.delta2.clear(),l.add(this.last1,this.last2,this.center).scale(.5),this.centerDelta.clear(),this.centerVelocity.clear(),l.subtract(this.last2,this.last1,this.diff12),this.dist=this.diff12.length()):(this.event.current=1,this.trackedPointerIDs[1]=-1,this.triggerGestures(),this.event.points=1,this.event.pointers.pop())}}function o(){this.event.current&&(this.event.status="end",this.event.current=0,this.trackedPointerIDs[0]=-1,this.triggerGestures(),this.event.pointers.pop())}var r=t("../utilities/CallbackStore"),l=t("../math/Vec2"),p=new l,c={drag:!0,tap:!0,rotate:!0,pinch:!0};i.prototype.onReceive=function(t,e){switch(t){case"touchstart":case"mousedown":a.call(this,e);break;case"touchmove":case"mousemove":n.call(this,e);break;case"touchend":case"mouseup":s.call(this,e);break;case"mouseleave":o.call(this,e)}},i.prototype.toString=function(){return"GestureHandler"},i.prototype.on=function(t,e){var i=t.event||t;c[i]&&(this.trackedGestures[i]=!0,this.gestures.push(i),t.event&&(this.options[i]=t),this._events.on(i,e))},i.prototype.triggerGestures=function(){for(var t=this.event,e=0,i=this.gestures.length;i>e;e++){var a=this.gestures[e];switch(a){case"rotate":case"pinch":2===t.points&&this.trigger(a,t);break;case"tap":if("start"===t.status)if(this.options.tap){var n=this.options.tap.points||1;this.multiTap>=n&&t.points>=n&&this.trigger(a,t)}else this.trigger(a,t);break;default:this.trigger(a,t)}}},i.prototype.trigger=function(t,e){this._events.trigger(t,e)},e.exports=i},{"../math/Vec2":43,"../utilities/CallbackStore":90}],4:[function(t,e){function i(t){a.call(this,t);var e=t.getMountPoint();this._x.set(e[0]),this._y.set(e[1]),this._z.set(e[2])}var a=t("./Position");i.prototype.toString=function(){return"MountPoint"},i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.update=function(){this._node.setMountPoint(this._x.get(),this._y.get(),this._z.get()),this._checkUpdate()},i.prototype.onUpdate=i.prototype.update,e.exports=i},{"./Position":7}],5:[function(t,e){function i(t){this._node=t,this._id=t.addComponent(this),this._value=new a(1),this._requestingUpdate=!1}var a=t("../transitions/Transitionable");i.prototype.toString=function(){return"Opacity"},i.prototype.getValue=function(){return{component:this.toString(),value:this._value.get()}},i.prototype.setValue=function(t){return this.toString()===t.component?(this.set(t.value),!0):!1},i.prototype.set=function(t,e,i){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._value.set(t,e,i),this},i.prototype.get=function(){return this._value.get()},i.prototype.halt=function(){return this._value.halt(),this},i.prototype.isActive=function(){return this._value.isActive()},i.prototype.update=function(){this._node.setOpacity(this._value.get()),this._value.isActive()?this._node.requestUpdateOnNextTick(this._id):this._requestingUpdate=!1},i.prototype.onUpdate=i.prototype.update,e.exports=i},{"../transitions/Transitionable":88}],6:[function(t,e){function i(t){a.call(this,t);var e=t.getOrigin();this._x.set(e[0]),this._y.set(e[1]),this._z.set(e[2])}var a=t("./Position");i.prototype.toString=function(){return"Origin"},i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.update=function(){this._node.setOrigin(this._x.get(),this._y.get(),this._z.get()),this._checkUpdate()},i.prototype.onUpdate=i.prototype.update,e.exports=i},{"./Position":7}],7:[function(t,e){function i(t){this._node=t,this._id=t.addComponent(this),this._requestingUpdate=!1;var e=t.getPosition();this._x=new a(e[0]),this._y=new a(e[1]),this._z=new a(e[2])}var a=t("../transitions/Transitionable");i.prototype.toString=function(){return"Position"},i.prototype.getValue=function(){return{component:this.toString(),x:this._x.get(),y:this._y.get(),z:this._z.get()}},i.prototype.setValue=function(t){return this.toString()===t.component?(this.set(t.x,t.y,t.z),!0):!1},i.prototype.getX=function(){return this._x.get()},i.prototype.getY=function(){return this._y.get()},i.prototype.getZ=function(){return this._z.get()},i.prototype.isActive=function(){return this._x.isActive()||this._y.isActive()||this._z.isActive()},i.prototype._checkUpdate=function(){this.isActive()?this._node.requestUpdateOnNextTick(this._id):this._requestingUpdate=!1},i.prototype.update=function(){this._node.setPosition(this._x.get(),this._y.get(),this._z.get()),this._checkUpdate()},i.prototype.onUpdate=i.prototype.update,i.prototype.setX=function(t,e,i){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._x.set(t,e,i),this},i.prototype.setY=function(t,e,i){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._y.set(t,e,i),this},i.prototype.setZ=function(t,e,i){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._z.set(t,e,i),this},i.prototype.set=function(t,e,i,a,n){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0);var s,o,r;return null!=i?r=n:null!=e?o=n:null!=t&&(s=n),null!=t&&this._x.set(t,a,s),null!=e&&this._y.set(e,a,o),null!=i&&this._z.set(i,a,r),this},i.prototype.halt=function(){return this._x.halt(),this._y.halt(),this._z.halt(),this},e.exports=i},{"../transitions/Transitionable":88}],8:[function(t,e){function i(t){a.call(this,t);var e=t.getRotation(),i=e[0],n=e[1],s=e[2],o=e[3],r=i*i,l=n*n,p=s*s,c=2*(i*s+n*o);c=-1>c?-1:c>1?1:c;var u=Math.atan2(2*(i*o-n*s),1-2*(r+l)),h=Math.asin(c),d=Math.atan2(2*(s*o-i*n),1-2*(l+p));this._x.set(u),this._y.set(h),this._z.set(d)}var a=t("./Position");i.prototype.toString=function(){return"Rotation"},i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.update=function(){this._node.setRotation(this._x.get(),this._y.get(),this._z.get()),this._checkUpdate()},i.prototype.onUpdate=i.prototype.update,e.exports=i},{"./Position":7}],9:[function(t,e){function i(t){a.call(this,t),this._x.set(1),this._y.set(1),this._z.set(1)}var a=t("./Position");i.prototype.toString=function(){return"Scale"},i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.update=function(){this._node.setScale(this._x.get(),this._y.get(),this._z.get()),this._checkUpdate()},i.prototype.onUpdate=i.prototype.update,e.exports=i},{"./Position":7}],10:[function(t,e){function i(t){this._node=t,this._id=t.addComponent(this),this._requestingUpdate=!1;var e=t.getProportionalSize(),i=t.getDifferentialSize(),n=t.getAbsoluteSize();this._proportional={x:new a(e[0]),y:new a(e[1]),z:new a(e[2])},this._differential={x:new a(i[0]),y:new a(i[1]),z:new a(i[2])},this._absolute={x:new a(n[0]),y:new a(n[1]),z:new a(n[2])}}var a=t("../transitions/Transitionable");i.RELATIVE=0,i.ABSOLUTE=1,i.RENDER=2,i.DEFAULT=i.RELATIVE,i.prototype.setMode=function(t,e,i){return this._node.setSizeMode(t,e,i),this},i.prototype.toString=function(){return"Size"},i.prototype.getValue=function(){return{sizeMode:this._node.value.sizeMode,absolute:{x:this._absolute.x.get(),y:this._absolute.y.get(),z:this._absolute.z.get()},differential:{x:this._differential.x.get(),y:this._differential.y.get(),z:this._differential.z.get()},proportional:{x:this._proportional.x.get(),y:this._proportional.y.get(),z:this._proportional.z.get()}}},i.prototype.setValue=function(t){return this.toString()===t.component&&(this.setMode.apply(this,t.sizeMode),t.absolute&&this.setAbsolute(t.absolute.x,t.absolute.y,t.absolute.z),t.differential&&this.setAbsolute(t.differential.x,t.differential.y,t.differential.z),t.proportional&&this.setAbsolute(t.proportional.x,t.proportional.y,t.proportional.z)),!1},i.prototype._isActive=function(t){return t.x.isActive()||t.y.isActive()||t.z.isActive()},i.prototype.isActive=function(){return this._isActive(this._absolute)||this._isActive(this._proportional)||this._isActive(this._differential)},i.prototype.onUpdate=function(){var t=this._absolute;this._node.setAbsoluteSize(t.x.get(),t.y.get(),t.z.get());var e=this._proportional,i=this._differential;this._node.setProportionalSize(e.x.get(),e.y.get(),e.z.get()),this._node.setDifferentialSize(i.x.get(),i.y.get(),i.z.get()),this.isActive()?this._node.requestUpdateOnNextTick(this._id):this._requestingUpdate=!1},i.prototype.setAbsolute=function(t,e,i,a,n){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0);var s,o,r;null!=i?r=n:null!=e?o=n:null!=t&&(s=n);var l=this._absolute;null!=t&&l.x.set(t,a,s),null!=e&&l.y.set(e,a,o),null!=i&&l.z.set(i,a,r)},i.prototype.setProportional=function(t,e,i,a,n){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0);var s,o,r;null!=i?r=n:null!=e?o=n:null!=t&&(s=n);var l=this._proportional;return null!=t&&l.x.set(t,a,s),null!=e&&l.y.set(e,a,o),null!=i&&l.z.set(i,a,r),this},i.prototype.setDifferential=function(t,e,i,a,n){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0);var s,o,r;null!=i?r=n:null!=e?o=n:null!=t&&(s=n);var l=this._differential;return null!=t&&l.x.set(t,a,s),null!=e&&l.y.set(e,a,o),null!=i&&l.z.set(i,a,r),this},i.prototype.get=function(){return this._node.getSize()},i.prototype.halt=function(){return this._proportional.x.halt(),this._proportional.y.halt(),this._proportional.z.halt(),this._differential.x.halt(),this._differential.y.halt(),this._differential.z.halt(),this._absolute.x.halt(),this._absolute.y.halt(),this._absolute.z.halt(),this},e.exports=i},{"../transitions/Transitionable":88}],11:[function(t,e){function i(t,e,i,a){this._transform=a,this._dirty=!1,this.x=new s(t),this.y=new s(e),this.z=new s(i),this._values={x:t,y:e,z:i}}function a(t,e,i,a,n){this._transform=n,this._dirty=!1,this._t=new s([t,e,i,a])}function n(t){this._node=t,this._id=t.addComponent(this),this.origin=null,this.mountPoint=null,this.align=null,this.scale=null,this.position=null,this.rotation=null,this._dirty=!1}var s=t("../transitions/Transitionable"),o=t("../math/Quaternion"),r=new o,l=new o;i.prototype.get=function(){return this._values.x=this.x.get(),this._values.y=this.y.get(),this._values.z=this.z.get(),this._values},i.prototype.set=function(t,e,i,a,n){this._transform._dirty||(this._transform._node.requestUpdate(this._transform._id),this._transform._dirty=!0),this._dirty=!0;var s=null,o=null,r=null;return null!=i?r=n:null!=e?o=n:null!=t&&(s=n),null!=t&&this.x.set(t,a,s),null!=e&&this.y.set(e,a,o),null!=i&&this.z.set(i,a,r),this},i.prototype.isActive=function(){return this.x.isActive()||this.y.isActive()||this.z.isActive()},i.prototype.pause=function(){return this.x.pause(),this.y.pause(),this.z.pause(),this},i.prototype.resume=function(){return this.x.resume(),this.y.resume(),this.z.resume(),this},i.prototype.halt=function(){return this.x.halt(),this.y.halt(),this.z.halt(),this},a.prototype.get=function(){return this._t.get()},a.prototype.set=function(t,e,i,a,n,s){this._transform._dirty||(this._transform._node.requestUpdate(this._transform._id),this._transform._dirty=!0),this._dirty=!0,n.method="slerp",this._t.set([t,e,i,a],n,s)},a.prototype.isActive=function(){return this._t.isActive()},a.prototype.pause=function(){return this._t.pause(),this},a.prototype.resume=function(){return this._t.resume(),this},a.prototype.halt=function(){return this._dirty=!1,this._t.halt(),this},n.prototype.toString=function(){return"Transform"},n.prototype.getValue=function(){return{component:this.toString(),origin:this.origin&&this.origin.get(),mountPoint:this.mountPoint&&this.mountPoint.get(),align:this.align&&this.align.get(),scale:this.scale&&this.scale.get(),position:this.position&&this.position.get(),rotation:this.rotation&&this.rotation.get()}},n.prototype.setState=function(t){return this.toString()===t.component?(t.origin&&this.setOrigin(t.origin.x,t.origin.y,t.origin.z),t.mountPoint&&this.setMountPoint(t.mountPoint.x,t.mountPoint.y,t.mountPoint.z),t.align&&this.setAlign(t.align.x,t.align.y,t.align.z),t.scale&&this.setScale(t.scale.x,t.scale.y,t.scale.z),t.position&&this.setPosition(t.position.x,t.position.y,t.position.z),t.rotation&&this.setRotation(t.rotation.x,t.rotation.y,t.rotation.z,t.rotation.w),!0):!1},n.prototype.setOrigin=function(t,e,a,n,s){if(!this.origin){var o=this._node.getOrigin();this.origin=new i(o[0],o[1],o[2],this)}return this.origin.set(t,e,a,n,s),this},n.prototype.setMountPoint=function(t,e,a,n,s){if(!this.mountPoint){var o=this._node.getMountPoint();this.mountPoint=new i(o[0],o[1],o[2],this)}return this.mountPoint.set(t,e,a,n,s),this},n.prototype.setAlign=function(t,e,a,n,s){if(!this.align){var o=this._node.getAlign();this.align=new i(o[0],o[1],o[2],this)}return this.align.set(t,e,a,n,s),this},n.prototype.setScale=function(t,e,a,n,s){if(!this.scale){var o=this._node.getScale();this.scale=new i(o[0],o[1],o[2],this)}return this.scale.set(t,e,a,n,s),this},n.prototype.setPosition=function(t,e,a,n,s){if(!this.position){var o=this._node.getPosition();this.position=new i(o[0],o[1],o[2],this)}return this.position.set(t,e,a,n,s),this},n.prototype.translate=function(t,e,a,n,s){if(!this.position){var o=this._node.getPosition();this.position=new i(o[0],o[1],o[2],this)}var r=this.position,l=r.x._queue,p=r.y._queue,c=r.z._queue,u=null==t?null:t+(l.length>0?l[l.length-5]:r.x._state),h=null==e?null:e+(p.length>0?p[p.length-5]:r.y._state),d=null==a?null:a+(c.length>0?c[c.length-5]:r.z._state);return this.position.set(u,h,d,n,s),this},n.prototype.setRotation=function(t,e,i,n,s,o){if(!this.rotation){var l=this._node.getRotation();this.rotation=new a(l[0],l[1],l[2],l[3],this)}var p=r;return"number"==typeof n?p.set(n,t,e,i):(p.fromEuler(t,e,i),o=s,s=n),this.rotation.set(p.x,p.y,p.z,p.w,s,o),this},n.prototype.rotate=function(t,e,i,n,s,o){if(!this.rotation){var p=this._node.getRotation();this.rotation=new a(p[0],p[1],p[2],p[3],this)}var c,u,h=this.rotation._t._queue,d=h.length;u=0!==d?h[d-5]:this.rotation._t._state,c=l.set(u[3],u[0],u[1],u[2]);var m=r;"number"==typeof n?m.set(n,t,e,i):(m.fromEuler(t,e,i),o=s,s=n);var g=c.multiply(m);return this.rotation.set(g.x,g.y,g.z,g.w,s,o),this},n.prototype.clean=function(){var t,e=this._node,i=!1;if((t=this.origin)&&t._dirty&&(e.setOrigin(t.x.get(),t.y.get(),t.z.get()),t._dirty=t.isActive(),i=i||t._dirty),(t=this.mountPoint)&&t._dirty&&(e.setMountPoint(t.x.get(),t.y.get(),t.z.get()),t._dirty=t.isActive(),i=i||t._dirty),(t=this.align)&&t._dirty&&(e.setAlign(t.x.get(),t.y.get(),t.z.get()),t._dirty=t.isActive(),i=i||t._dirty),(t=this.scale)&&t._dirty&&(e.setScale(t.x.get(),t.y.get(),t.z.get()),t._dirty=t.isActive(),i=i||t._dirty),(t=this.position)&&t._dirty&&(e.setPosition(t.x.get(),t.y.get(),t.z.get()),t._dirty=t.isActive(),i=i||t._dirty),(t=this.rotation)&&t._dirty){var a=t.get();e.setRotation(a[0],a[1],a[2],a[3]),t._dirty=t.isActive(),i=i||t._dirty}i?this._node.requestUpdateOnNextTick(this._id):this._dirty=!1},n.prototype.onUpdate=n.prototype.clean,e.exports=n},{"../math/Quaternion":42,"../transitions/Transitionable":88}],12:[function(t,e){e.exports={Align:t("./Align"),Camera:t("./Camera"),GestureHandler:t("./GestureHandler"),MountPoint:t("./MountPoint"),Opacity:t("./Opacity"),Origin:t("./Origin"),Position:t("./Position"),Rotation:t("./Rotation"),Scale:t("./Scale"),Size:t("./Size"),Transform:t("./Transform")}},{"./Align":1,"./Camera":2,"./GestureHandler":3,"./MountPoint":4,"./Opacity":5,"./Origin":6,"./Position":7,"./Rotation":8,"./Scale":9,"./Size":10,"./Transform":11}],13:[function(t,e){function i(){"undefined"!=typeof self&&self.window!==self&&this._enterWorkerMode()}i.prototype._enterWorkerMode=function(){this._workerMode=!0;var t=this;self.addEventListener("message",function(e){t.onMessage(e.data)})},i.prototype.onMessage=null,i.prototype.sendMessage=function(t){this._workerMode?self.postMessage(t):this.onmessage(t)},i.prototype.onmessage=null,i.prototype.postMessage=function(t){return this.onMessage(t)},e.exports=i},{}],14:[function(t,e){function i(){this._time=0,this._frame=0,this._timerQueue=[],this._updatingIndex=0,this._scale=1,this._scaledTime=this._time}i.prototype.setScale=function(t){return this._scale=t,this},i.prototype.getScale=function(){return this._scale},i.prototype.step=function(t){this._frame++,this._scaledTime=this._scaledTime+(t-this._time)*this._scale,this._time=t;for(var e=0;e<this._timerQueue.length;e++)this._timerQueue[e](this._scaledTime)&&this._timerQueue.splice(e,1);return this},i.prototype.now=function(){return this._scaledTime},i.prototype.getTime=i.prototype.now,i.prototype.getFrame=function(){return this._frame},i.prototype.setTimeout=function(t,e){var i=Array.prototype.slice.call(arguments,2),a=this._time,n=function(n){return n-a>=e?(t.apply(null,i),!0):!1};return this._timerQueue.push(n),n},i.prototype.setInterval=function(t,e){var i=Array.prototype.slice.call(arguments,2),a=this._time,n=function(n){return n-a>=e&&(t.apply(null,i),a=n),!1};return this._timerQueue.push(n),n},i.prototype.clearTimer=function(t){var e=this._timerQueue.indexOf(t);return-1!==e&&this._timerQueue.splice(e,1),this},e.exports=i},{}],15:[function(t,e){function i(t){if(!t)throw new Error("Dispatch needs to be instantiated on a node");this._context=t,this._queue=[]}function a(t,e){e.length=0;var i,a=0,n=t.length;for(i=0;n>i;i++)"/"===t[i]&&(e.push(t.substring(a,i)),a=i+1);return i-a>0&&e.push(t.substring(a,i)),e}var n=t("./Event");i.prototype.lookupNode=function(t){if(!t)throw new Error("lookupNode must be called with a path");var e=this._queue;if(a(t,e),e[0]!==this._context.getSelector())return void 0;var i,n=this._context.getChildren(),s=1;for(e[0]=this._context;s<e.length;){if(i=n[e[s]],e[s]=i,!i)return void 0;n=i.getChildren(),s++}return i},i.prototype.dispatch=function(t,e){if(!t)throw new Error("dispatch requires an event name as it's first argument");var i,a,n,s,o=this._queue;for(o.length=0,o.push(this._context);o.length;)for(i=o.shift(),i.onReceive&&i.onReceive(t,e),s=i.getChildren(),a=0,n=s.length;n>a;a++)o.push(s[a])},i.prototype.dispatchUIEvent=function(t,e,i){if(!t)throw new Error("dispatchUIEvent needs a valid path to dispatch to");if(!e)throw new Error("dispatchUIEvent needs an event name as its second argument");var a,s=this._queue;for(n.call(i),i.node=this.lookupNode(t);s.length&&(a=s.pop(),a.onReceive&&a.onReceive(e,i),!i.propagationStopped););},e.exports=i},{"./Event":16}],16:[function(t,e){function i(){this.propagationStopped=!1,this.stopPropagation=a}function a(){this.propagationStopped=!0}e.exports=i},{}],17:[function(t,e){function i(){this._updateQueue=[],this._nextUpdateQueue=[],this._scenes={},this._messages=u,this._inUpdate=!1,this._clock=new a,this._channel=new s,this._channel.onMessage=this.handleMessage.bind(this)}var a=t("./Clock"),n=t("./Scene"),s=t("./Channel"),o=t("../renderers/UIManager"),r=t("../renderers/Compositor"),l=t("../render-loops/RequestAnimationFrameLoop"),p=["ENGINE","START"],c=["ENGINE","STOP"],u=["TIME",null];i.prototype.init=function(t){return this.compositor=t&&t.compositor||new r,this.renderLoop=t&&t.renderLoop||new l,this.uiManager=new o(this.getChannel(),this.compositor,this.renderLoop),this},i.prototype.setChannel=function(t){return this._channel=t,this},i.prototype.getChannel=function(){return this._channel},i.prototype._update=function(){this._inUpdate=!0;var t,e=this._clock.now(),i=this._nextUpdateQueue,a=this._updateQueue;for(this._messages[1]=e;i.length;)a.unshift(i.pop());for(;a.length;)t=a.shift(),t&&t.onUpdate&&t.onUpdate(e);this._inUpdate=!1},i.prototype.requestUpdate=function(t){if(!t)throw new Error("requestUpdate must be called with a class to be updated");this._inUpdate?this.requestUpdateOnNextTick(t):this._updateQueue.push(t)},i.prototype.requestUpdateOnNextTick=function(t){this._nextUpdateQueue.push(t)},i.prototype.handleMessage=function(t){if(!t)throw new Error("onMessage must be called with an array of messages");for(var e;t.length>0;)switch(e=t.shift()){case"WITH":this.handleWith(t);break;case"FRAME":this.handleFrame(t);break;default:throw new Error("received unknown command: "+e)}return this},i.prototype.handleWith=function(t){var e=t.shift(),i=t.shift();switch(i){case"TRIGGER":var a=t.shift(),n=t.shift();this.getContext(e).getDispatch().dispatchUIEvent(e,a,n);break;default:throw new Error("received unknown command: "+i)}return this},i.prototype.handleFrame=function(t){if(!t)throw new Error("handleFrame must be called with an array of messages");if(!t.length)throw new Error("FRAME must be sent with a time");return this.step(t.shift()),this},i.prototype.step=function(t){if(null==t)throw new Error("step must be called with a time");return this._clock.step(t),this._update(),this._messages.length&&(this._channel.sendMessage(this._messages),this._messages.length=2),this},i.prototype.getContext=function(t){if(!t)throw new Error("getContext must be called with a selector");var e=t.indexOf("/");return t=-1===e?t:t.substring(0,e),this._scenes[t]},i.prototype.getClock=function(){return this._clock},i.prototype.message=function(t){return this._messages.push(t),this},i.prototype.createScene=function(t){return t=t||"body",this._scenes[t]&&this._scenes[t].dismount(),this._scenes[t]=new n(t,this),this._scenes[t]},i.prototype.startEngine=function(){return this._channel.sendMessage(p),this},i.prototype.stopEngine=function(){return this._channel.sendMessage(c),this},e.exports=new i},{"../render-loops/RequestAnimationFrameLoop":79,"../renderers/Compositor":82,"../renderers/UIManager":84,"./Channel":13,"./Clock":14,"./Scene":19}],18:[function(t,e){function i(){this._calculatedValues={transform:new Float32Array(r),size:new Float32Array(3)},this._requestingUpdate=!1,this._inUpdate=!1,this._updateQueue=[],this._nextUpdateQueue=[],this._freedComponentIndicies=[],this._components=[],this._freedChildIndicies=[],this._children=[],this._parent=null,this._globalUpdater=null,this._lastEulerX=0,this._lastEulerY=0,this._lastEulerZ=0,this._lastEuler=!1,this.value=new i.Spec
}var a=t("./Transform"),n=t("./Size"),s=new a,o=new n,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l=[1,1,1],p=[0,0,0,1];i.RELATIVE_SIZE=n.RELATIVE,i.ABSOLUTE_SIZE=n.ABSOLUTE,i.RENDER_SIZE=n.RENDER,i.DEFAULT_SIZE=n.DEFAULT,i.Spec=function(){this.location=null,this.showState={mounted:!1,shown:!1,opacity:1},this.offsets={mountPoint:new Float32Array(3),align:new Float32Array(3),origin:new Float32Array(3)},this.vectors={position:new Float32Array(3),rotation:new Float32Array(p),scale:new Float32Array(l)},this.size={sizeMode:new Float32Array([n.RELATIVE,n.RELATIVE,n.RELATIVE]),proportional:new Float32Array(l),differential:new Float32Array(3),absolute:new Float32Array(3),render:new Float32Array(3)},this.UIEvents=[]},i.prototype.getLocation=function(){return this.value.location},i.prototype.getId=i.prototype.getLocation,i.prototype.emit=function(t,e){for(var i=this;i!==i.getParent();)i=i.getParent();return i.getDispatch().dispatch(t,e),this},i.prototype.sendDrawCommand=function(t){return this._globalUpdater.message(t),this},i.prototype.getValue=function(){for(var t=this._children.length,e=this._components.length,i=0,a={location:this.value.location,spec:this.value,components:new Array(e),children:new Array(t)};t>i;i++)this._children[i]&&this._children[i].getValue&&(a.children[i]=this._children[i].getValue());for(i=0;e>i;i++)this._components[i]&&this._components[i].getValue&&(a.components[i]=this._components[i].getValue());return a},i.prototype.getComputedValue=function(){for(var t=this._children.length,e={location:this.value.location,computedValues:this._calculatedValues,children:new Array(t)},i=0;t>i;i++)e.children[i]=this._children[i].getComputedValue();return e},i.prototype.getChildren=function(){return this._children},i.prototype.getParent=function(){return this._parent},i.prototype.requestUpdate=function(t){return this._inUpdate||!this.isMounted()?this.requestUpdateOnNextTick(t):(this._updateQueue.push(t),this._requestingUpdate||this._requestUpdate(),this)},i.prototype.requestUpdateOnNextTick=function(t){return this._nextUpdateQueue.push(t),this},i.prototype.getUpdater=function(){return this._globalUpdater},i.prototype.isMounted=function(){return this.value.showState.mounted},i.prototype.isShown=function(){return this.value.showState.shown},i.prototype.getOpacity=function(){return this.value.showState.opacity},i.prototype.getMountPoint=function(){return this.value.offsets.mountPoint},i.prototype.getAlign=function(){return this.value.offsets.align},i.prototype.getOrigin=function(){return this.value.offsets.origin},i.prototype.getPosition=function(){return this.value.vectors.position},i.prototype.getRotation=function(){return this.value.vectors.rotation},i.prototype.getScale=function(){return this.value.vectors.scale},i.prototype.getSizeMode=function(){return this.value.size.sizeMode},i.prototype.getProportionalSize=function(){return this.value.size.proportional},i.prototype.getDifferentialSize=function(){return this.value.size.differential},i.prototype.getAbsoluteSize=function(){return this.value.size.absolute},i.prototype.getRenderSize=function(){return this.value.size.render},i.prototype.getSize=function(){return this._calculatedValues.size},i.prototype.getTransform=function(){return this._calculatedValues.transform},i.prototype.getUIEvents=function(){return this.value.UIEvents},i.prototype.addChild=function(t){var e=t?this._children.indexOf(t):-1;if(t=t?t:new i,-1===e&&(e=this._freedChildIndicies.length?this._freedChildIndicies.pop():this._children.length,this._children[e]=t,this.isMounted()&&t.onMount)){var a=this.getId(),n=a+"/"+e;t.onMount(this,n)}return t},i.prototype.removeChild=function(t){var e=this._children.indexOf(t),i=-1!==e;return i&&(this._freedChildIndicies.push(e),this._children[e]=null,this.isMounted()&&t.onDismount&&t.onDismount()),i},i.prototype.addComponent=function(t){var e=this._components.indexOf(t);return-1===e&&(e=this._freedComponentIndicies.length?this._freedComponentIndicies.pop():this._components.length,this._components[e]=t,this.isMounted()&&t.onMount&&t.onMount(this,e),this.isShown()&&t.onShow&&t.onShow()),e},i.prototype.getComponent=function(t){return this._components[t]},i.prototype.removeComponent=function(t){var e=this._components.indexOf(t);return-1!==e&&(this._freedComponentIndicies.push(e),this.isShown()&&t.onHide&&t.onHide(),this.isMounted()&&t.onDismount&&t.onDismount(),this._components[e]=null),t},i.prototype.addUIEvent=function(t){var e,i=this.getUIEvents(),a=this._components,n=-1!==i.indexOf(t);if(!n){i.push(t);for(var s=0,o=a.length;o>s;s++)e=a[s],e&&e.onAddUIEvent&&e.onAddUIEvent(t)}},i.prototype._requestUpdate=function(t){(t||!this._requestingUpdate&&this._globalUpdater)&&(this._globalUpdater.requestUpdate(this),this._requestingUpdate=!0)},i.prototype._vecOptionalSet=function(t,e,i){return null!=i&&t[e]!==i?(t[e]=i,this._requestingUpdate||this._requestUpdate(),!0):!1},i.prototype.show=function(){var t,e=0,i=this._components,a=i.length;for(this.value.showState.shown=!0;a>e;e++)t=i[e],t&&t.onShow&&t.onShow();for(e=0,i=this._children,a=i.length;a>e;e++)t=i[e],t&&t.onParentShow&&t.onParentShow();return this},i.prototype.hide=function(){var t,e=0,i=this._components,a=i.length;for(this.value.showState.shown=!1;a>e;e++)t=i[e],t&&t.onHide&&t.onHide();for(e=0,i=this._children,a=i.length;a>e;e++)t=i[e],t&&t.onParentHide&&t.onParentHide();return this},i.prototype.setAlign=function(t,e,i){var a=this.value.offsets.align,n=!1;if(n=this._vecOptionalSet(a,0,t)||n,n=this._vecOptionalSet(a,1,e)||n,null!=i&&(n=this._vecOptionalSet(a,2,i-.5)||n),n){var s,o=0,r=this._components,l=r.length;for(t=a[0],e=a[1],i=a[2];l>o;o++)s=r[o],s&&s.onAlignChange&&s.onAlignChange(t,e,i)}return this},i.prototype.setMountPoint=function(t,e,i){var a=this.value.offsets.mountPoint,n=!1;if(n=this._vecOptionalSet(a,0,t)||n,n=this._vecOptionalSet(a,1,e)||n,null!=i&&(n=this._vecOptionalSet(a,2,i-.5)||n),n){var s,o=0,r=this._components,l=r.length;for(t=a[0],e=a[1],i=a[2];l>o;o++)s=r[o],s&&s.onMountPointChange&&s.onMountPointChange(t,e,i)}return this},i.prototype.setOrigin=function(t,e,i){var a=this.value.offsets.origin,n=!1;if(n=this._vecOptionalSet(a,0,t)||n,n=this._vecOptionalSet(a,1,e)||n,null!=i&&(n=this._vecOptionalSet(a,2,i-.5)||n),n){var s,o=0,r=this._components,l=r.length;for(t=a[0],e=a[1],i=a[2];l>o;o++)s=r[o],s&&s.onOriginChange&&s.onOriginChange(t,e,i)}return this},i.prototype.setPosition=function(t,e,i){var a=this.value.vectors.position,n=!1;if(n=this._vecOptionalSet(a,0,t)||n,n=this._vecOptionalSet(a,1,e)||n,n=this._vecOptionalSet(a,2,i)||n){var s,o=0,r=this._components,l=r.length;for(t=a[0],e=a[1],i=a[2];l>o;o++)s=r[o],s&&s.onPositionChange&&s.onPositionChange(t,e,i)}return this},i.prototype.setRotation=function(t,e,i,a){var n,s,o,r,l=this.value.vectors.rotation,p=!1;if(null!=a)n=t,s=e,o=i,r=a,this._lastEulerX=null,this._lastEulerY=null,this._lastEulerZ=null,this._lastEuler=!1;else{if(null==t||null==e||null==i)if(this._lastEuler)t=null==t?this._lastEulerX:t,e=null==e?this._lastEulerY:e,i=null==i?this._lastEulerZ:i;else{var c=-2*(l[1]*l[2]-l[3]*l[0]);Math.abs(c)>.99999?(e=null==e?.5*Math.PI*c:e,t=null==t?Math.atan2(-l[0]*l[2]+l[3]*l[1],.5-l[1]*l[1]-l[2]*l[2]):t,i=null==i?0:i):(e=null==e?Math.asin(c):e,t=null==t?Math.atan2(l[0]*l[2]+l[3]*l[1],.5-l[0]*l[0]-l[1]*l[1]):t,i=null==i?Math.atan2(l[0]*l[1]+l[3]*l[2],.5-l[0]*l[0]-l[2]*l[2]):i)}var u=.5*t,h=.5*e,d=.5*i,m=Math.sin(u),g=Math.sin(h),f=Math.sin(d),y=Math.cos(u),_=Math.cos(h),v=Math.cos(d),S=g*f,x=_*f,A=g*v,b=_*v;n=m*b+y*S,s=y*A-m*x,o=y*x+m*A,r=y*b-m*S,this._lastEuler=!0,this._lastEulerX=t,this._lastEulerY=e,this._lastEulerZ=i}if(p=this._vecOptionalSet(l,0,n)||p,p=this._vecOptionalSet(l,1,s)||p,p=this._vecOptionalSet(l,2,o)||p,p=this._vecOptionalSet(l,3,r)||p){var T,z=0,w=this._components,R=w.length;for(t=l[0],e=l[1],i=l[2],a=l[3];R>z;z++)T=w[z],T&&T.onRotationChange&&T.onRotationChange(t,e,i,a)}return this},i.prototype.setScale=function(t,e,i){var a=this.value.vectors.scale,n=!1;if(n=this._vecOptionalSet(a,0,t)||n,n=this._vecOptionalSet(a,1,e)||n,n=this._vecOptionalSet(a,2,i)||n){var s,o=0,r=this._components,l=r.length;for(t=a[0],e=a[1],i=a[2];l>o;o++)s=r[o],s&&s.onScaleChange&&s.onScaleChange(t,e,i)}return this},i.prototype.setOpacity=function(t){if(t!==this.value.showState.opacity){this.value.showState.opacity=t,this._requestingUpdate||this._requestUpdate();for(var e,i=0,a=this._components,n=a.length;n>i;i++)e=a[i],e&&e.onOpacityChange&&e.onOpacityChange(t)}return this},i.prototype.setSizeMode=function(t,e,i){var a=this.value.size.sizeMode,n=!1;if(null!=t&&(n=this._resolveSizeMode(a,0,t)||n),null!=e&&(n=this._resolveSizeMode(a,1,e)||n),null!=i&&(n=this._resolveSizeMode(a,2,i)||n),n){var s,o=0,r=this._components,l=r.length;for(t=a[0],e=a[1],i=a[2];l>o;o++)s=r[o],s&&s.onSizeModeChange&&s.onSizeModeChange(t,e,i)}return this},i.prototype._resolveSizeMode=function(t,e,i){if(i.constructor!==String)return this._vecOptionalSet(t,e,i);switch(i.toLowerCase()){case"relative":case"default":return this._vecOptionalSet(t,e,0);case"absolute":return this._vecOptionalSet(t,e,1);case"render":return this._vecOptionalSet(t,e,2);default:throw new Error("unknown size mode: "+i)}},i.prototype.setProportionalSize=function(t,e,i){var a=this.value.size.proportional,n=!1;if(n=this._vecOptionalSet(a,0,t)||n,n=this._vecOptionalSet(a,1,e)||n,n=this._vecOptionalSet(a,2,i)||n){var s,o=0,r=this._components,l=r.length;for(t=a[0],e=a[1],i=a[2];l>o;o++)s=r[o],s&&s.onProportionalSizeChange&&s.onProportionalSizeChange(t,e,i)}return this},i.prototype.setDifferentialSize=function(t,e,i){var a=this.value.size.differential,n=!1;if(n=this._vecOptionalSet(a,0,t)||n,n=this._vecOptionalSet(a,1,e)||n,n=this._vecOptionalSet(a,2,i)||n){var s,o=0,r=this._components,l=r.length;for(t=a[0],e=a[1],i=a[2];l>o;o++)s=r[o],s&&s.onDifferentialSizeChange&&s.onDifferentialSizeChange(t,e,i)}return this},i.prototype.setAbsoluteSize=function(t,e,i){var a=this.value.size.absolute,n=!1;if(n=this._vecOptionalSet(a,0,t)||n,n=this._vecOptionalSet(a,1,e)||n,n=this._vecOptionalSet(a,2,i)||n){var s,o=0,r=this._components,l=r.length;for(t=a[0],e=a[1],i=a[2];l>o;o++)s=r[o],s&&s.onAbsoluteSizeChange&&s.onAbsoluteSizeChange(t,e,i)}return this},i.prototype._transformChanged=function(t){for(var e,i=0,a=this._components,n=a.length;n>i;i++)e=a[i],e&&e.onTransformChange&&e.onTransformChange(t);for(i=0,a=this._children,n=a.length;n>i;i++)e=a[i],e&&e.onParentTransformChange&&e.onParentTransformChange(t)},i.prototype._sizeChanged=function(t){for(var e,i=0,a=this._components,n=a.length;n>i;i++)e=a[i],e&&e.onSizeChange&&e.onSizeChange(t);for(i=0,a=this._children,n=a.length;n>i;i++)e=a[i],e&&e.onParentSizeChange&&e.onParentSizeChange(t)},i.prototype.getFrame=function(){return this._globalUpdater.getFrame()},i.prototype.getComponents=function(){return this._components},i.prototype.update=function(t){this._inUpdate=!0;for(var e,i=this._nextUpdateQueue,a=this._updateQueue;i.length;)a.unshift(i.pop());for(;a.length;)e=this._components[a.shift()],e&&e.onUpdate&&e.onUpdate(t);var n=this.getSize(),r=this.getTransform(),l=this.getParent(),p=l.getSize(),c=l.getTransform(),u=o.fromSpecWithParent(p,this,n),h=s.fromSpecWithParent(c,this.value,n,p,r);return h&&this._transformChanged(r),u&&this._sizeChanged(n),this._inUpdate=!1,this._requestingUpdate=!1,this.isMounted()?this._nextUpdateQueue.length&&(this._globalUpdater.requestUpdateOnNextTick(this),this._requestingUpdate=!0):(this._parent=null,this.value.location=null,this._globalUpdater=null),this},i.prototype.mount=function(t,e){if(this.isMounted())return this;var i,a=0,n=this._components,s=n.length;for(this._parent=t,this._globalUpdater=t.getUpdater(),this.value.location=e,this.value.showState.mounted=!0;s>a;a++)i=n[a],i&&i.onMount&&i.onMount(this,a);for(a=0,n=this._children,s=n.length;s>a;a++)i=n[a],i&&i.onParentMount&&i.onParentMount(this,e,a);return this._requestingUpdate||this._requestUpdate(!0),this},i.prototype.dismount=function(){if(!this.isMounted())return this;var t,e=0,i=this._components,a=i.length;for(this.value.showState.mounted=!1,this._parent.removeChild(this);a>e;e++)t=i[e],t&&t.onDismount&&t.onDismount();for(e=0,i=this._children,a=i.length;a>e;e++)t=i[e],t&&t.onParentDismount&&t.onParentDismount();return this._requestingUpdate||this._requestUpdate(),this},i.prototype.onParentMount=function(t,e,i){return this.mount(t,e+"/"+i)},i.prototype.onParentDismount=function(){return this.dismount()},i.prototype.receive=function(t,e){for(var i,a=0,n=this._components,s=n.length;s>a;a++)i=n[a],i&&i.onReceive&&i.onReceive(t,e);return this},i.prototype._requestUpdateWithoutArgs=function(){this._requestingUpdate||this._requestUpdate()},i.prototype.onUpdate=i.prototype.update,i.prototype.onParentShow=i.prototype.show,i.prototype.onParentHide=i.prototype.hide,i.prototype.onParentTransformChange=i.prototype._requestUpdateWithoutArgs,i.prototype.onParentSizeChange=i.prototype._requestUpdateWithoutArgs,i.prototype.onShow=i.prototype.show,i.prototype.onHide=i.prototype.hide,i.prototype.onMount=i.prototype.mount,i.prototype.onDismount=i.prototype.dismount,i.prototype.onReceive=i.prototype.receive,e.exports=i},{"./Size":20,"./Transform":21}],19:[function(t,e){function i(t,e){if(!t)throw new Error("Scene needs to be created with a DOM selector");if(!e)throw new Error("Scene needs to be created with a class like Famous");n.call(this),this._updater=e,this._dispatch=new a(this),this._selector=t,this.onMount(this,t),this._updater.message("NEED_SIZE_FOR").message(t),this.show()}var a=t("./Dispatch"),n=t("./Node"),s=t("./Size");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.getUpdater=function(){return this._updater},i.prototype.getSelector=function(){return this._selector},i.prototype.getDispatch=function(){return this._dispatch},i.prototype.onReceive=function(t,e){if("CONTEXT_RESIZE"===t){if(e.length<2)throw new Error("CONTEXT_RESIZE's payload needs to be at least a pair of pixel sizes");this.setSizeMode(s.ABSOLUTE,s.ABSOLUTE,s.ABSOLUTE),this.setAbsoluteSize(e[0],e[1],e[2]?e[2]:0)}},e.exports=i},{"./Dispatch":15,"./Node":18,"./Size":20}],20:[function(t,e){function i(){this._size=new Float32Array(3)}i.RELATIVE=0,i.ABSOLUTE=1,i.RENDER=2,i.DEFAULT=i.RELATIVE,i.prototype.fromSpecWithParent=function(t,e,a){for(var n,s,o=e.getValue().spec,r=e.getComponents(),l=o.size.sizeMode,p=!1,c=r.length,u=0;3>u;u++){switch(l[u]){case i.RELATIVE:n=a[u],a[u]=t[u]*o.size.proportional[u]+o.size.differential[u];break;case i.ABSOLUTE:n=a[u],a[u]=o.size.absolute[u];break;case i.RENDER:var h;for(s=0;c>s;s++)r[s].getRenderSize&&(h=r[s].getRenderSize()[u],n=a[u],a[u]=a[u]<h||0===a[u]?h:a[u])}p=p||n!==a[u]}return p},e.exports=i},{}],21:[function(t,e){function i(){this._matrix=new Float32Array(16)}i.prototype.get=function(){return this._matrix},i.prototype.fromSpecWithParent=function(t,e,i,a,n){n=n?n:this._matrix;var s=n[0],o=n[1],r=n[2],l=n[4],p=n[5],c=n[6],u=n[8],h=n[9],d=n[10],m=n[12],g=n[13],f=n[14],y=t[0],_=t[1],v=t[2],S=t[4],x=t[5],A=t[6],b=t[8],T=t[9],z=t[10],w=t[12],R=t[13],O=t[14],C=e.vectors.position[0],E=e.vectors.position[1],X=e.vectors.position[2],Y=e.vectors.rotation[0],P=e.vectors.rotation[1],M=e.vectors.rotation[2],I=e.vectors.rotation[3],L=e.vectors.scale[0],D=e.vectors.scale[1],k=e.vectors.scale[2],F=e.offsets.align[0]*a[0],U=e.offsets.align[1]*a[1],j=e.offsets.align[2]*a[2],N=e.offsets.mountPoint[0]*i[0],q=e.offsets.mountPoint[1]*i[1],V=e.offsets.mountPoint[2]*i[2],B=e.offsets.origin[0]*i[0],G=e.offsets.origin[1]*i[1],H=e.offsets.origin[2]*i[2],Z=I*Y,W=I*P,Q=I*M,K=Y*Y,J=P*P,$=M*M,te=Y*P,ee=Y*M,ie=P*M,ae=(1-2*(J+$))*L,ne=2*(te+Q)*L,se=2*(ee-W)*L,oe=2*(te-Q)*D,re=(1-2*(K+$))*D,le=2*(ie+Z)*D,pe=2*(ee+W)*k,ce=2*(ie-Z)*k,ue=(1-2*(K+J))*k,he=F+C-N+B-(ae*B+oe*G+pe*H),de=U+E-q+G-(ne*B+re*G+ce*H),me=j+X-V+H-(se*B+le*G+ue*H);return n[0]=y*ae+S*ne+b*se,n[1]=_*ae+x*ne+T*se,n[2]=v*ae+A*ne+z*se,n[3]=0,n[4]=y*oe+S*re+b*le,n[5]=_*oe+x*re+T*le,n[6]=v*oe+A*re+z*le,n[7]=0,n[8]=y*pe+S*ce+b*ue,n[9]=_*pe+x*ce+T*ue,n[10]=v*pe+A*ce+z*ue,n[11]=0,n[12]=y*he+S*de+b*me+w,n[13]=_*he+x*de+T*me+R,n[14]=v*he+A*de+z*me+O,n[15]=1,s!==n[0]||o!==n[1]||r!==n[2]||l!==n[4]||p!==n[5]||c!==n[6]||u!==n[8]||h!==n[9]||d!==n[10]||m!==n[12]||g!==n[13]||f!==n[14]},e.exports=i},{}],22:[function(t,e){e.exports={Clock:t("./Clock"),Event:t("./Event"),Scene:t("./Scene"),FamousEngine:t("./FamousEngine"),Dispatch:t("./Dispatch"),Node:t("./Node"),Size:t("./Size"),Transform:t("./Transform")}},{"./Clock":14,"./Dispatch":15,"./Event":16,"./FamousEngine":17,"./Node":18,"./Scene":19,"./Size":20,"./Transform":21}],23:[function(t,e){function i(t,e){if(!t)throw new Error("DOMElement must be instantiated on a node");if(this._node=t,this._parent=null,this._children=[],this._requestingUpdate=!1,this._renderSized=!1,this._requestRenderSize=!1,this._changeQueue=[],this._UIEvents=t.getUIEvents().slice(0),this._classes=["famous-dom-element"],this._requestingEventListeners=[],this._styles={},this.setProperty("display",t.isShown()?"none":"block"),this.onOpacityChange(t.getOpacity()),this._attributes={},this._content="",this._tagName=e&&e.tagName?e.tagName:"div",this._id=t?t.addComponent(this):null,this._renderSize=[0,0,0],this._callbacks=new a,e){var i,n;if(e.classes)for(i=0;i<e.classes.length;i++)this.addClass(e.classes[i]);if(e.attributes)for(n in e.attributes)this.setAttribute(n,e.attributes[n]);if(e.properties)for(n in e.properties)this.setProperty(n,e.properties[n]);e.id&&this.setId(e.id),e.content&&this.setContent(e.content),e.cutout===!1&&this.setCutoutState(e.cutout)}}var a=t("../utilities/CallbackStore"),n=2;i.prototype.getValue=function(){return{classes:this._classes,styles:this._styles,attributes:this._attributes,content:this._content,id:this._attributes.id,tagName:this._tagName}},i.prototype.onUpdate=function(){var t=this._node,e=this._changeQueue,i=e.length;if(i&&t){for(t.sendDrawCommand("WITH"),t.sendDrawCommand(t.getLocation());i--;)t.sendDrawCommand(e.shift());this._requestRenderSize&&(t.sendDrawCommand("DOM_RENDER_SIZE"),t.sendDrawCommand(t.getLocation()),this._requestRenderSize=!1)}this._requestingUpdate=!1},i.prototype._setParent=function(t){if(!this._node)throw new Error("_setParent called on an Element that isn't in the scene graph");var e=this._node.getLocation();if(e===t||-1===e.indexOf(t))throw new Error("The given path isn't an ancestor");this._parent=t},i.prototype._addChild=function(t){if(!this._node)throw new Error("_addChild called on an Element that isn't in the scene graph");var e=this._node.getLocation();if(t===e||-1===t.indexOf(e))throw new Error("The given path isn't a descendent");if(-1!==this._children.indexOf(t))throw new Error("The given path is already a child of this element");this._children.push(t)},i.prototype._getParent=function(){return this._parent},i.prototype._getChildren=function(){return this._children},i.prototype.onMount=function(t,e){this._node=t,this._id=e,this._UIEvents=t.getUIEvents().slice(0),this.draw(),this.setAttribute("data-fa-path",t.getLocation())},i.prototype.onDismount=function(){this.setProperty("display","none"),this.setAttribute("data-fa-path",""),this._initialized=!1},i.prototype.onShow=function(){this.setProperty("display","block")},i.prototype.onHide=function(){this.setProperty("display","none")},i.prototype.setCutoutState=function(t){this._changeQueue.push("GL_CUTOUT_STATE",t),this._initialized&&this._requestUpdate()},i.prototype.onTransformChange=function(t){this._changeQueue.push("CHANGE_TRANSFORM");for(var e=0,i=t.length;i>e;e++)this._changeQueue.push(t[e]);this.onUpdate()},i.prototype.onSizeChange=function(t){var e=this._node.getSizeMode(),i=e[0]!==n,a=e[1]!==n;return this._initialized&&this._changeQueue.push("CHANGE_SIZE",i?t[0]:i,a?t[1]:a),this._requestingUpdate||this._requestUpdate(),this},i.prototype.onOpacityChange=function(t){return this.setProperty("opacity",t)},i.prototype.onAddUIEvent=function(t){return-1===this._UIEvents.indexOf(t)?(this._subscribe(t),this._UIEvents.push(t)):this._inDraw&&this._subscribe(t),this},i.prototype._subscribe=function(t){this._initialized&&this._changeQueue.push("SUBSCRIBE",t,!0),this._requestingUpdate||this._requestUpdate(),this._requestingUpdate||this._requestUpdate()},i.prototype.onSizeModeChange=function(t,e,i){(t===n||e===n||i===n)&&(this._renderSized=!0,this._requestRenderSize=!0),this.onSizeChange(this._node.getSize())},i.prototype.getRenderSize=function(){return this._renderSize},i.prototype._requestUpdate=function(){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0)},i.prototype.init=function(){this._changeQueue.push("INIT_DOM",this._tagName),this._initialized=!0,this.onTransformChange(this._node.getTransform()),this.onSizeChange(this._node.getSize()),this._requestingUpdate||this._requestUpdate()},i.prototype.setId=function(t){return this.setAttribute("id",t),this},i.prototype.addClass=function(t){return this._classes.indexOf(t)<0?(this._initialized&&this._changeQueue.push("ADD_CLASS",t),this._classes.push(t),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0),this):(this._inDraw&&(this._initialized&&this._changeQueue.push("ADD_CLASS",t),this._requestingUpdate||this._requestUpdate()),this)},i.prototype.removeClass=function(t){var e=this._classes.indexOf(t);return 0>e?this:(this._changeQueue.push("REMOVE_CLASS",t),this._classes.splice(e,1),this._requestingUpdate||this._requestUpdate(),this)},i.prototype.hasClass=function(t){return-1!==this._classes.indexOf(t)},i.prototype.setAttribute=function(t,e){return(this._attributes[t]!==e||this._inDraw)&&(this._attributes[t]=e,this._initialized&&this._changeQueue.push("CHANGE_ATTRIBUTE",t,e),this._requestUpdate||this._requestUpdate()),this},i.prototype.setProperty=function(t,e){return(this._styles[t]!==e||this._inDraw)&&(this._styles[t]=e,this._initialized&&this._changeQueue.push("CHANGE_PROPERTY",t,e),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0)),this},i.prototype.setContent=function(t){return(this._content!==t||this._inDraw)&&(this._content=t,this._initialized&&this._changeQueue.push("CHANGE_CONTENT",t),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0)),this},i.prototype.on=function(t,e){return this._callbacks.on(t,e)},i.prototype.onReceive=function(t,e){"resize"===t&&(this._renderSize[0]=e.val[0],this._renderSize[1]=e.val[1],this._requestingUpdate||this._requestUpdate()),this._callbacks.trigger(t,e)},i.prototype.draw=function(){var t,e,i;for(this._inDraw=!0,this.init(),e=0,i=this._classes.length;i>e;e++)this.addClass(this._classes[e]);this._content&&this.setContent(this._content);for(t in this._styles)this._styles[t]&&this.setProperty(t,this._styles[t]);for(t in this._attributes)this._attributes[t]&&this.setAttribute(t,this._attributes[t]);for(e=0,i=this._UIEvents.length;i>e;e++)this.onAddUIEvent(this._UIEvents[e]);this._inDraw=!1},e.exports=i},{"../utilities/CallbackStore":90}],24:[function(t,e){e.exports={DOMElement:t("./DOMElement")}},{"./DOMElement":23}],25:[function(t,e){function i(t,e,i){t.classList.add("famous-dom-renderer"),l=l||o("transform"),this._compositor=i,this._target=null,this._parent=null,this._path=null,this._children=[],this._root=new n(t,e),this._boundTriggerEvent=this._triggerEvent.bind(this),this._selector=e,this._elements={},this._elements[e]=this._root,this.perspectiveTransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._VPtransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._size=[null,null]}function a(t){for(var e=[],i=t.target;i!==document.body;)e.push(i),i=i.parentNode;return e}var n=t("./ElementCache"),s=t("./Math"),o=t("../utilities/vendorPrefix"),r=t("./events/EventMap"),l=null;i.prototype.subscribe=function(t,e){if(this._assertTargetLoaded(),this._target.preventDefault[t]=e,this._target.subscribe[t]=!0,!this._target.listeners[t]&&!this._root.listeners[t]){var i=r[t][1]?this._root:this._target;i.listeners[t]=this._boundTriggerEvent,i.element.addEventListener(t,this._boundTriggerEvent)}},i.prototype._triggerEvent=function(t){for(var e=t.path?t.path:a(t),i=0;i<e.length;i++)if(e[i].dataset){var n=e[i].dataset.faPath;if(n&&this._elements[n].subscribe[t.type]){t.stopPropagation(),this._elements[n].preventDefault[t.type]&&t.preventDefault();var s=r[t.type][0];this._compositor.sendEvent(n,t.type,new s(t));break}}},i.prototype.getSizeOf=function(t){var e=this._elements[t];if(!e)return null;var i={val:e.size};return this._compositor.sendEvent(t,"resize",i),i},i.prototype.getSize=function(){return this._size[0]=this._root.element.offsetWidth,this._size[1]=this._root.element.offsetHeight,this._size},i.prototype._getSize=i.prototype.getSize,i.prototype.draw=function(t){t.perspectiveDirty&&(this.perspectiveDirty=!0,this.perspectiveTransform[0]=t.perspectiveTransform[0],this.perspectiveTransform[1]=t.perspectiveTransform[1],this.perspectiveTransform[2]=t.perspectiveTransform[2],this.perspectiveTransform[3]=t.perspectiveTransform[3],this.perspectiveTransform[4]=t.perspectiveTransform[4],this.perspectiveTransform[5]=t.perspectiveTransform[5],this.perspectiveTransform[6]=t.perspectiveTransform[6],this.perspectiveTransform[7]=t.perspectiveTransform[7],this.perspectiveTransform[8]=t.perspectiveTransform[8],this.perspectiveTransform[9]=t.perspectiveTransform[9],this.perspectiveTransform[10]=t.perspectiveTransform[10],this.perspectiveTransform[11]=t.perspectiveTransform[11],this.perspectiveTransform[12]=t.perspectiveTransform[12],this.perspectiveTransform[13]=t.perspectiveTransform[13],this.perspectiveTransform[14]=t.perspectiveTransform[14],this.perspectiveTransform[15]=t.perspectiveTransform[15]),(t.viewDirty||t.perspectiveDirty)&&(s.multiply(this._VPtransform,this.perspectiveTransform,t.viewTransform),this._root.element.style[l]=this._stringifyMatrix(this._VPtransform))},i.prototype._assertPathLoaded=function(){if(!this._path)throw new Error("path not loaded")},i.prototype._assertParentLoaded=function(){if(!this._parent)throw new Error("parent not loaded")},i.prototype._assertChildrenLoaded=function(){if(!this._children)throw new Error("children not loaded")},i.prototype._assertTargetLoaded=function(){if(!this._target)throw new Error("No target loaded")},i.prototype.findParent=function(){this._assertPathLoaded();for(var t,e=this._path;!t&&e.length;)e=e.substring(0,e.lastIndexOf("/")),t=this._elements[e];return this._parent=t,t},i.prototype.findChildren=function(t){this._assertPathLoaded();var e,i=this._path+"/",a=Object.keys(this._elements),n=0;for(t=t?t:this._children,this._children.length=0;n<a.length;)-1===a[n].indexOf(i)||a[n]===i?a.splice(n,1):n++;var s,o=0;for(n=0;n<a.length;n++)for(s=a[n],o=0;o<a.length;o++)n!==o&&-1!==a[o].indexOf(s)&&(a.splice(o,1),n--);for(n=0,e=a.length;e>n;n++)t[n]=this._elements[a[n]];return t},i.prototype.findTarget=function(){return this._target=this._elements[this._path],this._target},i.prototype.loadPath=function(t){return this._path=t,this._path},i.prototype.insertEl=function(t){if(!this._target||this._target.element.tagName.toLowerCase()===t.toLowerCase()){this.findParent(),this.findChildren(),this._assertParentLoaded(),this._assertChildrenLoaded(),this._target&&this._parent.element.removeChild(this._target.element),this._target=new n(document.createElement(t),this._path),this._parent.element.appendChild(this._target.element),this._elements[this._path]=this._target;for(var e=0,i=this._children.length;i>e;e++)this._target.element.appendChild(this._children[e].element)}},i.prototype.setProperty=function(t,e){this._assertTargetLoaded(),this._target.element.style[t]=e},i.prototype.setSize=function(t,e){this._assertTargetLoaded(),this.setWidth(t),this.setHeight(e)},i.prototype.setWidth=function(t){this._assertTargetLoaded();var e=this._target.content;t===!1?(this._target.explicitWidth=!0,e&&(e.style.width=""),t=e?e.offsetWidth:0,this._target.element.style.width=t+"px"):(this._target.explicitWidth=!1,e&&(e.style.width=t+"px"),this._target.element.style.width=t+"px"),this._target.size[0]=t},i.prototype.setHeight=function(t){this._assertTargetLoaded();var e=this._target.content;t===!1?(this._target.explicitHeight=!0,e&&(e.style.height=""),t=e?e.offsetHeight:0,this._target.element.style.height=t+"px"):(this._target.explicitHeight=!1,e&&(e.style.height=t+"px"),this._target.element.style.height=t+"px"),this._target.size[1]=t},i.prototype.setAttribute=function(t,e){this._assertTargetLoaded(),this._target.element.setAttribute(t,e)},i.prototype.setContent=function(t){this._assertTargetLoaded(),this.findChildren(),this._target.content||(this._target.content=document.createElement("div"),this._target.content.classList.add("famous-dom-element-content"),this._target.element.insertBefore(this._target.content,this._target.element.firstChild)),this._target.content.innerHTML=t,this.setSize(this._target.explicitWidth?!1:this._target.size[0],this._target.explicitHeight?!1:this._target.size[1])},i.prototype.setMatrix=function(t){this._assertTargetLoaded(),this.findParent();var e,i,a=this._target.worldTransform,n=!1;if(t)for(e=0,i=16;i>e;e++)n=n?n:a[e]===t[e],a[e]=t[e];else n=!0;if(n){s.invert(this._target.invertedParent,this._parent.worldTransform),s.multiply(this._target.finalTransform,this._target.invertedParent,a);var o=this.findChildren([]),r=this._path,p=this._target;for(e=0,i=o.length;i>e;e++)this._target=o[e],this._path=this._target.path,this.setMatrix();this._path=r,this._target=p}this._target.element.style[l]=this._stringifyMatrix(this._target.finalTransform)},i.prototype.addClass=function(t){this._assertTargetLoaded(),this._target.element.classList.add(t)},i.prototype.removeClass=function(t){this._assertTargetLoaded(),this._target.element.classList.remove(t)},i.prototype._stringifyMatrix=function(t){var e="matrix3d(";return e+=t[0]<1e-6&&t[0]>-1e-6?"0,":t[0]+",",e+=t[1]<1e-6&&t[1]>-1e-6?"0,":t[1]+",",e+=t[2]<1e-6&&t[2]>-1e-6?"0,":t[2]+",",e+=t[3]<1e-6&&t[3]>-1e-6?"0,":t[3]+",",e+=t[4]<1e-6&&t[4]>-1e-6?"0,":t[4]+",",e+=t[5]<1e-6&&t[5]>-1e-6?"0,":t[5]+",",e+=t[6]<1e-6&&t[6]>-1e-6?"0,":t[6]+",",e+=t[7]<1e-6&&t[7]>-1e-6?"0,":t[7]+",",e+=t[8]<1e-6&&t[8]>-1e-6?"0,":t[8]+",",e+=t[9]<1e-6&&t[9]>-1e-6?"0,":t[9]+",",e+=t[10]<1e-6&&t[10]>-1e-6?"0,":t[10]+",",e+=t[11]<1e-6&&t[11]>-1e-6?"0,":t[11]+",",e+=t[12]<1e-6&&t[12]>-1e-6?"0,":t[12]+",",e+=t[13]<1e-6&&t[13]>-1e-6?"0,":t[13]+",",e+=t[14]<1e-6&&t[14]>-1e-6?"0,":t[14]+",",e+=t[15]+")"},e.exports=i},{"../utilities/vendorPrefix":100,"./ElementCache":26,"./Math":27,"./events/EventMap":30}],26:[function(t,e){function i(t,e){this.element=t,this.path=e,this.content=null,this.size=new Int16Array(3),this.explicitHeight=!1,this.explicitWidth=!1,this.worldTransform=new Float32Array(a),this.invertedParent=new Float32Array(a),this.finalTransform=new Float32Array(a),this.postRenderSize=new Float32Array(2),this.listeners={},this.preventDefault={},this.subscribe={}}var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];e.exports=i},{}],27:[function(t,e){function i(t,e){var i=e[0],a=e[1],n=e[2],s=e[3],o=e[4],r=e[5],l=e[6],p=e[7],c=e[8],u=e[9],h=e[10],d=e[11],m=e[12],g=e[13],f=e[14],y=e[15],_=i*r-a*o,v=i*l-n*o,S=i*p-s*o,x=a*l-n*r,A=a*p-s*r,b=n*p-s*l,T=c*g-u*m,z=c*f-h*m,w=c*y-d*m,R=u*f-h*g,O=u*y-d*g,C=h*y-d*f,E=_*C-v*O+S*R+x*w-A*z+b*T;return E?(E=1/E,t[0]=(r*C-l*O+p*R)*E,t[1]=(n*O-a*C-s*R)*E,t[2]=(g*b-f*A+y*x)*E,t[3]=(h*A-u*b-d*x)*E,t[4]=(l*w-o*C-p*z)*E,t[5]=(i*C-n*w+s*z)*E,t[6]=(f*S-m*b-y*v)*E,t[7]=(c*b-h*S+d*v)*E,t[8]=(o*O-r*w+p*T)*E,t[9]=(a*w-i*O-s*T)*E,t[10]=(m*A-g*S+y*_)*E,t[11]=(u*S-c*A-d*_)*E,t[12]=(r*z-o*R-l*T)*E,t[13]=(i*R-a*z+n*T)*E,t[14]=(g*v-m*x-f*_)*E,t[15]=(c*x-u*v+h*_)*E,t):null}function a(t,e,i){var a,n,s,o,r=e[0],l=e[1],p=e[2],c=e[3],u=e[4],h=e[5],d=e[6],m=e[7],g=e[8],f=e[9],y=e[10],_=e[11],v=e[12],S=e[13],x=e[14],A=e[15],b=i[0],T=i[1],z=i[2],w=i[3],R=i[4],O=i[5],C=i[6],E=i[7],X=i[8],Y=i[9],P=i[10],M=i[11],I=i[12],L=i[13],D=i[14],k=i[15],F=!1;return a=b*r+T*u+z*g+w*v,n=b*l+T*h+z*f+w*S,s=b*p+T*d+z*y+w*x,o=b*c+T*m+z*_+w*A,F=F?F:a===t[0]||n===t[1]||s===t[2]||o===t[3],t[0]=a,t[1]=n,t[2]=s,t[3]=o,b=R,T=O,z=C,w=E,a=b*r+T*u+z*g+w*v,n=b*l+T*h+z*f+w*S,s=b*p+T*d+z*y+w*x,o=b*c+T*m+z*_+w*A,F=F?F:a===t[4]||n===t[5]||s===t[6]||o===t[7],t[4]=a,t[5]=n,t[6]=s,t[7]=o,b=X,T=Y,z=P,w=M,a=b*r+T*u+z*g+w*v,n=b*l+T*h+z*f+w*S,s=b*p+T*d+z*y+w*x,o=b*c+T*m+z*_+w*A,F=F?F:a===t[8]||n===t[9]||s===t[10]||o===t[11],t[8]=a,t[9]=n,t[10]=s,t[11]=o,b=I,T=L,z=D,w=k,a=b*r+T*u+z*g+w*v,n=b*l+T*h+z*f+w*S,s=b*p+T*d+z*y+w*x,o=b*c+T*m+z*_+w*A,F=F?F:a===t[12]||n===t[13]||s===t[14]||o===t[15],t[12]=a,t[13]=n,t[14]=s,t[15]=o,t
}e.exports={multiply:a,invert:i}},{}],28:[function(t,e){function i(t){a.call(this,t),this.data=t.data}var a=t("./UIEvent");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"CompositionEvent"},e.exports=i},{"./UIEvent":36}],29:[function(t,e){function i(t){this.type=t.type,this.defaultPrevented=t.defaultPrevented,this.timeStamp=t.timeStamp;var e=t.target.constructor;(e===HTMLInputElement||e===HTMLTextAreaElement||e===HTMLSelectElement)&&(this.value=t.target.value)}i.prototype.toString=function(){return"Event"},e.exports=i},{}],30:[function(t,e){var i=t("./CompositionEvent"),a=t("./Event"),n=t("./FocusEvent"),s=t("./InputEvent"),o=t("./KeyboardEvent"),r=t("./MouseEvent"),l=t("./TouchEvent"),p=t("./UIEvent"),c=t("./WheelEvent"),u={change:[a,!0],submit:[a,!0],abort:[a,!1],beforeinput:[s,!0],blur:[n,!1],click:[r,!0],compositionend:[i,!0],compositionstart:[i,!0],compositionupdate:[i,!0],dblclick:[r,!0],focus:[n,!1],focusin:[n,!0],focusout:[n,!0],input:[s,!0],keydown:[o,!0],keyup:[o,!0],load:[a,!1],mousedown:[r,!0],mouseenter:[r,!1],mouseleave:[r,!1],mousemove:[r,!1],mouseout:[r,!0],mouseover:[r,!0],mouseup:[r,!0],resize:[p,!1],scroll:[p,!1],select:[a,!0],unload:[a,!1],wheel:[c,!0],touchcancel:[l,!0],touchend:[l,!0],touchmove:[l,!0],touchstart:[l,!0]};e.exports=u},{"./CompositionEvent":28,"./Event":29,"./FocusEvent":31,"./InputEvent":32,"./KeyboardEvent":33,"./MouseEvent":34,"./TouchEvent":35,"./UIEvent":36,"./WheelEvent":37}],31:[function(t,e){function i(t){a.call(this,t)}var a=t("./UIEvent");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"FocusEvent"},e.exports=i},{"./UIEvent":36}],32:[function(t,e){function i(t){a.call(this,t),this.inputType=t.inputType,this.data=t.data,this.isComposing=t.isComposing,this.targetRange=t.targetRange}var a=t("./UIEvent");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"InputEvent"},e.exports=i},{"./UIEvent":36}],33:[function(t,e){function i(t){a.call(this,t),this.DOM_KEY_LOCATION_STANDARD=0,this.DOM_KEY_LOCATION_LEFT=1,this.DOM_KEY_LOCATION_RIGHT=2,this.DOM_KEY_LOCATION_NUMPAD=3,this.key=t.key,this.code=t.code,this.location=t.location,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.repeat=t.repeat,this.isComposing=t.isComposing,this.keyCode=t.keyCode}var a=t("./UIEvent");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"KeyboardEvent"},e.exports=i},{"./UIEvent":36}],34:[function(t,e){function i(t){a.call(this,t),this.screenX=t.screenX,this.screenY=t.screenY,this.clientX=t.clientX,this.clientY=t.clientY,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.button=t.button,this.buttons=t.buttons,this.pageX=t.pageX,this.pageY=t.pageY,this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY}var a=t("./UIEvent");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"MouseEvent"},e.exports=i},{"./UIEvent":36}],35:[function(t,e){function i(t){this.identifier=t.identifier,this.screenX=t.screenX,this.screenY=t.screenY,this.clientX=t.clientX,this.clientY=t.clientY,this.pageX=t.pageX,this.pageY=t.pageY}function a(t){if(!t)return o;for(var e=[],a=0;a<t.length;a++)e[a]=new i(t[a]);return e}function n(t){s.call(this,t),this.touches=a(t.touches),this.targetTouches=a(t.targetTouches),this.changedTouches=a(t.changedTouches),this.altKey=t.altKey,this.metaKey=t.metaKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey}var s=t("./UIEvent"),o=[];n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return"TouchEvent"},e.exports=n},{"./UIEvent":36}],36:[function(t,e){function i(t){a.call(this,t),this.detail=t.detail}var a=t("./Event");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"UIEvent"},e.exports=i},{"./Event":29}],37:[function(t,e){function i(t){a.call(this,t),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2,this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.deltaMode=t.deltaMode}var a=t("./MouseEvent");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"WheelEvent"},e.exports=i},{"./MouseEvent":34}],38:[function(t,e){e.exports={CompositionEvent:t("./CompositionEvent"),Event:t("./Event"),EventMap:t("./EventMap"),FocusEvent:t("./FocusEvent"),InputEvent:t("./InputEvent"),KeyboardEvent:t("./KeyboardEvent"),MouseEvent:t("./MouseEvent"),TouchEvent:t("./TouchEvent"),UIEvent:t("./UIEvent"),WheelEvent:t("./WheelEvent")}},{"./CompositionEvent":28,"./Event":29,"./EventMap":30,"./FocusEvent":31,"./InputEvent":32,"./KeyboardEvent":33,"./MouseEvent":34,"./TouchEvent":35,"./UIEvent":36,"./WheelEvent":37}],39:[function(t,e){e.exports={DOMRenderer:t("./DOMRenderer"),ElementCache:t("./ElementCache"),Events:t("./events"),Math:t("./Math")}},{"./DOMRenderer":25,"./ElementCache":26,"./Math":27,"./events":38}],40:[function(t,e){e.exports={components:t("./components"),core:t("./core"),renderLoops:t("./render-loops"),domRenderables:t("./dom-renderables"),domRenderers:t("./dom-renderers"),math:t("./math"),physics:t("./physics"),renderers:t("./renderers"),transitions:t("./transitions"),utilities:t("./utilities"),webglRenderables:t("./webgl-renderables"),webglRenderers:t("./webgl-renderers"),webglGeometries:t("./webgl-geometries"),webglMaterials:t("./webgl-materials"),webglShaders:t("./webgl-shaders"),polyfills:t("./polyfills")}},{"./components":12,"./core":22,"./dom-renderables":24,"./dom-renderers":39,"./math":45,"./physics":75,"./polyfills":77,"./render-loops":80,"./renderers":85,"./transitions":89,"./utilities":96,"./webgl-geometries":105,"./webgl-materials":119,"./webgl-renderables":121,"./webgl-renderers":134,"./webgl-shaders":136}],41:[function(t,e){function i(t){this.values=t||[1,0,0,0,1,0,0,0,1]}i.prototype.get=function(){return this.values},i.prototype.set=function(t){return this.values=t,this},i.prototype.copy=function(t){var e=this.values,i=t.values;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},i.prototype.vectorMultiply=function(t,e){var i=this.values,a=t.x,n=t.y,s=t.z;return e.x=i[0]*a+i[1]*n+i[2]*s,e.y=i[3]*a+i[4]*n+i[5]*s,e.z=i[6]*a+i[7]*n+i[8]*s,e},i.prototype.multiply=function(t){var e=this.values,i=t.values,a=e[0],n=e[1],s=e[2],o=e[3],r=e[4],l=e[5],p=e[6],c=e[7],u=e[8],h=i[0],d=i[1],m=i[2],g=i[3],f=i[4],y=i[5],_=i[6],v=i[7],S=i[8];return e[0]=a*h+n*g+s*_,e[1]=a*d+n*f+s*v,e[2]=a*m+n*y+s*S,e[3]=o*h+r*g+l*_,e[4]=o*d+r*f+l*v,e[5]=o*m+r*y+l*S,e[6]=p*h+c*g+u*_,e[7]=p*d+c*f+u*v,e[8]=p*m+c*y+u*S,this},i.prototype.transpose=function(){var t=this.values,e=t[1],i=t[2],a=t[3],n=t[5],s=t[6],o=t[7];return t[1]=a,t[2]=s,t[3]=e,t[5]=o,t[6]=i,t[7]=n,this},i.prototype.getDeterminant=function(){var t=this.values,e=t[3],i=t[4],a=t[5],n=t[6],s=t[7],o=t[8],r=t[0]*(i*o-a*s)-t[1]*(e*o-a*n)+t[2]*(e*s-i*n);return r},i.prototype.inverse=function(){var t=this.values,e=t[0],i=t[1],a=t[2],n=t[3],s=t[4],o=t[5],r=t[6],l=t[7],p=t[8],c=e*(s*p-o*l)-i*(n*p-o*r)+a*(n*l-s*r);return Math.abs(c)<1e-40?null:(c=1/c,t[0]=(s*p-o*l)*c,t[3]=(-n*p+o*r)*c,t[6]=(n*l-s*r)*c,t[1]=(-i*p+a*l)*c,t[4]=(e*p-a*r)*c,t[7]=(-e*l+i*r)*c,t[2]=(i*o-a*s)*c,t[5]=(-e*o+a*n)*c,t[8]=(e*s-i*n)*c,this)},i.clone=function(t){return new i(t.values.slice())},i.inverse=function(t,e){var i=t.values,a=e.values,n=i[0],s=i[1],o=i[2],r=i[3],l=i[4],p=i[5],c=i[6],u=i[7],h=i[8],d=n*(l*h-p*u)-s*(r*h-p*c)+o*(r*u-l*c);return Math.abs(d)<1e-40?null:(d=1/d,a[0]=(l*h-p*u)*d,a[3]=(-r*h+p*c)*d,a[6]=(r*u-l*c)*d,a[1]=(-s*h+o*u)*d,a[4]=(n*h-o*c)*d,a[7]=(-n*u+s*c)*d,a[2]=(s*p-o*l)*d,a[5]=(-n*p+o*r)*d,a[8]=(n*l-s*r)*d,e)},i.transpose=function(t,e){var i=t.values,a=e.values,n=i[0],s=i[1],o=i[2],r=i[3],l=i[4],p=i[5],c=i[6],u=i[7],h=i[8];return a[0]=n,a[1]=r,a[2]=c,a[3]=s,a[4]=l,a[5]=u,a[6]=o,a[7]=p,a[8]=h,e},i.add=function(t,e,i){var a=t.values,n=e.values,s=i.values,o=a[0],r=a[1],l=a[2],p=a[3],c=a[4],u=a[5],h=a[6],d=a[7],m=a[8],g=n[0],f=n[1],y=n[2],_=n[3],v=n[4],S=n[5],x=n[6],A=n[7],b=n[8];return s[0]=o+g,s[1]=r+f,s[2]=l+y,s[3]=p+_,s[4]=c+v,s[5]=u+S,s[6]=h+x,s[7]=d+A,s[8]=m+b,i},i.subtract=function(t,e,i){var a=t.values,n=e.values,s=i.values,o=a[0],r=a[1],l=a[2],p=a[3],c=a[4],u=a[5],h=a[6],d=a[7],m=a[8],g=n[0],f=n[1],y=n[2],_=n[3],v=n[4],S=n[5],x=n[6],A=n[7],b=n[8];return s[0]=o-g,s[1]=r-f,s[2]=l-y,s[3]=p-_,s[4]=c-v,s[5]=u-S,s[6]=h-x,s[7]=d-A,s[8]=m-b,i},i.multiply=function(t,e,i){var a=t.values,n=e.values,s=i.values,o=a[0],r=a[1],l=a[2],p=a[3],c=a[4],u=a[5],h=a[6],d=a[7],m=a[8],g=n[0],f=n[1],y=n[2],_=n[3],v=n[4],S=n[5],x=n[6],A=n[7],b=n[8];return s[0]=o*g+r*_+l*x,s[1]=o*f+r*v+l*A,s[2]=o*y+r*S+l*b,s[3]=p*g+c*_+u*x,s[4]=p*f+c*v+u*A,s[5]=p*y+c*S+u*b,s[6]=h*g+d*_+m*x,s[7]=h*f+d*v+m*A,s[8]=h*y+d*S+m*b,i},e.exports=i},{}],42:[function(t,e){function i(t,e,i,a){this.w=t||1,this.x=e||0,this.y=i||0,this.z=a||0}var a=Math.sin,n=Math.cos,s=Math.asin,o=Math.acos,r=Math.atan2,l=Math.sqrt;i.prototype.multiply=function(t){var e=this.x,i=this.y,a=this.z,n=this.w,s=t.x,o=t.y,r=t.z,l=t.w||0;return this.w=n*l-e*s-i*o-a*r,this.x=e*l+s*n+o*a-i*r,this.y=i*l+o*n+e*r-s*a,this.z=a*l+r*n+s*i-e*o,this},i.prototype.leftMultiply=function(t){var e=t.x,i=t.y,a=t.z,n=t.w||0,s=this.x,o=this.y,r=this.z,l=this.w;return this.w=n*l-e*s-i*o-a*r,this.x=e*l+s*n+o*a-i*r,this.y=i*l+o*n+e*r-s*a,this.z=a*l+r*n+s*i-e*o,this},i.prototype.rotateVector=function(t,e){var i=this.w,a=-this.x,n=-this.y,s=-this.z,o=t.x,r=t.y,l=t.z,p=-a*o-n*r-s*l,c=o*i+r*s-n*l,u=r*i+a*l-o*s,h=l*i+o*n-a*r,d=i,m=-a,g=-n,f=-s;return e.x=c*d+m*p+g*h-u*f,e.y=u*d+g*p+c*f-m*h,e.z=h*d+f*p+m*u-c*g,e},i.prototype.invert=function(){return this.w=-this.w,this.x=-this.x,this.y=-this.y,this.z=-this.z,this},i.prototype.conjugate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},i.prototype.length=function(){var t=this.w,e=this.x,i=this.y,a=this.z;return l(t*t+e*e+i*i+a*a)},i.prototype.normalize=function(){var t=this.w,e=this.x,i=this.y,a=this.z,n=l(t*t+e*e+i*i+a*a);return 0===n?this:(n=1/n,this.w*=n,this.x*=n,this.y*=n,this.z*=n,this)},i.prototype.set=function(t,e,i,a){return null!=t&&(this.w=t),null!=e&&(this.x=e),null!=i&&(this.y=i),null!=a&&(this.z=a),this},i.prototype.copy=function(t){return this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z,this},i.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},i.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},i.prototype.slerp=function(t,e,i){var n,s,r,l,p,c=this.w,u=this.x,h=this.y,d=this.z,m=t.w,g=t.x,f=t.y,y=t.z;return s=c*m+u*g+h*f+d*y,1-s>1e-5?(n=o(s),r=a(n),l=a((1-e)*n)/r,p=a(e*n)/r):(l=1-e,p=e),i.w=c*l+m*p,i.x=u*l+g*p,i.y=h*l+f*p,i.z=d*l+y*p,i},i.prototype.toMatrix=function(t){var e=this.w,i=this.x,a=this.y,n=this.z,s=i*i,o=a*a,r=n*n,l=i*a,p=i*n,c=a*n;return t.set([1-2*(o+r),2*(l-e*n),2*(p+e*a),2*(l+e*n),1-2*(s+r),2*(c-e*i),2*(p-e*a),2*(c+e*i),1-2*(s+o)])},i.prototype.toEuler=function(t){var e=this.w,i=this.x,a=this.y,n=this.z,o=i*i,l=a*a,p=n*n,c=2*(i*n+a*e);return c=-1>c?-1:c>1?1:c,t.x=r(2*(i*e-a*n),1-2*(o+l)),t.y=s(c),t.z=r(2*(n*e-i*a),1-2*(l+p)),t},i.prototype.fromEuler=function(t,e,i){var s=.5*t,o=.5*e,r=.5*i,l=a(s),p=a(o),c=a(r),u=n(s),h=n(o),d=n(r);return this.w=u*h*d-l*p*c,this.x=l*h*d+u*p*c,this.y=u*p*d-l*h*c,this.z=u*h*c+l*p*d,this},i.prototype.fromAngleAxis=function(t,e,i,s){var o=l(e*e+i*i+s*s);if(0===o)this.w=1,this.x=this.y=this.z=0;else{o=1/o;var r=.5*t,p=a(r);this.w=n(r),this.x=p*e*o,this.y=p*i*o,this.z=p*s*o}return this},i.multiply=function(t,e,i){var a=t.w||0,n=t.x,s=t.y,o=t.z,r=e.w||0,l=e.x,p=e.y,c=e.z;return i.w=a*r-n*l-s*p-o*c,i.x=n*r+l*a+p*o-s*c,i.y=s*r+p*a+n*c-l*o,i.z=o*r+c*a+l*s-n*p,i},i.normalize=function(t,e){var i=t.w,a=t.x,n=t.y,s=t.z,o=l(i*i+a*a+n*n+s*s);return 0===o?this:(o=1/o,e.w*=o,e.x*=o,e.y*=o,e.z*=o,e)},i.conjugate=function(t,e){return e.w=t.w,e.x=-t.x,e.y=-t.y,e.z=-t.z,e},i.clone=function(t){return new i(t.w,t.x,t.y,t.z)},i.dot=function(t,e){return t.w*e.w+t.x*e.x+t.y*e.y+t.z*e.z},e.exports=i},{}],43:[function(t,e){var i=function(t,e){t instanceof Array||t instanceof Float32Array?(this.x=t[0]||0,this.y=t[1]||0):(this.x=t||0,this.y=e||0)};i.prototype.set=function(t,e){return null!=t&&(this.x=t),null!=e&&(this.y=e),this},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.scale=function(t){return t instanceof i?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t),this},i.prototype.rotate=function(t){var e=this.x,i=this.y,a=Math.cos(t),n=Math.sin(t);return this.x=e*a-i*n,this.y=e*n+i*a,this},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.cross=function(t){return this.x*t.y-this.y*t.x},i.prototype.invert=function(){return this.x*=-1,this.y*=-1,this},i.prototype.map=function(t){return this.x=t(this.x),this.y=t(this.y),this},i.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},i.prototype.clear=function(){return this.x=0,this.y=0,this},i.prototype.isZero=function(){return 0!==this.x||0!==this.y?!1:!0},i.prototype.toArray=function(){return[this.x,this.y]},i.normalize=function(t,e){var i=t.x,a=t.y,n=Math.sqrt(i*i+a*a)||1;return n=1/n,e.x=t.x*n,e.y=t.y*n,e},i.clone=function(t){return new i(t.x,t.y)},i.add=function(t,e,i){return i.x=t.x+e.x,i.y=t.y+e.y,i},i.subtract=function(t,e,i){return i.x=t.x-e.x,i.y=t.y-e.y,i},i.scale=function(t,e,i){return i.x=t.x*e,i.y=t.y*e,i},i.dot=function(t,e){return t.x*e.x+t.y*e.y},i.cross=function(t,e){return t.x*e.y-t.y*e.x},e.exports=i},{}],44:[function(t,e){var i=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0};i.prototype.set=function(t,e,i){return null!=t&&(this.x=t),null!=e&&(this.y=e),null!=i&&(this.z=i),this},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},i.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},i.prototype.rotateX=function(t){var e=this.y,i=this.z,a=Math.cos(t),n=Math.sin(t);return this.y=e*a-i*n,this.z=e*n+i*a,this},i.prototype.rotateY=function(t){var e=this.x,i=this.z,a=Math.cos(t),n=Math.sin(t);return this.x=i*n+e*a,this.z=i*a-e*n,this},i.prototype.rotateZ=function(t){var e=this.x,i=this.y,a=Math.cos(t),n=Math.sin(t);return this.x=e*a-i*n,this.y=e*n+i*a,this},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},i.prototype.cross=function(t){var e=this.x,i=this.y,a=this.z,n=t.x,s=t.y,o=t.z;return this.x=i*o-a*s,this.y=a*n-e*o,this.z=e*s-i*n,this},i.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},i.prototype.invert=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},i.prototype.map=function(t){return this.x=t(this.x),this.y=t(this.y),this.z=t(this.z),this},i.prototype.length=function(){var t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)},i.prototype.lengthSq=function(){var t=this.x,e=this.y,i=this.z;return t*t+e*e+i*i},i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},i.prototype.clear=function(){return this.x=0,this.y=0,this.z=0,this},i.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},i.prototype.toArray=function(){return[this.x,this.y,this.z]},i.prototype.normalize=function(){var t=this.x,e=this.y,i=this.z,a=Math.sqrt(t*t+e*e+i*i)||1;return a=1/a,this.x*=a,this.y*=a,this.z*=a,this},i.prototype.applyRotation=function(t){var e=t.w,i=-t.x,a=-t.y,n=-t.z,s=this.x,o=this.y,r=this.z,l=-i*s-a*o-n*r,p=s*e+o*n-a*r,c=o*e+i*r-s*n,u=r*e+s*a-i*o,h=e,d=-i,m=-a,g=-n;return this.x=p*h+d*l+m*u-c*g,this.y=c*h+m*l+p*g-d*u,this.z=u*h+g*l+d*c-p*m,this},i.prototype.applyMatrix=function(t){var e=t.get(),i=this.x,a=this.y,n=this.z;return this.x=e[0]*i+e[1]*a+e[2]*n,this.y=e[3]*i+e[4]*a+e[5]*n,this.z=e[6]*i+e[7]*a+e[8]*n,this},i.normalize=function(t,e){var i=t.x,a=t.y,n=t.z,s=Math.sqrt(i*i+a*a+n*n)||1;return s=1/s,e.x=i*s,e.y=a*s,e.z=n*s,e},i.applyRotation=function(t,e,i){var a=e.w,n=-e.x,s=-e.y,o=-e.z,r=t.x,l=t.y,p=t.z,c=-n*r-s*l-o*p,u=r*a+l*o-s*p,h=l*a+n*p-r*o,d=p*a+r*s-n*l,m=a,g=-n,f=-s,y=-o;return i.x=u*m+g*c+f*d-h*y,i.y=h*m+f*c+u*y-g*d,i.z=d*m+y*c+g*h-u*f,i},i.clone=function(t){return new i(t.x,t.y,t.z)},i.add=function(t,e,i){return i.x=t.x+e.x,i.y=t.y+e.y,i.z=t.z+e.z,i},i.subtract=function(t,e,i){return i.x=t.x-e.x,i.y=t.y-e.y,i.z=t.z-e.z,i},i.scale=function(t,e,i){return i.x=t.x*e,i.y=t.y*e,i.z=t.z*e,i},i.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},i.cross=function(t,e,i){var a=t.x,n=t.y,s=t.z,o=e.x,r=e.y,l=e.z;return i.x=n*l-s*r,i.y=s*o-a*l,i.z=a*r-n*o,i},i.project=function(t,e,i){var a=t.x,n=t.y,s=t.z,o=e.x,r=e.y,l=e.z,p=a*o+n*r+s*l;return p/=o*o+r*r+l*l,i.x=o*p,i.y=r*p,i.z=l*p,i},e.exports=i},{}],45:[function(t,e){e.exports={Mat33:t("./Mat33"),Quaternion:t("./Quaternion"),Vec2:t("./Vec2"),Vec3:t("./Vec3")}},{"./Mat33":41,"./Quaternion":42,"./Vec2":43,"./Vec3":44}],46:[function(t,e){function i(){throw new Error("You should bundle your code using `glslify` as a transform.")}e.exports=i},{}],47:[function(t,e){function i(t,e,i,a){return{vertex:t,fragment:e,uniforms:i,attributes:a}}e.exports=i},{}],48:[function(t,e){function i(t,e,i){var a=f;return u.cross(t,e,a),u.cross(a,i,a),a}function a(t,e){for(var i,a,n,s,o=-(1/0),r=0;r<t.length;r++)n=t[r],a=u.dot(n,e),a>o&&(i=n,o=a,s=r);return{vertex:i,index:s}}function n(t,e,i){this.distance=t,this.normal=e,this.vertexIndices=i}function s(){this.vertices=[],this.numVertices=0,this.features=[],this.numFeatures=0,this.lastVertexIndex=0,this._IDPool={vertices:[],features:[]}}function o(t,e,i,a){for(var n=t[i].vertex,s=t[a].vertex,o=0,r=e.length;r>o;o++){var l=e[o];if(l){var p=t[l[0]].vertex,c=t[l[1]].vertex;if(n===p&&s===c||n===c&&s===p)return void(e[o]=null)}}e.push([i,a])}function r(t,e){e=e||1e3;var i,a,n=l(t,e),s=[];for(i=0,a=n.features.length;a>i;i++){var o=n.features[i];o&&s.push(o.vertexIndices)}var r=c(n.vertices,s),p=r.centroid,h=[];for(i=0,a=n.vertices.length;a>i;i++)h.push(u.subtract(n.vertices[i].vertex,p,new u));var d=[];for(i=0,a=h.length;a>i;i++)d.push(u.normalize(h[i],new u));var m={},g={};for(i=0;i<s.length;i++){var f=s[i][0],y=s[i][1],_=s[i][2];g[f]=g[f]||{},g[y]=g[y]||{},g[_]=g[_]||{},m[f]=m[f]||[],m[y]=m[y]||[],m[_]=m[_]||[],g[f][y]||(g[f][y]=1,m[f].push(y)),g[f][_]||(g[f][_]=1,m[f].push(_)),g[y][f]||(g[y][f]=1,m[y].push(f)),g[y][_]||(g[y][_]=1,m[y].push(_)),g[_][f]||(g[_][f]=1,m[_].push(f)),g[_][y]||(g[_][y]=1,m[_].push(y))}this.indices=s,this.vertices=h,this.normals=d,this.polyhedralProperties=r,this.graph=m}function l(t,e){var n=new s;n.addVertex(a(t,new u(1,0,0))),n.addVertex(a(t,new u(-1,0,0)));var o,r,l,p,c,h,d=n.vertices[0].vertex,m=n.vertices[1].vertex,g=u.subtract(m,d,S),f=-(1/0);for(c=0;c<t.length;c++)if(r=t[c],r!==d&&r!==m){var _=u.subtract(r,d,y);o=u.dot(_,i(g,_,g)),o=0>o?-1*o:o,o>f&&(f=o,l=r,p=c)}n.addVertex({vertex:l,index:p});var v=l,z=u.subtract(v,d,x),w=u.cross(g,z,new u);for(w.normalize(),f=-(1/0),c=0;c<t.length;c++)r=t[c],r!==d&&r!==m&&r!==v&&(o=u.dot(u.subtract(r,d,y),w),o=0>o?-1*o:o,o>f&&(f=o,l=r,p=c));n.addVertex({vertex:l,index:p});var R=l,O=u.subtract(R,d,A),C=u.subtract(v,m,b),E=u.subtract(R,m,T),X=u.cross(z,O,new u),Y=u.cross(g,O,new u),P=u.cross(C,E,new u);X.normalize(),Y.normalize(),P.normalize(),u.dot(w,O)>0&&w.invert(),u.dot(X,g)>0&&X.invert(),u.dot(Y,z)>0&&Y.invert(),u.dot(P,g)<0&&P.invert();var M=0,I=1,L=2,D=3;n.addFeature(null,w,[M,I,L]),n.addFeature(null,X,[M,L,D]),n.addFeature(null,Y,[M,I,D]),n.addFeature(null,P,[I,L,D]);var k={};for(c=0,h=n.vertices.length;h>c;c++)k[n.vertices[c].index]=!0;var F=d.x+m.x+v.x+R.x,U=d.y+m.y+v.y+R.y,j=d.z+m.z+v.z+R.z,N=new u(F,U,j);N.scale(.25);for(var q=n.features,V=0;V++<e;){var B=null;for(c=0,h=q.length;h>c;c++)if(q[c]&&!q[c].done){B=q[c],l=null,p=null,d=n.vertices[B.vertexIndices[0]].vertex;var G=a(t,B.normal);l=G.vertex,p=G.index;var H=u.dot(u.subtract(l,d,y),B.normal);.001>H||k[p]?B.done=!0:(k[p]=!0,n.addVertex(G),n.reshape(N))}if(null===B)break}return n}function p(t,e,i,a,n){var s=t+e;a[0]=s+i;var o=t*t,r=o+e*s;a[1]=r+i*a[0],a[2]=t*o+e*r+i*a[1],n[0]=a[1]+t*(a[0]+t),n[1]=a[1]+e*(a[0]+e),n[2]=a[1]+i*(a[0]+i)}function c(t,e){var i,a,n=[0,0,0,0,0,0,0,0,0,0],s=[],o=[],r=[],l=[],c=[],d=[];for(i=0,a=e.length;a>i;i++){var m=t[e[i][0]].vertex,g=t[e[i][1]].vertex,f=t[e[i][2]].vertex,y=u.subtract(g,m,S),_=u.subtract(f,m,x),v=y.cross(_);u.dot(m,v)<0&&v.invert();var A=v.x,b=v.y,T=v.z,z=m.x,w=m.y,R=m.z,O=g.x,C=g.y,E=g.z,X=f.x,Y=f.y,P=f.z;p(z,O,X,s,l),p(w,C,Y,o,c),p(R,E,P,r,d),n[0]+=A*s[0],n[1]+=A*s[1],n[2]+=b*o[1],n[3]+=T*r[1],n[4]+=A*s[2],n[5]+=b*o[2],n[6]+=T*r[2],n[7]+=A*(w*l[0]+C*l[1]+Y*l[2]),n[8]+=b*(R*c[0]+E*c[1]+P*c[2]),n[9]+=T*(z*d[0]+O*d[1]+X*d[2])}n[0]/=6,n[1]/=24,n[2]/=24,n[3]/=24,n[4]/=60,n[5]/=60,n[6]/=60,n[7]/=120,n[8]/=120,n[9]/=120;var M=1/0,I=-(1/0),L=1/0,D=-(1/0),k=1/0,F=-(1/0);for(i=0,a=t.length;a>i;i++){var U=t[i].vertex;U.x<M&&(M=U.x),U.x>I&&(I=U.x),U.y<L&&(L=U.y),U.y>D&&(D=U.y),U.z<k&&(k=U.z),U.z>F&&(F=U.z)}var j=[I-M,D-L,F-k],N=n[0],q=new u(n[1],n[2],n[3]);q.scale(1/N);var V=new h([n[4],n[7],n[9],n[7],n[5],n[8],n[9],n[8],n[6]]);return{size:j,volume:N,centroid:q,eulerTensor:V}}var u=t("../math/Vec3"),h=t("../math/Mat33"),d=t("../utilities/ObjectManager");d.register("DynamicGeometry",s),d.register("DynamicGeometryFeature",n);var m=d.requestDynamicGeometryFeature,g=d.freeDynamicGeometryFeature,f=new u,y=new u,_=new u,v=new u,S=new u,x=new u,A=new u,b=new u,T=new u;n.prototype.reset=function(t,e,i){return this.distance=t,this.normal=e,this.vertexIndices=i,this},s.prototype.reset=function(){return this.vertices=[],this.numVertices=0,this.features=[],this.numFeatures=0,this.lastVertexIndex=0,this._IDPool={vertices:[],features:[]},this},s.prototype.addVertex=function(t){var e=this._IDPool.vertices.length?this._IDPool.vertices.pop():this.vertices.length;this.vertices[e]=t,this.lastVertexIndex=e,this.numVertices++},s.prototype.removeVertex=function(t){var e=this.vertices[t];return this.vertices[t]=null,this._IDPool.vertices.push(t),this.numVertices--,e},s.prototype.addFeature=function(t,e,i){var a=this._IDPool.features.length?this._IDPool.features.pop():this.features.length;this.features[a]=m().reset(t,e,i),this.numFeatures++},s.prototype.removeFeature=function(t){var e=this.features[t];this.features[t]=null,this._IDPool.features.push(t),this.numFeatures--,g(e)},s.prototype.getLastVertex=function(){return this.vertices[this.lastVertexIndex]},s.prototype.getFeatureClosestToOrigin=function(){for(var t=1/0,e=null,i=this.features,a=0,n=i.length;n>a;a++){var s=i[a];s&&s.distance<t&&(t=s.distance,e=s)}return e},s.prototype.reshape=function(t){var e,i,a,n,s,r=this.vertices,l=this.getLastVertex().vertex,p=this.features,c=[];for(a=0,s=p.length;s>a;a++)p[a]&&(i=p[a].vertexIndices,e=r[i[0]].vertex,u.dot(p[a].normal,u.subtract(l,e,_))>-.001&&(o(r,c,i[0],i[1]),o(r,c,i[1],i[2]),o(r,c,i[2],i[0]),this.removeFeature(a)));var h=l,d=this.lastVertexIndex;for(n=0,s=c.length;s>n;n++)if(c[n]){var m=c[n][0],g=c[n][1],f=r[m].vertex,v=r[g].vertex,A=u.subtract(f,h,S),b=u.subtract(v,h,x),T=u.cross(A,b,new u);if(T.normalize(),t){var z=u.subtract(t,h,y);u.dot(T,z)>-.001&&T.invert(),this.addFeature(null,T,[d,m,g])}else{var w=u.dot(T,h);0>w&&(T.invert(),w*=-1),this.addFeature(w,T,[d,m,g])}}},s.prototype.simplexContainsOrigin=function(t,e){var a=this.vertices.length,n=this.lastVertexIndex,s=n-1,o=n-2,r=n-3;s=0>s?s+a:s,o=0>o?o+a:o,r=0>r?r+a:r;var l,p,c,h,d,m,g,f,y,_,z,w,R,O=this.vertices[n].vertex,C=this.vertices[s].vertex,E=this.vertices[o].vertex,X=this.vertices[r].vertex,Y=u.scale(O,-1,v),P=u.subtract(C,O,S);if(4===a){if(l=u.subtract(E,O,x),p=u.subtract(X,O,A),d=u.cross(P,l,new u),m=u.cross(l,p,new u),g=u.cross(P,p,new u),d.normalize(),m.normalize(),g.normalize(),u.dot(d,p)>0&&d.invert(),u.dot(m,P)>0&&m.invert(),u.dot(g,l)>0&&g.invert(),y=u.dot(d,Y),_=u.dot(m,Y),z=u.dot(g,Y),.001>y&&.001>z&&.001>_)return c=u.subtract(E,C,b),h=u.subtract(X,C,T),f=u.cross(c,h,new u),f.normalize(),u.dot(f,P)<=0&&f.invert(),w=-1*u.dot(f,C),this.addFeature(-y,d,[n,s,o]),this.addFeature(-_,m,[n,o,r]),this.addFeature(-z,g,[n,r,s]),this.addFeature(-w,f,[s,o,r]),!0;y>=.001?(R=this.removeVertex(r),t.copy(d)):_>=.001?(R=this.removeVertex(s),t.copy(m)):(R=this.removeVertex(o),t.copy(g))}else 3===a?(l=u.subtract(E,O,x),u.cross(P,l,t),u.dot(t,Y)<=0&&t.invert()):t.copy(i(P,Y,P));return R&&e&&e(R),!1},e.exports={DynamicGeometry:s,ConvexHull:r}},{"../math/Mat33":41,"../math/Vec3":44,"../utilities/ObjectManager":93}],49:[function(t,e){function i(t){this.events=new c,t=t||{},this.bodies=[],this.forces=[],this.constraints=[],this.step=t.step||1e3/60,this.iterations=t.iterations||10,this._indexPools={bodies:[],forces:[],constraints:[]},this._entityMaps={bodies:{},forces:{},constraints:{}},this.speed=t.speed||1,this.time=0,this.delta=0,this.origin=t.origin||new u,this.orientation=t.orientation?t.orientation.normalize():new h,this.frameDependent=t.frameDependent||!1,this.transformBuffers={position:[0,0,0],rotation:[0,0,0,1]}}function a(t,e,i){var a=t._entityMaps[i];if(null==a[e._ID]){var n=t[i],s=t._indexPools[i];a[e._ID]=s.length?s.pop():n.length,n[a[e._ID]]=e}}function n(t,e,i){var a=t._entityMaps[i],n=a[e._ID];null!=n&&(t._indexPools[i].push(n),t[i][n]=null,a[e._ID]=null)}function s(t,e){t.momentum.add(u.scale(t.force,e,g)),t.angularMomentum.add(u.scale(t.torque,e,g)),u.scale(t.momentum,t.inverseMass,t.velocity),t.inverseInertia.vectorMultiply(t.angularMomentum,t.angularVelocity),t.force.clear(),t.torque.clear()}function o(t,e){if(0!==t.restrictions){var i=t.restrictions,a=null,n=null,s=null,o=null,r=null,l=null;32&i&&(a=0),16&i&&(n=0),8&i&&(s=0),4&i&&(o=0),2&i&&(r=0),1&i&&(l=0),(null!==a||null!==n||null!==s)&&t.setVelocity(a,n,s),(null!==o||null!==r||null!==l)&&t.setAngularVelocity(o,r,l)}t.position.add(u.scale(t.velocity,e,g));var p=t.angularVelocity,c=t.orientation,h=p.x,d=p.y,m=p.z,f=c.w,y=c.x,_=c.y,v=c.z,S=.5*e;c.w+=(-h*y-d*_-m*v)*S,c.x+=(h*f+d*v-m*_)*S,c.y+=(d*f+m*y-h*v)*S,c.z+=(m*f+h*_-d*y)*S,c.normalize(),t.updateInertia()}var r=t("./bodies/Particle"),l=t("./constraints/Constraint"),p=t("./forces/Force"),c=t("../utilities/CallbackStore"),u=t("../math/Vec3"),h=t("../math/Quaternion"),d=new u,m=new h,g=new u;i.prototype.on=function(t,e){return this.events.on(t,e),this},i.prototype.off=function(t,e){return this.events.off(t,e),this},i.prototype.trigger=function(t,e){return this.events.trigger(t,e),this},i.prototype.setOrigin=function(t,e,i){return this.origin.set(t,e,i),this},i.prototype.setOrientation=function(t,e,i,a){return this.orientation.set(t,e,i,a).normalize(),this},i.prototype.add=function(){for(var t=0,e=arguments.length;e>t;t++){var i=arguments[t];if(i instanceof Array)for(var a=0,n=i.length;n>a;a++){var s=i[a];this.add(s)}else i instanceof r?this.addBody(i):i instanceof l?this.addConstraint(i):i instanceof p&&this.addForce(i)}return this},i.prototype.remove=function(){for(var t=0,e=arguments.length;e>t;t++){var i=arguments[t];if(i instanceof Array)for(var a=0,n=i.length;n>a;a++){var s=i[a];this.add(s)}else i instanceof r?this.removeBody(i):i instanceof l?this.removeConstraint(i):i instanceof p&&this.removeForce(i)}return this},i.prototype.addBody=function(t){a(this,t,"bodies")},i.prototype.addForce=function(t){a(this,t,"forces")},i.prototype.addConstraint=function(t){a(this,t,"constraints")},i.prototype.removeBody=function(t){n(this,t,"bodies")},i.prototype.removeForce=function(t){n(this,t,"forces")},i.prototype.removeConstraint=function(t){n(this,t,"constraints")},i.prototype.update=function(t){0===this.time&&(this.time=t);var e=this.bodies,i=this.forces,a=this.constraints,n=this.frameDependent,r=this.step,l=.001*r,p=this.speed,c=this.delta;c+=(t-this.time)*p,this.time=t;for(var u,h,d,m,g;c>r;){for(this.events.trigger("prestep",t),u=0,h=i.length;h>u;u++)d=i[u],null!==d&&d.update(t,l);for(u=0,h=e.length;h>u;u++)m=e[u],null!==m&&s(m,l);for(u=0,h=a.length;h>u;u++)g=a[u],null!==g&&g.update(t,l);for(var f=0,y=this.iterations;y>f;f++)for(u=0,h=a.length;h>u;u++)g=a[u],null!==g&&g.resolve(t,l);for(u=0,h=e.length;h>u;u++)m=e[u],null!==m&&o(m,l);this.events.trigger("poststep",t),n?c=0:c-=r}this.delta=c},i.prototype.getTransform=function(t){var e=this.origin,i=this.orientation,a=this.transformBuffers,n=t.position,s=t.orientation,o=s,r=n;return 1!==i.w&&(o=h.multiply(s,i,m),r=i.rotateVector(n,d)),a.position[0]=e.x+r.x,a.position[1]=e.y+r.y,a.position[2]=e.z+r.z,a.rotation[0]=o.x,a.rotation[1]=o.y,a.rotation[2]=o.z,a.rotation[3]=o.w,a},e.exports=i},{"../math/Quaternion":42,"../math/Vec3":44,"../utilities/CallbackStore":90,"./bodies/Particle":51,"./constraints/Constraint":58,"./forces/Force":69}],50:[function(t,e){function i(t){s.call(this,t),this.normals=[new a(0,1,0),new a(1,0,0),new a(0,0,1)],this.type=2}var a=t("../../math/Vec3"),n=t("./convexBodyFactory"),s=n([new a(-100,-100,-100),new a(100,-100,-100),new a(-100,-100,100),new a(100,-100,100),new a(-100,100,-100),new a(100,100,-100),new a(-100,100,100),new a(100,100,100)]);i.prototype=Object.create(s.prototype),i.prototype.constructor=i,e.exports=i},{"../../math/Vec3":44,"./convexBodyFactory":54}],51:[function(t,e){function i(t){this.events=new o,t=t||{},this.position=t.position||new a,this.orientation=t.orientation||new n,this.velocity=new a,this.momentum=new a,this.angularVelocity=new a,this.angularMomentum=new a,this.mass=t.mass||1,this.inverseMass=1/this.mass,this.force=new a,this.torque=new a,this.restitution=null!=t.restitution?t.restitution:.4,this.friction=null!=t.friction?t.friction:.2,this.inverseInertia=new s([0,0,0,0,0,0,0,0,0]),this.localInertia=new s([0,0,0,0,0,0,0,0,0]),this.localInverseInertia=new s([0,0,0,0,0,0,0,0,0]),this.size=t.size||[0,0,0];var e=t.velocity;e&&this.setVelocity(e.x,e.y,e.z),this.restrictions=0,this.setRestrictions.apply(this,t.restrictions||[]),this.collisionMask=t.collisionMask||1,this.collisionGroup=t.collisionGroup||1,this.type=1,this._ID=p++}var a=t("../../math/Vec3"),n=t("../../math/Quaternion"),s=t("../../math/Mat33"),o=t("../../utilities/CallbackStore"),r=new a,l=new s,p=0;i.prototype.on=function(t,e){return this.events.on(t,e),this},i.prototype.off=function(t,e){return this.events.off(t,e),this},i.prototype.trigger=function(t,e){return this.events.trigger(t,e),this},i.prototype.getRestrictions=function(){var t="",e="",i=this.restrictions;return 32&i&&(t+="x"),16&i&&(t+="y"),8&i&&(t+="z"),4&i&&(e+="x"),2&i&&(e+="y"),1&i&&(e+="z"),[t,e]},i.prototype.setRestrictions=function(t,e){return t=t||"",e=e||"",this.restrictions=0,t.indexOf("x")>-1&&(this.restrictions|=32),t.indexOf("y")>-1&&(this.restrictions|=16),t.indexOf("z")>-1&&(this.restrictions|=8),e.indexOf("x")>-1&&(this.restrictions|=4),e.indexOf("y")>-1&&(this.restrictions|=2),e.indexOf("z")>-1&&(this.restrictions|=1),this},i.prototype.getMass=function(){return this.mass},i.prototype.setMass=function(t){return this.mass=t,this.inverseMass=1/t,this},i.prototype.getInverseMass=function(){return this.inverseMass},i.prototype.updateLocalInertia=function(){return this.localInertia.set([0,0,0,0,0,0,0,0,0]),this.localInverseInertia.set([0,0,0,0,0,0,0,0,0]),this},i.prototype.updateInertia=function(){var t=this.localInverseInertia,e=this.orientation;if(t[0]===t[4]&&t[4]===t[8]||1===e.w)return this;var i=e.toMatrix(l);return s.multiply(i,this.inverseInertia,this.inverseInertia),s.multiply(this.localInverseInertia,i.transpose(),this.inverseInertia),this},i.prototype.getPosition=function(){return this.position},i.prototype.setPosition=function(t,e,i){return this.position.set(t,e,i),this},i.prototype.getVelocity=function(){return this.velocity},i.prototype.setVelocity=function(t,e,i){return this.velocity.set(t,e,i),a.scale(this.velocity,this.mass,this.momentum),this},i.prototype.getMomentum=function(){return this.momentum},i.prototype.setMomentum=function(t,e,i){return this.momentum.set(t,e,i),a.scale(this.momentum,this.inverseMass,this.velocity),this
},i.prototype.getOrientation=function(){return this.orientation},i.prototype.setOrientation=function(t,e,i,a){return this.orientation.set(t,e,i,a).normalize(),this.updateInertia(),this},i.prototype.getAngularVelocity=function(){return this.angularVelocity},i.prototype.setAngularVelocity=function(t,e,i){this.angularVelocity.set(t,e,i);var a=s.inverse(this.inverseInertia,l);return a?a.vectorMultiply(this.angularVelocity,this.angularMomentum):this.angularMomentum.clear(),this},i.prototype.getAngularMomentum=function(){return this.angularMomentum},i.prototype.setAngularMomentum=function(t,e,i){return this.angularMomentum.set(t,e,i),this.inverseInertia.vectorMultiply(this.angularMomentum,this.angularVelocity),this},i.prototype.getForce=function(){return this.force},i.prototype.setForce=function(t,e,i){return this.force.set(t,e,i),this},i.prototype.getTorque=function(){return this.torque},i.prototype.setTorque=function(t,e,i){return this.torque.set(t,e,i),this},i.prototype.applyForce=function(t){return this.force.add(t),this},i.prototype.applyTorque=function(t){return this.torque.add(t),this},i.prototype.applyImpulse=function(t){return this.momentum.add(t),a.scale(this.momentum,this.inverseMass,this.velocity),this},i.prototype.applyAngularImpulse=function(t){return this.angularMomentum.add(t),this.inverseInertia.vectorMultiply(this.angularMomentum,this.angularVelocity),this},i.prototype.support=function(){return r},i.prototype.updateShape=function(){},e.exports=i},{"../../math/Mat33":41,"../../math/Quaternion":42,"../../math/Vec3":44,"../../utilities/CallbackStore":90}],52:[function(t,e){function i(t){a.call(this,t);var e=t.radius||1;this.radius=e,this.size=[2*e,2*e,2*e],this.updateLocalInertia(),this.inverseInertia.copy(this.localInverseInertia);var i=t.angularVelocity;i&&this.setAngularVelocity(i.x,i.y,i.z),this.type=4}var a=t("./Particle"),n=t("../../math/Vec3"),s=new n;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.getRadius=function(){return this.radius},i.prototype.setRadius=function(t){return this.radius=t,this.size=[2*this.radius,2*this.radius,2*this.radius],this},i.prototype.updateLocalInertia=function(){var t=this.mass,e=this.radius,i=t*e*e;this.localInertia.set([.4*i,0,0,0,.4*i,0,0,0,.4*i]),this.localInverseInertia.set([2.5/i,0,0,0,2.5/i,0,0,0,2.5/i])},i.prototype.support=function(t){return n.scale(t,this.radius,s)},e.exports=i},{"../../math/Vec3":44,"./Particle":51}],53:[function(t,e){function i(t){a.call(this,t);var e=this.normal=new n,s=this.direction=t.direction;switch(s){case i.DOWN:e.set(0,1,0);break;case i.UP:e.set(0,-1,0);break;case i.LEFT:e.set(-1,0,0);break;case i.RIGHT:e.set(1,0,0);break;case i.FORWARD:e.set(0,0,-1);break;case i.BACKWARD:e.set(0,0,1)}this.invNormal=n.clone(e,new n).invert(),this.mass=1/0,this.inverseMass=0,this.type=8}var a=t("./Particle"),n=t("../../math/Vec3");i.DOWN=0,i.UP=1,i.LEFT=2,i.RIGHT=3,i.FORWARD=4,i.BACKWARD=5,i.prototype=Object.create(a.prototype),i.prototype.constructor=i,e.exports=i},{"../../math/Vec3":44,"./Particle":51}],54:[function(t,e){function i(t){function e(e){n.call(this,e);var i=t.polyhedralProperties.size,r=e.size||i,l=r[0]/i[0],p=r[1]/i[1],c=r[2]/i[2];this._scale=[l,p,c];var u=new s([l,0,0,0,p,0,0,0,c]);this.hull=t,this.vertices=[];for(var h=0,d=t.vertices.length;d>h;h++)this.vertices.push(u.vectorMultiply(t.vertices[h],new o));a.call(this,u),this.inverseInertia.copy(this.localInverseInertia),this.updateInertia();var m=e.angularVelocity;m&&this.setAngularVelocity(m.x,m.y,m.z)}if(!(t instanceof l)){if(!(t instanceof Array))throw new Error("convexBodyFactory requires a ConvexHull object or an array of Vec3's as input.");t=new l(t)}return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.setSize=function(e,i,a){var n=t.polyhedralProperties.size;this.size[0]=e,this.size[1]=i,this.size[2]=a;var o=e/n[0],r=i/n[1],l=a/n[2];this._scale=[o,r,l];for(var p=new s([o,0,0,0,r,0,0,0,l]),c=this.vertices,u=0,h=t.vertices.length;h>u;u++)p.vectorMultiply(t.vertices[u],c[u]);return this},e.prototype.updateLocalInertia=function(){var t=this._scale[0],e=this._scale[1],i=this._scale[2],n=new s([t,0,0,0,e,0,0,0,i]);return a.call(this,n),this},e.prototype.support=function(t){for(var e,i,a,n=this.vertices,s=-(1/0),r=0,l=n.length;l>r;r++)e=n[r],i=o.dot(e,t),i>s&&(a=e,s=i);return a},e.prototype.updateShape=function(){for(var t=this.vertices,e=this.orientation,i=this.hull.vertices,a=this._scale[0],n=this._scale[1],s=this._scale[2],r=p,l=0,c=t.length;c>l;l++)r.copy(i[l]),r.x*=a,r.y*=n,r.z*=s,o.applyRotation(r,e,t[l]);return this},e}function a(t){var e=this.hull.polyhedralProperties,i=t.get(),a=i[0]*i[4]*i[8],n=e.eulerTensor,o=new s;s.multiply(t,n,o),s.multiply(o,t,o);var r=o.get(),l=r[0],p=r[4],c=r[8],u=r[1],h=r[7],d=r[2],m=e.volume*a,g=this.mass,f=g/m,y=p+c,_=l+c,v=l+p,S=-u,x=-h,A=-d,b=e.centroid;y-=m*(b.y*b.y+b.z*b.z),_-=m*(b.z*b.z+b.x*b.x),v-=m*(b.x*b.x+b.y*b.y),S+=m*b.x*b.y,x+=m*b.y*b.z,A+=m*b.z*b.x,y*=f*a,_*=f*a,v*=f*a,S*=f*a,x*=f*a,A*=f*a;var T=[y,S,A,S,_,x,A,x,v];this.localInertia.set(T),s.inverse(this.localInertia,this.localInverseInertia)}var n=t("./Particle"),s=t("../../math/Mat33"),o=t("../../math/Vec3"),r=t("../Geometry"),l=r.ConvexHull,p=new o;e.exports=i},{"../../math/Mat33":41,"../../math/Vec3":44,"../Geometry":48,"./Particle":51}],55:[function(t,e){function i(t,e,i){this.a=t,this.b=e,a.call(this,i),this.effectiveInertia=new s,this.angularImpulse=new n,this.error=0}var a=t("./Constraint"),n=t("../../math/Vec3"),s=t("../../math/Mat33"),o=new n;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.init=function(){this.cosAngle=this.cosAngle||this.a.orientation.dot(this.b.orientation)},i.prototype.update=function(){var t=this.a,e=this.b,i=t.orientation,a=e.orientation,n=i.dot(a),o=2*(n-this.cosAngle);this.error=o;var r=this.angularImpulse;e.applyAngularImpulse(r),t.applyAngularImpulse(r.invert()),s.add(t.inverseInertia,e.inverseInertia,this.effectiveInertia),this.effectiveInertia.inverse(),r.clear()},i.prototype.resolve=function(){var t=this.a,e=this.b,i=o,a=t.angularVelocity,s=e.angularVelocity;n.subtract(a,s,i),i.scale(1+this.error);var r=i.applyMatrix(this.effectiveInertia);e.applyAngularImpulse(r),t.applyAngularImpulse(r.invert()),r.invert(),this.angularImpulse.add(r)},e.exports=i},{"../../math/Mat33":41,"../../math/Vec3":44,"./Constraint":58}],56:[function(t,e){function i(t,e,i){this.a=t,this.b=e,a.call(this,i),this.impulse=new n,this.angImpulseA=new n,this.angImpulseB=new n,this.error=new n,this.effMassMatrix=new s}var a=t("./Constraint"),n=t("../../math/Vec3"),s=t("../../math/Mat33"),o=t("../../math/Quaternion"),r=new n,l=new n,p=new n,c=new n,u=new n;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.init=function(){var t=this.anchor,e=this.a,i=this.b,a=o.conjugate(e.orientation,new o),s=o.conjugate(i.orientation,new o);this.rA=n.subtract(t,e.position,new n),this.rB=n.subtract(t,i.position,new n),this.bodyRA=a.rotateVector(this.rA,new n),this.bodyRB=s.rotateVector(this.rB,new n)},i.prototype.update=function(t,e){var i=this.a,a=this.b,o=i.orientation.rotateVector(this.bodyRA,this.rA),r=a.orientation.rotateVector(this.bodyRB,this.rB),p=new s([0,o.z,-o.y,-o.z,0,o.x,o.y,-o.x,0]),c=new s([0,r.z,-r.y,-r.z,0,r.x,r.y,-r.x,0]),u=s.multiply(p,i.inverseInertia,new s).multiply(p.transpose()),h=s.multiply(c,a.inverseInertia,new s).multiply(c.transpose()),d=s.add(u,h,u),m=n.add(i.position,this.rA,this.anchor),g=n.add(a.position,this.rB,l);n.subtract(g,m,this.error),this.error.scale(.2/e);var f=i.inverseMass,y=a.inverseMass,_=new s([f+y,0,0,0,f+y,0,0,0,f+y]);s.add(d,_,this.effMassMatrix),this.effMassMatrix.inverse();var v=this.impulse,S=this.angImpulseA,x=this.angImpulseB;a.applyImpulse(v),a.applyAngularImpulse(x),v.invert(),i.applyImpulse(v),i.applyAngularImpulse(S),v.clear(),S.clear(),x.clear()},i.prototype.resolve=function(){var t=this.a,e=this.b,i=this.rA,a=this.rB,s=n.add(t.velocity,n.cross(t.angularVelocity,i,u),p),o=n.add(e.velocity,n.cross(e.angularVelocity,a,u),c),h=s.subtract(o).subtract(this.error).applyMatrix(this.effMassMatrix),d=n.cross(a,h,r),m=n.cross(i,h,l).invert();e.applyImpulse(h),e.applyAngularImpulse(d),h.invert(),t.applyImpulse(h),t.applyAngularImpulse(m),h.invert(),this.impulse.add(h),this.angImpulseA.add(m),this.angImpulseB.add(d)},e.exports=i},{"../../math/Mat33":41,"../../math/Quaternion":42,"../../math/Vec3":44,"./Constraint":58}],57:[function(t,e){function i(t,e,i){return e>t?e:t>i?i:t}function a(t,e,i,a,n,s){this.penetration=t,this.normal=e,this.worldContactA=i,this.worldContactB=a,this.localContactA=n,this.localContactB=s}function n(t,e){this.targets=[],t&&(this.targets=this.targets.concat(t)),c.call(this,e)}function s(t,e,i){var a=e.position,n=i.position,s=p.subtract(n,a,new p),o=s.length(),r=e.radius+i.radius,l=s.scale(1/o),c=r-o;if(!(0>c)){var u=p.scale(l,e.radius,new p),h=p.scale(l,-i.radius,new p),d=p.add(a,u,new p),m=p.add(n,h,new p),g=_().reset(c,l,d,m,u,h);t.contactManifoldTable.registerContact(e,i,g)}}function o(t,e,a){if(e.type===A){var n=a;a=e,e=n}var s=e.position,o=a.position,r=p.subtract(o,s,v),l=e.orientation,c=a.radius,u=e.size,h=.5*u[0],d=.5*u[1],m=.5*u[2],g=e.normals,f=l.rotateVector(g[1],new p),y=l.rotateVector(g[0],new p),S=l.rotateVector(g[2],new p),x=new p;x.x=i(p.dot(r,f),-h,h),x.y=i(p.dot(r,y),-d,d),x.z=i(p.dot(r,S),-m,m),x.applyRotation(l);var b=p.add(s,x,new p),T=p.subtract(b,o,b),z=T.length(),w=c-z;if(!(0>w)){var R=p.scale(T,-1/z,new p),O=x,C=T,E=p.add(s,O,new p),X=p.add(o,C,new p),Y=_().reset(w,R,E,X,O,C);t.contactManifoldTable.registerContact(e,a,Y)}}function r(t,e,i){var a=m(e,i);if(a){var n=g(e,i,a);null!==n&&t.contactManifoldTable.registerContact(e,i,n)}}function l(t,e,i){if(e.type===b){var a=i;i=e,e=a}var n=e.position,s=i.position,o=i.normal,r=i.invNormal,l=e.support(r),c=p.add(n,l,new p),u=p.subtract(c,s,v),h=p.dot(u,r);if(!(0>h)){var d=p.scale(o,h,new p).add(c),m=p.subtract(d,i.position,new p),g=_().reset(h,r,c,d,l,m);t.contactManifoldTable.registerContact(e,i,g)}}var p=t("../../math/Vec3"),c=t("./Constraint"),u=t("./collision/SweepAndPrune"),h=t("./collision/BruteForce"),d=t("./collision/ConvexCollisionDetection"),m=d.gjk,g=d.epa,f=t("./collision/ContactManifold"),y=t("../../utilities/ObjectManager");y.register("CollisionData",a);var _=y.requestCollisionData,v=new p;a.prototype.reset=function(t,e,i,a,n,s){return this.penetration=t,this.normal=e,this.worldContactA=i,this.worldContactB=a,this.localContactA=n,this.localContactB=s,this},n.prototype=Object.create(c.prototype),n.prototype.constructor=n,n.prototype.init=function(){if(this.broadPhase){var t=this.broadphase;t instanceof Function&&(this.broadPhase=new t(this.targets))}else this.broadPhase=new u(this.targets);this.contactManifoldTable=this.contactManifoldTable||new f},n.prototype.update=function(t,e){if(this.contactManifoldTable.update(e),0!==this.targets.length){var i,a;for(i=0,a=this.targets.length;a>i;i++)this.targets[i].updateShape();var n,s=this.broadPhase.update();for(i=0,a=s.length;a>i;i++)n=s[i],n&&this.applyNarrowPhase(n);this.contactManifoldTable.prepContacts(e)}},n.prototype.resolve=function(t,e){this.contactManifoldTable.resolveManifolds(e)},n.prototype.addTarget=function(t){this.targets.push(t),this.broadPhase.add(t)},n.prototype.removeTarget=function(t){var e=this.targets.indexOf(t);0>e||(this.targets.splice(e,1),this.broadPhase.remove(t))};var S=1,x=2,A=4,b=8,T=S|S,z=x|x,w=x|S,R=A|A,O=x|A,C=S|A,E=S|b,X=x|b,Y=A|b,P={};P[T]=r,P[z]=r,P[w]=r,P[C]=r,P[R]=s,P[O]=o,P[E]=l,P[X]=l,P[Y]=l,n.prototype.applyNarrowPhase=function(t){for(var e=0,i=t.length;i>e;e++)for(var a=e+1;i>a;a++){var n=t[e],s=t[a];if(0!==(n.collisionMask&s.collisionGroup&&n.collisionGroup&s.collisionMask)){var o=n.type|s.type;P[o]&&P[o](this,n,s)}}},n.SweepAndPrune=u,n.BruteForce=h.BruteForce,n.BruteForceAABB=h.BruteForceAABB,e.exports=n},{"../../math/Vec3":44,"../../utilities/ObjectManager":93,"./Constraint":58,"./collision/BruteForce":64,"./collision/ContactManifold":65,"./collision/ConvexCollisionDetection":66,"./collision/SweepAndPrune":67}],58:[function(t,e){function i(t){t=t||{},this.setOptions(t),this._ID=a++}var a=0;i.prototype.setOptions=function(t){for(var e in t)this[e]=t[e];this.init(t)},i.prototype.init=function(){},i.prototype.update=function(){},i.prototype.resolve=function(){},e.exports=i},{}],59:[function(t,e){function i(t,e){this.targets=t?t instanceof Array?t:[t]:[],a.call(this,e),this.impulses={},this.normals={},this.velocityBiases={},this.divisors={}}var a=t("./Constraint"),n=t("../../math/Vec3"),s=new n,o=new n,r=1e-7,l=Math.PI;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.init=function(){this.equation1=this.equation1||function(){return 0},this.equation2=this.equation2||function(t,e,i){return i},this.period=this.period||1,this.dampingRatio=this.dampingRatio||.5,this.stiffness=4*l*l/(this.period*this.period),this.damping=4*l*this.dampingRatio/this.period},i.prototype.update=function(t,e){for(var i=this.targets,a=this.normals,l=this.velocityBiases,p=this.divisors,c=this.impulses,u=s,h=o,d=this.equation1,m=this.equation2,g=this.damping,f=this.stiffness,y=0,_=i.length;_>y;y++){var v=i[y],S=v._ID;if(!v.immune){var x,A,b=v.position,T=v.mass;if(0===this.period)x=0,A=1;else{var z=g*T,w=f*T;x=1/(e*(z+e*w)),A=e*w/(z+e*w)}var R=b.x,O=b.y,C=b.z,E=d(R,O,C),X=(d(R+r,O,C)-E)/r,Y=(d(R,O+r,C)-E)/r,P=(d(R,O,C+r)-E)/r,M=m(R,O,C),I=(m(R+r,O,C)-M)/r,L=(m(R,O+r,C)-M)/r,D=(m(R,O,C+r)-M)/r;h.set(X+I,Y+L,P+D),h.normalize();var k=A*(E+M)/e,F=x+1/T,U=c[S]||0;n.scale(h,U,u),v.applyImpulse(u),a[S]=a[S]||new n,a[S].copy(h),l[S]=k,p[S]=F,c[S]=0}}},i.prototype.resolve=function(){for(var t=this.targets,e=this.normals,i=this.velocityBiases,a=this.divisors,o=this.impulses,r=s,l=0,p=t.length;p>l;l++){var c=t[l],u=c._ID;if(!c.immune){var h=c.velocity,d=e[u],m=-(n.dot(d,h)+i[u])/a[u];n.scale(d,m,r),c.applyImpulse(r),o[u]+=m}}},e.exports=i},{"../../math/Vec3":44,"./Constraint":58}],60:[function(t,e){function i(t,e,i){this.a=t,this.b=e,a.call(this,i),this.impulse=0,this.distance=0,this.normal=new n,this.velocityBias=0,this.divisor=0}var a=t("./Constraint"),n=t("../../math/Vec3"),s=new n,o=new n,r=new n,l=new n,p=new n,c=Math.PI;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.init=function(){this.direction=this.direction||n.subtract(this.b.position,this.a.position,new n),this.direction.normalize(),this.minLength=this.minLength||0,this.period=this.period||.2,this.dampingRatio=this.dampingRatio||.5,this.stiffness=4*c*c/(this.period*this.period),this.damping=4*c*this.dampingRatio/this.period},i.prototype.update=function(t,e){var i=this.a,a=this.b,r=s,c=l,u=o,h=p,d=i.position,m=i.inverseMass,g=a.position,f=a.inverseMass,y=this.direction;n.subtract(g,d,c),n.scale(y,n.dot(y,c),h);var _=h.add(d);n.subtract(g,_,r);var v=r.length();r.normalize();var S,x,A=m+f,b=1/A;if(0===this.period)S=0,x=1;else{var T=this.damping*b,z=this.stiffness*b;S=1/(e*(T+e*z)),x=e*z/(T+e*z)}var w=x*v/e,R=S+A,O=this.impulse;n.scale(r,O,u),a.applyImpulse(u),i.applyImpulse(u.invert()),this.normal.copy(r),this.distance=v,this.velocityBias=w,this.divisor=R,this.impulse=0},i.prototype.resolve=function(){var t=this.a,e=this.b,i=o,a=r,s=this.minLength,l=this.distance;if(!(Math.abs(l)<s)){var p=t.velocity,c=e.velocity,u=this.normal;n.subtract(c,p,a);var h=-(n.dot(u,a)+this.velocityBias)/this.divisor;n.scale(u,h,i),e.applyImpulse(i),t.applyImpulse(i.invert()),this.impulse+=h}},e.exports=i},{"../../math/Vec3":44,"./Constraint":58}],61:[function(t,e){function i(t,e,i){this.a=t,this.b=e,a.call(this,i),this.impulse=0,this.distance=0,this.normal=new n,this.velocityBias=0,this.divisor=0}var a=t("./Constraint"),n=t("../../math/Vec3"),s=new n,o=new n,r=new n,l=new n,p=Math.PI;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.init=function(){this.length=this.length||n.subtract(this.b.position,this.a.position,l).length(),this.minLength=this.minLength||0,this.period=this.period||.2,this.dampingRatio=this.dampingRatio||.5,this.stiffness=4*p*p/(this.period*this.period),this.damping=4*p*this.dampingRatio/this.period},i.prototype.update=function(t,e){var i=this.a,a=this.b,r=s,p=l,c=o,u=this.length,h=i.position,d=i.inverseMass,m=a.position,g=a.inverseMass;n.subtract(m,h,p);var f=p.length();n.scale(p,1/f,r);var y,_,v=f-u,S=d+g,x=1/S;if(0===this.period)y=0,_=1;else{var A=this.damping*x,b=this.stiffness*x;y=1/(e*(A+e*b)),_=e*b/(A+e*b)}var T=_*v/e,z=y+S,w=this.impulse;n.scale(r,w,c),a.applyImpulse(c),i.applyImpulse(c.invert()),this.normal.copy(r),this.distance=v,this.velocityBias=T,this.divisor=z,this.impulse=0},i.prototype.resolve=function(){var t=this.a,e=this.b,i=o,a=r,s=this.minLength,l=this.distance;if(!(Math.abs(l)<s)){var p=t.getVelocity(),c=e.getVelocity(),u=this.normal;n.subtract(c,p,a);var h=-(n.dot(u,a)+this.velocityBias)/this.divisor;n.scale(u,h,i),e.applyImpulse(i),t.applyImpulse(i.invert()),this.impulse+=h}},e.exports=i},{"../../math/Vec3":44,"./Constraint":58}],62:[function(t,e){function i(t,e,i){this.a=t,this.b=e,a.call(this,i),this.impulse=new n,this.angImpulseA=new n,this.angImpulseB=new n,this.error=new n,this.errorRot=[0,0],this.effMassMatrix=new s,this.effMassMatrixRot=[]}var a=t("./Constraint"),n=t("../../math/Vec3"),s=t("../../math/Mat33"),o=t("../../math/Quaternion"),r=new n,l=new n,p=new n,c=new n,u=new n,h=new n,d=new n,m=new n;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.init=function(){var t=this.anchor,e=this.axis.normalize(),i=this.a,a=this.b,s=o.conjugate(i.orientation,new o),r=o.conjugate(a.orientation,new o);this.rA=n.subtract(t,i.position,new n),this.rB=n.subtract(t,a.position,new n),this.bodyRA=s.rotateVector(this.rA,new n),this.bodyRB=r.rotateVector(this.rB,new n),this.axisA=n.clone(e),this.axisB=n.clone(e),this.axisBTangent1=new n,this.axisBTangent2=new n,this.t1xA=new n,this.t2xA=new n,this.bodyAxisA=s.rotateVector(e,new n),this.bodyAxisB=r.rotateVector(e,new n)},i.prototype.update=function(t,e){var i=this.a,a=this.b,o=i.orientation.rotateVector(this.bodyAxisA,this.axisA),u=a.orientation.rotateVector(this.bodyAxisB,this.axisB);this.axis.copy(u);var h=u,d=this.axisBTangent1,m=this.axisBTangent2;h.x>=.57735?d.set(h.y,-h.x,0):d.set(0,h.z,-h.y),d.normalize(),n.cross(h,d,m);var g=n.cross(d,o,this.t1xA),f=n.cross(m,o,this.t2xA),y=i.orientation.rotateVector(this.bodyRA,this.rA),_=a.orientation.rotateVector(this.bodyRB,this.rB),v=new s([0,y.z,-y.y,-y.z,0,y.x,y.y,-y.x,0]),S=new s([0,_.z,-_.y,-_.z,0,_.x,_.y,-_.x,0]),x=s.multiply(v,i.inverseInertia,new s).multiply(v.transpose()),A=s.multiply(S,a.inverseInertia,new s).multiply(S.transpose()),b=s.add(x,A,x),T=n.add(i.position,this.rA,this.anchor),z=n.add(a.position,this.rB,r),w=1/e;n.subtract(z,T,this.error),this.error.scale(.2*w);var R=i.inverseMass,O=a.inverseMass,C=new s([R+O,0,0,0,R+O,0,0,0,R+O]);s.add(b,C,this.effMassMatrix),this.effMassMatrix.inverse();var E=i.inverseInertia.vectorMultiply(g,r),X=i.inverseInertia.vectorMultiply(f,l),Y=a.inverseInertia.vectorMultiply(g,p),P=a.inverseInertia.vectorMultiply(f,c),M=n.dot(g,E)+n.dot(g,Y),I=n.dot(g,X)+n.dot(g,P),L=n.dot(f,E)+n.dot(f,Y),D=n.dot(f,X)+n.dot(f,P),k=1/(M*D-I*L);this.effMassMatrixRot[0]=D*k,this.effMassMatrixRot[1]=-L*k,this.effMassMatrixRot[2]=-I*k,this.effMassMatrixRot[3]=M*k,this.errorRot[0]=.2*n.dot(o,d)*w,this.errorRot[1]=.2*n.dot(o,m)*w;var F=this.impulse.scale(.5),U=this.angImpulseA.scale(.5),j=this.angImpulseB.scale(.5);a.applyImpulse(F),a.applyAngularImpulse(j),F.invert(),i.applyImpulse(F),i.applyAngularImpulse(U),F.clear(),U.clear(),j.clear()},i.prototype.resolve=function(){var t=this.a,e=this.b,i=this.rA,a=this.rB,s=this.t1xA,o=this.t2xA,g=t.angularVelocity,f=e.angularVelocity,y=n.add(t.velocity,n.cross(g,i,d),u),_=n.add(e.velocity,n.cross(f,a,d),h),v=y.subtract(_).subtract(this.error).applyMatrix(this.effMassMatrix),S=n.subtract(f,g,m),x=this.errorRot,A=n.dot(s,S)+x[0],b=n.dot(o,S)+x[1],T=this.effMassMatrixRot,z=-(T[0]*A+T[1]*b),w=-(T[2]*A+T[3]*b),R=n.scale(s,z,l).add(n.scale(o,w,p)),O=n.cross(a,v,r).add(R),C=n.cross(i,v,c).invert().subtract(R);e.applyImpulse(v),e.applyAngularImpulse(O),v.invert(),t.applyImpulse(v),t.applyAngularImpulse(C),v.invert(),this.impulse.add(v),this.angImpulseA.add(C),this.angImpulseB.add(O)},e.exports=i},{"../../math/Mat33":41,"../../math/Quaternion":42,"../../math/Vec3":44,"./Constraint":58}],63:[function(t,e){function i(t){this._body=t,this._ID=t._ID,this.position=null,this.vertices={x:[],y:[],z:[]},this.update()}var a=4,n=8,s=0,o=1,r=2,l=3,p=4,c=5;i.prototype.update=function(){var t=this._body,e=this.position=t.position,i=1/0,u=-(1/0),h=1/0,d=-(1/0),m=1/0,g=-(1/0),f=t.type;if(f===a)u=d=g=t.radius,i=h=m=-t.radius;else if(f===n){var y=t.direction;switch(u=d=g=1e6,i=h=m=-1e6,y){case s:d=25,h=-1e3;break;case o:d=1e3,h=-25;break;case r:u=25,i=-1e3;break;case l:u=1e3,i=-25;break;case p:g=25,m=-1e3;break;case c:g=1e3,m=-25}}else if(t.vertices)for(var _=t.vertices,v=0,S=_.length;S>v;v++){var x=_[v];x.x<i&&(i=x.x),x.x>u&&(u=x.x),x.y<h&&(h=x.y),x.y>d&&(d=x.y),x.z<m&&(m=x.z),x.z>g&&(g=x.z)}else u=d=g=25,i=h=m=-25;var A=this.vertices;A.x[0]=i+e.x,A.x[1]=u+e.x,A.y[0]=h+e.y,A.y[1]=d+e.y,A.z[0]=m+e.z,A.z[1]=g+e.z},i.checkOverlap=function(t,e){var i=t.vertices,a=e.vertices,n=i.x[0],s=i.x[1],o=a.x[0],r=a.x[1];if(n>=o&&r>=n||o>=n&&s>=o){var l=i.y[0],p=i.y[1],c=a.y[0],u=a.y[1];if(l>=c&&u>=l||c>=l&&p>=c){var h=i.z[0],d=i.z[1],m=a.z[0],g=a.z[1];if(h>=m&&g>=h||m>=h&&d>=m)return!0}}return!1},i.vertexThreshold=100,e.exports=i},{}],64:[function(t,e){function i(t){this._volumes=[],this._entityRegistry={};for(var e=0;e<t.length;e++)this.add(t[e])}function a(t){this.targets=t}var n=t("./AABB");i.prototype.add=function(t){var e=new n(t);this._entityRegistry[t._ID]=t,this._volumes.push(e)},i.prototype.update=function(){for(var t=this._volumes,e=this._entityRegistry,i=0,a=t.length;a>i;i++)t[i].update();for(var s=[],o=0,r=t.length;r>o;o++)for(var l=o+1;r>l;l++)n.checkOverlap(t[o],t[l])&&s.push([e[o],e[l]]);return s},a.prototype.add=function(t){this.targets.push(t)},a.prototype.update=function(){return[this.targets]},e.exports.BruteForceAABB=i,e.exports.BruteForce=a},{"./AABB":63}],65:[function(t,e){function i(t,e,i){return e>t?e:t>i?i:t}function a(){this.manifolds=[],this.collisionMatrix={},this._IDPool=[]}function n(t,e,i,a){this.lowID=t,this.highID=e,this.contacts=[],this.numContacts=0,this.bodyA=i,this.bodyB=a,this.lru=0}function s(t,e,i){this.bodyA=t,this.bodyB=e,this.data=i,this.normalImpulse=0,this.tangentImpulse1=0,this.tangentImpulse2=0,this.impulse=new o,this.angImpulseA=new o,this.angImpulseB=new o,i&&this.init()}var o=t("../../../math/Vec3"),r=t("../../../utilities/ObjectManager");r.register("Manifold",n),r.register("Contact",s);var l=r.requestManifold,p=r.requestContact,c=r.freeManifold,u=r.freeContact,h=new o,d=new o,m=new o,g=new o,f=new o,y=new o,_=new o,v=new o,S=new o,x=new o,A=new o,b=new o,T=new o,z=new o,w=new o;a.prototype.addManifold=function(t,e,i,a){var n=this.collisionMatrix;n[t]=n[t]||{};var s=this._IDPool.length?this._IDPool.pop():this.manifolds.length;this.collisionMatrix[t][e]=s;var o=l().reset(t,e,i,a);return this.manifolds[s]=o,o},a.prototype.removeManifold=function(t,e){var i=this.collisionMatrix;this.manifolds[e]=null,i[t.lowID][t.highID]=null,this._IDPool.push(e),c(t)},a.prototype.update=function(t){for(var e=this.manifolds,i=0,a=e.length;a>i;i++){var n=e[i];if(n){var s=n.update(t);s||(this.removeManifold(n,i),n.bodyA.events.trigger("collision:end",n),n.bodyB.events.trigger("collision:end",n))}}},a.prototype.prepContacts=function(t){for(var e=this.manifolds,i=0,a=e.length;a>i;i++){var n=e[i];if(n)for(var s=n.contacts,o=0,r=s.length;r>o;o++){var l=s[o];l&&l.update(t)}}},a.prototype.resolveManifolds=function(){for(var t=this.manifolds,e=0,i=t.length;i>e;e++){var a=t[e];a&&a.resolveContacts()}},a.prototype.registerContact=function(t,e,i){var a,n;t._ID<e._ID?(a=t._ID,n=e._ID):(a=e._ID,n=t._ID);var s,o=this.manifolds,r=this.collisionMatrix;r[a]&&null!=r[a][n]?(s=o[r[a][n]],s.contains(i),s.addContact(t,e,i)):(s=this.addManifold(a,n,t,e),s.addContact(t,e,i),t.events.trigger("collision:start",s),e.events.trigger("collision:start",s))};var R=10;n.prototype.reset=function(t,e,i,a){return this.lowID=t,this.highID=e,this.contacts=[],this.numContacts=0,this.bodyA=i,this.bodyB=a,this.lru=0,this},n.prototype.addContact=function(t,e,i){var a=this.lru;this.contacts[a]&&this.removeContact(this.contacts[a],a),this.contacts[a]=p().reset(t,e,i),this.lru=(this.lru+1)%4,this.numContacts++},n.prototype.removeContact=function(t,e){this.contacts[e]=null,this.numContacts--,r.freeCollisionData(t.data),t.data=null,u(t)},n.prototype.contains=function(t){for(var e=t.worldContactA,i=t.worldContactB,a=this.contacts,n=0,s=a.length;s>n;n++){var r=a[n];if(r){var l=r.data,p=o.subtract(l.worldContactA,e,z).length(),c=o.subtract(l.worldContactB,i,w).length();if(R>p||R>c)return this.removeContact(r,n),!0}}return!1},n.prototype.update=function(){for(var t=this.contacts,e=this.bodyA,i=this.bodyB,a=e.position,n=i.position,s=0,r=t.length;r>s;s++){var l=t[s];if(l){var p=l.data,c=p.normal,u=p.localContactA,h=p.localContactB,d=p.worldContactA,m=p.worldContactB,g=o.add(a,u,A),f=o.add(n,h,b),y=o.dot(o.subtract(f,g,T),c)>0,_=o.subtract(d,g,z),v=o.subtract(m,f,w);(_.length()>=R||v.length()>=R||y)&&this.removeContact(l,s)}}return this.numContacts?!0:!1},n.prototype.resolveContacts=function(){for(var t=this.contacts,e=0,i=t.length;i>e;e++)t[e]&&t[e].resolve()},s.prototype.reset=function(t,e,i){return this.bodyA=t,this.bodyB=e,this.data=i,this.normalImpulse=0,this.tangentImpulse1=0,this.tangentImpulse2=0,this.impulse.clear(),this.angImpulseA.clear(),this.angImpulseB.clear(),this.init(),this},s.prototype.init=function(){var t=this.data,e=t.normal,i=new o;e.x>=.57735?i.set(e.y,-e.x,0):i.set(0,e.z,-e.y),i.normalize();var a=o.cross(e,i,new o);this.tangent1=i,this.tangent2=a;var n=this.bodyA,s=this.bodyB,r=t.localContactA,l=t.localContactB,p=n.inverseMass+s.inverseMass,c=o.cross(r,e,y),u=o.cross(l,e,_);this.effNormalMass=1/(p+o.dot(c,n.inverseInertia.vectorMultiply(c,h))+o.dot(u,s.inverseInertia.vectorMultiply(u,h)));var d=o.cross(r,i,y),m=o.cross(l,i,_);this.effTangentialMass1=1/(p+o.dot(d,n.inverseInertia.vectorMultiply(d,h))+o.dot(m,s.inverseInertia.vectorMultiply(m,h)));var g=o.cross(r,a,y),f=o.cross(l,a,_);this.effTangentialMass2=1/(p+o.dot(g,n.inverseInertia.vectorMultiply(g,h))+o.dot(f,s.inverseInertia.vectorMultiply(f,h))),this.restitution=Math.min(n.restitution,s.restitution),this.friction=n.friction*s.friction},s.prototype.update=function(t){var e=this.data,i=this.bodyA,a=this.bodyB,n=e.localContactA,s=e.localContactB,r=e.normal,l=o.add(i.velocity,o.cross(i.angularVelocity,n,f),m),p=o.add(a.velocity,o.cross(a.angularVelocity,s,f),g),c=p.subtract(l),u=o.dot(c,r),h=.15,d=1.5,y=20,_=Math.abs(u)<y?0:this.restitution;this.velocityBias=-h*Math.max(e.penetration-d,0)/t,this.velocityBias+=_*u;var v=this.impulse.scale(.25),S=this.angImpulseA.scale(.25),x=this.angImpulseB.scale(.25);a.applyImpulse(v),a.applyAngularImpulse(x),v.invert(),i.applyImpulse(v),i.applyAngularImpulse(S),this.normalImpulse=0,this.tangentImpulse1=0,this.tangentImpulse2=0,v.clear(),S.clear(),x.clear()},s.prototype.resolve=function(){var t=this.data,e=this.bodyA,a=this.bodyB,n=t.localContactA,s=t.localContactB,r=t.normal,l=this.tangent1,p=this.tangent2,c=o.add(e.velocity,o.cross(e.angularVelocity,n,f),m),u=o.add(a.velocity,o.cross(a.angularVelocity,s,f),g),y=u.subtract(c),_=-(o.dot(y,r)+this.velocityBias)*this.effNormalMass,A=Math.max(this.normalImpulse+_,0);_=A-this.normalImpulse;var b=this.friction*A,T=-o.dot(y,l)*this.effTangentialMass1,z=i(this.tangentImpulse1+T,-b,b);T=z-this.tangentImpulse1;var w=-o.dot(y,p)*this.effTangentialMass2,R=i(this.tangentImpulse2+w,-b,b);w=R-this.tangentImpulse2;var O=o.scale(r,_,v),C=o.scale(l,T,S),E=o.scale(p,w,x);O.add(C).add(E);var X=o.cross(s,O,h),Y=o.cross(n,O,d).invert();a.applyImpulse(O),a.applyAngularImpulse(X),O.invert(),e.applyImpulse(O),e.applyAngularImpulse(Y),this.normalImpulse=A,this.tangentImpulse1=z,this.tangentImpulse2=R,this.impulse.add(O),this.angImpulseA.add(Y),this.angImpulseB.add(X)},e.exports=a},{"../../../math/Vec3":44,"../../../utilities/ObjectManager":93}],66:[function(t,e){function i(t,e,i){this.vertex=t,this.worldVertexA=e,this.worldVertexB=i}function a(t){var e,i=t.vertices;for(e=i.length;e--;){var a=i.pop();null!==a&&u(a)}t.numVertices=0;var n=t.features;for(e=n.length;e--;){var s=n.pop();null!==s&&d(s)}t.numFeatures=0,h(t)}function n(t,e,i){var a=r.scale(i,-1,v),n=r.add(t.support(i),t.position,new r),s=r.add(e.support(a),e.position,new r);return p().reset(r.subtract(n,s,new r),n,s)}function s(t,e){var i=n,s=r.subtract(e.position,t.position,_).normalize(),o=c();o.addVertex(i(t,e,s)),s.invert();for(var l=0,p=1e3;l++<p&&(0!==s.x||0!==s.y||0!==s.z)&&(o.addVertex(i(t,e,s)),!(r.dot(o.getLastVertex().vertex,s)<0));)if(o.simplexContainsOrigin(s,u))return o;return a(o),!1}function o(t,e,i){for(var s=n,o=1/0,p=0,c=1e3;p++<c;){var h=i.getFeatureClosestToOrigin();if(null===h)return null;var d=h.normal,_=s(t,e,d);if(o=Math.min(o,r.dot(_.vertex,d)),o-h.distance<=.01){var v=i.vertices[h.vertexIndices[0]],S=i.vertices[h.vertexIndices[1]],x=i.vertices[h.vertexIndices[2]],A=v.vertex,b=S.vertex,T=x.vertex,z=r.scale(d,h.distance,m),w=r.subtract(b,A,g),R=r.subtract(T,A,f),O=r.subtract(z,A,y),C=r.dot(w,w),E=r.dot(w,R),X=r.dot(R,R),Y=r.dot(O,w),P=r.dot(O,R),M=C*X-E*E,I=(X*Y-E*P)/M,L=(C*P-E*Y)/M,D=1-I-L,k=v.worldVertexA.scale(D).add(S.worldVertexA.scale(I)).add(x.worldVertexA.scale(L)),F=v.worldVertexB.scale(D).add(S.worldVertexB.scale(I)).add(x.worldVertexB.scale(L)),U=r.subtract(k,t.position,new r),j=r.subtract(F,e.position,new r);return a(i),u(_),l.requestCollisionData().reset(h.distance,d,k,F,U,j)}i.addVertex(_),i.reshape()}throw new Error("EPA failed to terminate in allotted iterations.")}var r=t("../../../math/Vec3"),l=t("../../../utilities/ObjectManager");l.register("GJK_EPASupportPoint",i);var p=l.requestGJK_EPASupportPoint,c=l.requestDynamicGeometry,u=l.freeGJK_EPASupportPoint,h=l.freeDynamicGeometry,d=l.freeDynamicGeometryFeature,m=new r,g=new r,f=new r,y=new r,_=new r,v=new r;i.prototype.reset=function(t,e,i){return this.vertex=t,this.worldVertexA=e,this.worldVertexB=i,this},e.exports.gjk=s,e.exports.epa=o},{"../../../math/Vec3":44,"../../../utilities/ObjectManager":93}],67:[function(t,e){function i(t){this._sweepVolumes=[],this._entityRegistry={},this._boundingVolumeRegistry={},this.endpoints={x:[],y:[],z:[]},this.overlaps=[],this.overlapsMatrix={},this._IDPool=[],t=t||[];for(var e=0;e<t.length;e++)this.add(t[e])}function a(t){this._boundingVolume=t,this._ID=t._ID,this.points={x:[{_ID:t._ID,side:0,value:null},{_ID:t._ID,side:1,value:null}],y:[{_ID:t._ID,side:0,value:null},{_ID:t._ID,side:1,value:null}],z:[{_ID:t._ID,side:0,value:null},{_ID:t._ID,side:1,value:null}]},this.update()}var n=t("./AABB"),s=["x","y","z"];i.prototype.add=function(t){var e=new n(t),i=new a(e);this._entityRegistry[t._ID]=t,this._boundingVolumeRegistry[t._ID]=e,this._sweepVolumes.push(i);for(var o=0;3>o;o++){var r=s[o];this.endpoints[r].push(i.points[r][0]),this.endpoints[r].push(i.points[r][1])}},i.prototype.remove=function(t){this._entityRegistry[t._ID]=null,this._boundingVolumeRegistry[t._ID]=null;var e,i,a;for(e=0,i=this._sweepVolumes.length;i>e;e++)if(this._sweepVolumes[e]._ID===t._ID){a=e;break}this._sweepVolumes.splice(a,1);var n,s=this.endpoints,o=[];for(e=0,i=s.x.length;i>e;e++)n=s.x[e],n._ID!==t._ID&&o.push(n);var r=[];for(e=0,i=s.y.length;i>e;e++)n=s.y[e],n._ID!==t._ID&&r.push(n);var l=[];for(e=0,i=s.z.length;i>e;e++)n=s.z[e],n._ID!==t._ID&&l.push(n);s.x=o,s.y=r,s.z=l},i.prototype.update=function(){var t,e,i,a,o=this._sweepVolumes,r=this._entityRegistry,l=this._boundingVolumeRegistry;for(e=0,a=o.length;a>e;e++)o[e].update();var p=this.endpoints,c=this.overlaps,u=this.overlapsMatrix,h=this._IDPool;
for(i=0;3>i;i++){var d=s[i],m=p[d];for(e=1,a=m.length;a>e;e++){var g,f,y,_,v,S,x,A=m[e],b=A.value;for(t=e-1;t>=0&&(g=m[t]).value>b;)S=A._ID,x=g._ID,x>S?(_=S,v=x):(_=x,v=S),~A.side&g.side?n.checkOverlap(l[S],l[x])&&(f=u[_]=u[_]||{},y=f[v]=h.length?h.pop():c.length,c[y]=[r[_],r[v]]):A.side&~g.side&&(f=u[_])&&null!=f[v]&&(y=f[v],c[y]=null,f[v]=null,h.push(y)),m[t+1]=g,t--;m[t+1]=A}}return c},a.prototype.update=function(){var t=this._boundingVolume;t.update();for(var e=this.points,i=0;3>i;i++){var a=s[i];e[a][0].value=t.vertices[a][0],e[a][1].value=t.vertices[a][1]}},e.exports=i},{"./AABB":63}],68:[function(t,e){function i(t,e){a.call(this,t,e)}var a=t("./Force"),n=t("../../math/Vec3"),s=new n;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.QUADRATIC=function(t){return t*t},i.LINEAR=function(t){return t},i.prototype.init=function(){this.max=this.max||1/0,this.strength=this.strength||1,this.type=this.type||i.LINEAR},i.prototype.update=function(){for(var t=this.targets,e=this.type,i=s,a=this.max,o=this.strength,r=0,l=t.length;l>r;r++){var p=t[r],c=p.velocity,u=c.length(),h=u?1/u:0,d=-o*e(u);n.scale(c,(-a>d?-a:d)*h,i),p.applyForce(i)}},e.exports=i},{"../../math/Vec3":44,"./Force":69}],69:[function(t,e){function i(t,e){this.targets=t?t instanceof Array?t:[t]:[],e=e||{},this.setOptions(e),this._ID=a++}var a=0;i.prototype.setOptions=function(t){for(var e in t)this[e]=t[e];this.init(t)},i.prototype.addTarget=function(t){this.targets.push(t)},i.prototype.removeTarget=function(t){var e=this.targets.indexOf(t);0>e||this.targets.splice(e,1)},i.prototype.init=function(){},i.prototype.update=function(){},e.exports=i},{}],70:[function(t,e){function i(t,e){a.call(this,t,e)}var a=t("./Force"),n=t("../../math/Vec3"),s=new n;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.DOWN=0,i.UP=1,i.LEFT=2,i.RIGHT=3,i.FORWARD=4,i.BACKWARD=5,i.prototype.init=function(t){if(this.max=this.max||1/0,t.acceleration)return this.strength=this.acceleration.length(),void(this.direction=-1);var e=this.acceleration=new n,a=this.direction=this.direction||i.DOWN,s=this.strength=this.strength||200;switch(a){case i.DOWN:e.set(0,s,0);break;case i.UP:e.set(0,-1*s,0);break;case i.LEFT:e.set(-1*s,0,0);break;case i.RIGHT:e.set(s,0,0);break;case i.FORWARD:e.set(0,0,-1*s);break;case i.BACKWARD:e.set(0,0,s)}},i.prototype.update=function(){for(var t=this.targets,e=s,i=this.max,a=this.acceleration,o=a.length(),r=o?1/o:0,l=0,p=t.length;p>l;l++){var c=t[l],u=o*c.mass;n.scale(a,(u>i?i:u)*r,e),c.applyForce(e)}},e.exports=i},{"../../math/Vec3":44,"./Force":69}],71:[function(t,e){function i(t,e,i){this.source=t||null,a.call(this,e,i)}var a=t("./Force"),n=t("../../math/Vec3"),s=new n;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.init=function(){this.max=this.max||1/0,this.strength=this.strength||200},i.prototype.update=function(){for(var t=this.source,e=this.targets,i=s,a=this.strength,o=this.max,r=this.anchor||t.position,l=this.anchor?1:t.mass,p=0,c=e.length;c>p;p++){var u=e[p];n.subtract(r,u.position,i);var h=i.length(),d=h?1/h:0,m=a*l*u.mass*d*d;m=0>m?-o>m?-o:m:m>o?o:m,i.scale(m*d),u.applyForce(i),t&&t.applyForce(i.invert())}},e.exports=i},{"../../math/Vec3":44,"./Force":69}],72:[function(t,e){function i(t,e){a.call(this,t,e)}var a=t("./Force"),n=t("../../math/Vec3"),s=new n;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.QUADRATIC=function(t){return t.length()},i.LINEAR=function(){return 1},i.prototype.init=function(){this.max=this.max||1/0,this.strength=this.strength||1,this.type=this.type||i.LINEAR},i.prototype.update=function(){for(var t=this.targets,e=this.type,i=s,a=this.max,o=this.strength,r=0,l=t.length;l>r;r++){var p=t[r],c=p.angularVelocity,u=-o*e(c);n.scale(c,-a>u?-a:u,i),p.applyTorque(i)}},e.exports=i},{"../../math/Vec3":44,"./Force":69}],73:[function(t,e){function i(t,e,i){this.source=t||null,a.call(this,e,i)}var a=t("./Force"),n=t("../../math/Vec3"),s=t("../../math/Mat33"),o=t("../../math/Quaternion"),r=new o,l=new n,p=new n,c=new s,u=Math.PI;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.init=function(t){this.source||(this.anchor=this.anchor?this.anchor.normalize():new o(1,0,0,0)),t.stiffness||t.damping?(this.stiffness=this.stiffness||100,this.damping=this.damping||0,this.period=null,this.dampingRatio=null):(t.period||t.dampingRatio)&&(this.period=this.period||1,this.dampingRatio=this.dampingRatio||0,this.stiffness=2*u/this.period,this.stiffness*=this.stiffness,this.damping=4*u*this.dampingRatio/this.period)},i.prototype.update=function(){for(var t=this.source,e=this.targets,i=r,a=l,u=p,h=c,d=this.max,m=this.stiffness,g=this.damping,f=this.anchor||t.orientation,y=this.anchor?null:t.inverseInertia,_=0,v=e.length;v>_;_++){var S=e[_],x=S.orientation;if(o.conjugate(x,i),i.multiply(f),!(i.w>=1)){var A=Math.acos(i.w),b=Math.sqrt(1-i.w*i.w),T=u.copy(i).scale(2*A/b);T.scale(m),null!==y?s.add(y,S.inverseInertia,h).inverse():s.inverse(S.inverseInertia,h),0!==g&&T.add(t?n.subtract(S.angularVelocity,t.angularVelocity,a).scale(-g):n.scale(S.angularVelocity,-g,a));var z=T.applyMatrix(h),w=z.length();w>d&&z.scale(d/w),S.applyTorque(z),t&&t.applyTorque(z.invert())}}},e.exports=i},{"../../math/Mat33":41,"../../math/Quaternion":42,"../../math/Vec3":44,"./Force":69}],74:[function(t,e){function i(t,e,i){this.source=t||null,a.call(this,e,i)}var a=t("./Force"),n=t("../../math/Vec3"),s=new n,o=new n;i.prototype=Object.create(a.prototype),i.prototype.constructor=i;var r=Math.PI;i.FENE=function(t,e){var i=.99*e,a=Math.max(Math.min(t,i),-i);return a/(1-a*a/(e*e))},i.HOOKE=function(t){return t},i.prototype.init=function(t){this.max=this.max||1/0,this.length=this.length||0,this.type=this.type||i.HOOKE,this.maxLength=this.maxLength||1/0,t.stiffness||t.damping?(this.stiffness=this.stiffness||100,this.damping=this.damping||0,this.period=null,this.dampingRatio=null):(t.period||t.dampingRatio)&&(this.period=this.period||1,this.dampingRatio=this.dampingRatio||0,this.stiffness=2*r/this.period,this.stiffness*=this.stiffness,this.damping=4*r*this.dampingRatio/this.period)},i.prototype.update=function(){for(var t=this.source,e=this.targets,i=s,a=o,r=this.max,l=this.stiffness,p=this.damping,c=this.length,u=this.maxLength,h=this.anchor||t.position,d=this.anchor?0:t.inverseMass,m=this.type,g=0,f=e.length;f>g;g++){var y=e[g];n.subtract(h,y.position,i);var _=i.length(),v=_-c;if(!(Math.abs(v)<1e-6)){var S=1/(y.inverseMass+d);null!==this.period&&(l*=S,p*=S),i.scale(l*m(v,u)/v),0!==p&&i.add(t?n.subtract(y.velocity,t.velocity,a).scale(-p):n.scale(y.velocity,-p,a));var x=i.length(),A=x?1/x:0;n.scale(i,(x>r?r:x)*A,i),y.applyForce(i),t&&t.applyForce(i.invert())}}},e.exports=i},{"../../math/Vec3":44,"./Force":69}],75:[function(t,e){e.exports={Particle:t("./bodies/Particle"),convexBodyFactory:t("./bodies/convexBodyFactory"),Box:t("./bodies/Box"),Sphere:t("./bodies/Sphere"),Wall:t("./bodies/Wall"),Constraint:t("./constraints/Constraint"),Angle:t("./constraints/Angle"),Collision:t("./constraints/Collision"),Direction:t("./constraints/Direction"),Distance:t("./constraints/Distance"),Curve:t("./constraints/Curve"),Hinge:t("./constraints/Hinge"),BallAndSocket:t("./constraints/BallAndSocket"),Force:t("./forces/Force"),Drag:t("./forces/Drag"),RotationalDrag:t("./forces/RotationalDrag"),Gravity1D:t("./forces/Gravity1D"),Gravity3D:t("./forces/Gravity3D"),Spring:t("./forces/Spring"),RotationalSpring:t("./forces/RotationalSpring"),PhysicsEngine:t("./PhysicsEngine"),Geometry:t("./Geometry")}},{"./Geometry":48,"./PhysicsEngine":49,"./bodies/Box":50,"./bodies/Particle":51,"./bodies/Sphere":52,"./bodies/Wall":53,"./bodies/convexBodyFactory":54,"./constraints/Angle":55,"./constraints/BallAndSocket":56,"./constraints/Collision":57,"./constraints/Constraint":58,"./constraints/Curve":59,"./constraints/Direction":60,"./constraints/Distance":61,"./constraints/Hinge":62,"./forces/Drag":68,"./forces/Force":69,"./forces/Gravity1D":70,"./forces/Gravity3D":71,"./forces/RotationalDrag":72,"./forces/RotationalSpring":73,"./forces/Spring":74}],76:[function(t,e){var i,a,n=0,s=["ms","moz","webkit","o"];if("object"==typeof window){i=window.requestAnimationFrame,a=window.cancelAnimationFrame||window.cancelRequestAnimationFrame;for(var o=0;o<s.length&&!i;++o)i=window[s[o]+"RequestAnimationFrame"],a=window[s[o]+"CancelRequestAnimationFrame"]||window[s[o]+"CancelAnimationFrame"];i&&!a&&(i=null)}if(!i){var r=Date.now?Date.now:function(){return(new Date).getTime()};i=function(t){var e=r(),i=Math.max(0,16-(e-n)),a=setTimeout(function(){t(e+i)},i);return n=e+i,a},a=function(t){clearTimeout(t)}}var l={requestAnimationFrame:i,cancelAnimationFrame:a};e.exports=l},{}],77:[function(t,e){e.exports={requestAnimationFrame:t("./animationFrame").requestAnimationFrame,cancelAnimationFrame:t("./animationFrame").cancelAnimationFrame}},{"./animationFrame":76}],78:[function(t,e){function i(){this._updates=[],this._stoppedAt=a(),this._sleep=0,this.start();var t=this;window.addEventListener("message",function(e){t._onWindowMessage(e)})}var a=t("./now");i.prototype._onWindowMessage=function(t){this._running&&t.data.constructor===Array&&"FRAME"===t.data[0]&&this.step(t.data[1]-this._sleep)},i.prototype.start=function(){return this._running=!0,this._sleep+=a()-this._stoppedAt,this},i.prototype.stop=function(){return this._running=!1,this._stoppedAt=a(),this},i.prototype.isRunning=function(){return this._running},i.prototype.step=function(t){for(var e=0,i=this._updates.length;i>e;e++)this._updates[e].update(t);return this},i.prototype.update=function(t){return-1===this._updates.indexOf(t)&&this._updates.push(t),this},i.prototype.noLongerUpdate=function(t){var e=this._updates.indexOf(t);return e>-1&&this._updates.splice(e,1),this},e.exports=i},{"./now":81}],79:[function(t,e){function i(){var t=this;this._updates=[],this._looper=function(e){t.loop(e)},this._time=0,this._stoppedAt=0,this._sleep=0,this._startOnVisibilityChange=!0,this._rAF=null,this._sleepDiff=!0,this.start(),o&&document.addEventListener(l,function(){t._onVisibilityChange()})}var a=t("../polyfills"),n=a.requestAnimationFrame,s=a.cancelAnimationFrame,o="undefined"!=typeof document;if(o){var r,l;"undefined"!=typeof document.hidden?(r="hidden",l="visibilitychange"):"undefined"!=typeof document.mozHidden?(r="mozHidden",l="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(r="msHidden",l="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(r="webkitHidden",l="webkitvisibilitychange")}i.prototype._onVisibilityChange=function(){document[r]?this._onUnfocus():this._onFocus()},i.prototype._onFocus=function(){this._startOnVisibilityChange&&this._start()},i.prototype._onUnfocus=function(){this._stop()},i.prototype.start=function(){return this._running||(this._startOnVisibilityChange=!0,this._start()),this},i.prototype._start=function(){this._running=!0,this._sleepDiff=!0,this._rAF=n(this._looper)},i.prototype.stop=function(){return this._running&&(this._startOnVisibilityChange=!1,this._stop()),this},i.prototype._stop=function(){this._running=!1,this._stoppedAt=this._time,s(this._rAF)},i.prototype.isRunning=function(){return this._running},i.prototype.step=function(t){this._time=t,this._sleepDiff&&(this._sleep+=t-this._stoppedAt,this._sleepDiff=!1);for(var e=t-this._sleep,i=0,a=this._updates.length;a>i;i++)this._updates[i].update(e);return this},i.prototype.loop=function(t){return this.step(t),this._rAF=n(this._looper),this},i.prototype.update=function(t){return-1===this._updates.indexOf(t)&&this._updates.push(t),this},i.prototype.noLongerUpdate=function(t){var e=this._updates.indexOf(t);return e>-1&&this._updates.splice(e,1),this},e.exports=i},{"../polyfills":77}],80:[function(t,e){e.exports={RequestAnimationFrameLoop:t("./RequestAnimationFrameLoop"),ContainerLoop:t("./ContainerLoop"),now:t("./now")}},{"./ContainerLoop":78,"./RequestAnimationFrameLoop":79,"./now":81}],81:[function(t,e){var i=window.performance&&window.performance.now?function(){return window.performance.now()}:Date.now;e.exports=i},{}],82:[function(t,e){function i(){n(),this._contexts={},this._outCommands=[],this._inCommands=[],this._time=null,this._resized=!1;var t=this;window.addEventListener("resize",function(){t._resized=!0})}var a=t("./Context"),n=t("./inject-css");i.prototype.getTime=function(){return this._time},i.prototype.sendEvent=function(t,e,i){this._outCommands.push("WITH",t,"TRIGGER",e,i)},i.prototype.sendResize=function(t,e){this.sendEvent(t,"CONTEXT_RESIZE",e)},i.prototype.handleWith=function(t,e){var i=e[t],a=i.split("/"),n=this.getOrSetContext(a.shift());return n.receive(i,e,t)},i.prototype.getOrSetContext=function(t){if(this._contexts[t])return this._contexts[t];var e=new a(t,this);return this._contexts[t]=e,e},i.prototype.giveSizeFor=function(t,e){var i=e[t],a=this.getOrSetContext(i).getRootSize();this.sendResize(i,a)},i.prototype.drawCommands=function(){for(var t=this._inCommands,e=0,i=t[e];i;){switch(i){case"TIME":this._time=t[++e];break;case"WITH":e=this.handleWith(++e,t);break;case"NEED_SIZE_FOR":this.giveSizeFor(++e,t)}i=t[++e]}for(var a in this._contexts)this._contexts[a].draw();return this._resized&&this.updateSize(),this._outCommands},i.prototype.updateSize=function(){for(var t in this._contexts)this._contexts[t].updateSize()},i.prototype.receiveCommands=function(t){for(var e=t.length,i=0;e>i;i++)this._inCommands.push(t[i])},i.prototype.clearCommands=function(){this._inCommands.length=0,this._outCommands.length=0,this._resized=!1},e.exports=i},{"./Context":83,"./inject-css":86}],83:[function(t,e){function i(t,e){this._compositor=e,this._rootEl=document.querySelector(t),this._selector=t;var i=document.createElement("div");this._rootEl.appendChild(i),this.DOMRenderer=new s(i,t,e),this.WebGLRenderer=null,this.canvas=null,this._renderState={projectionType:n.ORTHOGRAPHIC_PROJECTION,perspectiveTransform:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),viewTransform:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),viewDirty:!1,perspectiveDirty:!1},this._size=[],this._children={},this._elementHash={},this._meshTransform=[],this._meshSize=[0,0,0]}var a=t("../webgl-renderers/WebGLRenderer"),n=t("../components/Camera"),s=t("../dom-renderers/DOMRenderer");i.prototype.updateSize=function(){var t=this.DOMRenderer.getSize();this._compositor.sendResize(this._selector,t);var e=t[0],i=t[1];return this._size[0]=e,this._size[1]=i,this._size[2]=e>i?e:i,this.canvas&&(this.canvas.width=e,this.canvas.height=i),this.WebGLRenderer&&this.WebGLRenderer.updateSize(this._size),this},i.prototype.draw=function(){this.DOMRenderer.draw(this._renderState),this.WebGLRenderer&&this.WebGLRenderer.draw(this._renderState),this._renderState.perspectiveDirty&&(this._renderState.perspectiveDirty=!1),this._renderState.viewDirty&&(this._renderState.viewDirty=!1)},i.prototype.getRootSize=function(){return this.DOMRenderer.getSize()},i.prototype.initWebGL=function(){this.canvas=document.createElement("canvas"),this._rootEl.appendChild(this.canvas),this.WebGLRenderer=new a(this.canvas,this._compositor),this.updateSize()},i.prototype.receive=function(t,e,i){var a=i,s=e[++a];for(this.DOMRenderer.loadPath(t),this.DOMRenderer.findTarget();s;){switch(s){case"INIT_DOM":this.DOMRenderer.insertEl(e[++a]);break;case"DOM_RENDER_SIZE":this.DOMRenderer.getSizeOf(e[++a]);break;case"CHANGE_TRANSFORM":for(var o=0;16>o;o++)this._meshTransform[o]=e[++a];this.DOMRenderer.setMatrix(this._meshTransform),this.WebGLRenderer&&this.WebGLRenderer.setCutoutUniform(t,"u_transform",this._meshTransform);break;case"CHANGE_SIZE":var r=e[++a],l=e[++a];this.DOMRenderer.setSize(r,l),this.WebGLRenderer&&(this._meshSize[0]=r,this._meshSize[1]=l,this.WebGLRenderer.setCutoutUniform(t,"u_size",this._meshSize));break;case"CHANGE_PROPERTY":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.setProperty(e[++a],e[++a]);break;case"CHANGE_CONTENT":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.setContent(e[++a]);break;case"CHANGE_ATTRIBUTE":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.setAttribute(e[++a],e[++a]);break;case"ADD_CLASS":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.addClass(e[++a]);break;case"REMOVE_CLASS":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.removeClass(e[++a]);break;case"SUBSCRIBE":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.subscribe(e[++a],e[++a]);break;case"GL_SET_DRAW_OPTIONS":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setMeshOptions(t,e[++a]);break;case"GL_AMBIENT_LIGHT":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setAmbientLightColor(t,e[++a],e[++a],e[++a]);break;case"GL_LIGHT_POSITION":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setLightPosition(t,e[++a],e[++a],e[++a]);break;case"GL_LIGHT_COLOR":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setLightColor(t,e[++a],e[++a],e[++a]);break;case"MATERIAL_INPUT":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.handleMaterialInput(t,e[++a],e[++a]);break;case"GL_SET_GEOMETRY":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setGeometry(t,e[++a],e[++a],e[++a]);break;case"GL_UNIFORMS":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setMeshUniform(t,e[++a],e[++a]);break;case"GL_BUFFER_DATA":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.bufferData(t,e[++a],e[++a],e[++a],e[++a],e[++a]);break;case"GL_CUTOUT_STATE":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setCutoutState(t,e[++a]);break;case"GL_MESH_VISIBILITY":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setMeshVisibility(t,e[++a]);break;case"GL_REMOVE_MESH":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.removeMesh(t);break;case"PINHOLE_PROJECTION":this._renderState.projectionType=n.PINHOLE_PROJECTION,this._renderState.perspectiveTransform[11]=-1/e[++a],this._renderState.perspectiveDirty=!0;break;case"ORTHOGRAPHIC_PROJECTION":this._renderState.projectionType=n.ORTHOGRAPHIC_PROJECTION,this._renderState.perspectiveTransform[11]=0,this._renderState.perspectiveDirty=!0;break;case"CHANGE_VIEW_TRANSFORM":this._renderState.viewTransform[0]=e[++a],this._renderState.viewTransform[1]=e[++a],this._renderState.viewTransform[2]=e[++a],this._renderState.viewTransform[3]=e[++a],this._renderState.viewTransform[4]=e[++a],this._renderState.viewTransform[5]=e[++a],this._renderState.viewTransform[6]=e[++a],this._renderState.viewTransform[7]=e[++a],this._renderState.viewTransform[8]=e[++a],this._renderState.viewTransform[9]=e[++a],this._renderState.viewTransform[10]=e[++a],this._renderState.viewTransform[11]=e[++a],this._renderState.viewTransform[12]=e[++a],this._renderState.viewTransform[13]=e[++a],this._renderState.viewTransform[14]=e[++a],this._renderState.viewTransform[15]=e[++a],this._renderState.viewDirty=!0;break;case"WITH":return a-1}s=e[++a]}return a},e.exports=i},{"../components/Camera":2,"../dom-renderers/DOMRenderer":25,"../webgl-renderers/WebGLRenderer":131}],84:[function(t,e){function i(t,e,i){this._thread=t,this._compositor=e,this._renderLoop=i,this._renderLoop.update(this);var a=this;this._thread.onmessage=function(t){var e=t.data?t.data:t;if("ENGINE"===e[0])switch(e[1]){case"START":a._renderLoop.start();break;case"STOP":a._renderLoop.stop();break;default:console.error('Unknown ENGINE command "'+e[1]+'"')}else a._compositor.receiveCommands(e)},this._thread.onerror=function(t){console.error(t)}}i.prototype.getThread=function(){return this._thread},i.prototype.getCompositor=function(){return this._compositor},i.prototype.getEngine=function(){return this._renderLoop},i.prototype.update=function(t){this._thread.postMessage(["FRAME",t]);var e=this._compositor.drawCommands();this._thread.postMessage(e),this._compositor.clearCommands()},e.exports=i},{}],85:[function(t,e){e.exports={Compositor:t("./Compositor"),Context:t("./Context"),UIManager:t("./UIManager"),injectCSS:t("./inject-css")}},{"./Compositor":82,"./Context":83,"./UIManager":84,"./inject-css":86}],86:[function(t,e){function i(){if(!n)if(n=!0,document.createStyleSheet){var t=document.createStyleSheet();t.cssText=a}else{var e=document.getElementsByTagName("head")[0],i=document.createElement("style");i.styleSheet?i.styleSheet.cssText=a:i.appendChild(document.createTextNode(a)),(e?e:document.documentElement).appendChild(i)}}var a=".famous-dom-renderer {width:100%;height:100%;transform-style:preserve-3d;-webkit-transform-style:preserve-3d;}.famous-dom-element {-webkit-transform-origin:0% 0%;transform-origin:0% 0%;-webkit-backface-visibility:visible;backface-visibility:visible;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-tap-highlight-color:transparent;pointer-events:auto;z-index:1;}.famous-dom-element-content,.famous-dom-element {position:absolute;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}.famous-webgl-renderer {-webkit-transform: translateZ(1000000px);transform: translateZ(1000000px)pointer-events:none;position:absolute;z-index:1;top:0;left:0;}",n="undefined"==typeof document;e.exports=i},{}],87:[function(t,e){var i={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t},inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,i=0,a=1;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/a),-(a*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)))},outElastic:function(t){var e=1.70158,i=0,a=1;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/i)+1)},inOutElastic:function(t){var e=1.70158,i=0,a=1;return 0===t?0:2===(t/=.5)?1:(i||(i=.3*1.5),e=i/(2*Math.PI)*Math.asin(1/a),1>t?-.5*a*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):a*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)},inBack:function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},outBack:function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0===e&&(e=1.70158),(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},inBounce:function(t){return 1-i.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*i.inBounce(2*t):.5*i.outBounce(2*t-1)+.5},flat:function(){return 0}};e.exports=i},{}],88:[function(t,e){function i(t){this._queue=[],this._from=null,this._state=null,this._startedAt=null,this._pausedAt=null,null!=t&&this.from(t)}var a=t("./Curves"),n=t("../core/FamousEngine");i.Clock=n.getClock(),i.prototype.to=function(t,e,i,n,s){return e=null!=e&&e.constructor===String?a[e]:e,0===this._queue.length&&(this._startedAt=this.constructor.Clock.now(),this._pausedAt=null),this._queue.push(t,null!=e?e:a.linear,null!=i?i:100,n,s),this},i.prototype.from=function(t){return this._state=t,this._from=this._sync(null,this._state),this._queue.length=0,this._startedAt=this.constructor.Clock.now(),this._pausedAt=null,this},i.prototype.delay=function(t,e){var i=this._queue.length>0?this._queue[this._queue.length-5]:this._state;return this.to(i,a.flat,t,e)},i.prototype.override=function(t,e,i,n,s){return this._queue.length>0&&(null!=t&&(this._queue[0]=t),null!=e&&(this._queue[1]=e.constructor===String?a[e]:e),null!=i&&(this._queue[2]=i),null!=n&&(this._queue[3]=n),null!=s&&(this._queue[4]=s)),this},i.prototype._interpolate=function(t,e,i,a,n){if(i instanceof Object)if("slerp"===n){var s,o,r,l,p,c,u,h,d,m,g,f,y;if(s=e[0],o=e[1],r=e[2],l=e[3],p=i[0],c=i[1],u=i[2],h=i[3],1===a)return t[0]=p,t[1]=c,t[2]=u,t[3]=h,t;m=l*h+s*p+o*c+r*u,1-m>1e-5?(d=Math.acos(m),g=Math.sin(d),f=Math.sin((1-a)*d)/g,y=Math.sin(a*d)/g):(f=1-a,y=a),t[0]=s*f+p*y,t[1]=o*f+c*y,t[2]=r*f+u*y,t[3]=l*f+h*y}else if(i instanceof Array)for(var _=0,v=i.length;v>_;_++)t[_]=this._interpolate(t[_],e[_],i[_],a,n);else for(var S in i)t[S]=this._interpolate(t[S],e[S],i[S],a,n);else t=e+a*(i-e);return t},i.prototype._sync=function s(t,e){if("number"==typeof e)t=e;else if(e instanceof Array){null==t&&(t=[]);for(var i=0,a=e.length;a>i;i++)t[i]=s(t[i],e[i])}else if(e instanceof Object){null==t&&(t={});for(var n in e)t[n]=s(t[n],e[n])}return t},i.prototype.get=function(t){if(0===this._queue.length)return this._state;t=this._pausedAt?this._pausedAt:t,t=t?t:this.constructor.Clock.now();var e=(t-this._startedAt)/this._queue[2];this._state=this._interpolate(this._state,this._from,this._queue[0],this._queue[1](e>1?1:e),this._queue[4]);var i=this._state;if(e>=1){this._startedAt=this._startedAt+this._queue[2],this._from=this._sync(this._from,this._state),this._queue.shift(),this._queue.shift(),this._queue.shift();var a=this._queue.shift();this._queue.shift(),a&&a()}return e>1?this.get():i},i.prototype.isActive=function(){return this._queue.length>0},i.prototype.halt=function(){return this.from(this.get())},i.prototype.pause=function(){return this._pausedAt=this.constructor.Clock.now(),this},i.prototype.isPaused=function(){return!!this._pausedAt},i.prototype.resume=function(){var t=this._pausedAt-this._startedAt;return this._startedAt=this.constructor.Clock.now()-t,this._pausedAt=null,this},i.prototype.reset=function(t){return this.from(t)},i.prototype.set=function(t,e,i){return null==e?(this.from(t),i&&i()):this.to(t,e.curve,e.duration,i,e.method),this},e.exports=i},{"../core/FamousEngine":17,"./Curves":87}],89:[function(t,e){e.exports={Curves:t("./Curves"),Transitionable:t("./Transitionable")}},{"./Curves":87,"./Transitionable":88}],90:[function(t,e){function i(){this._events={}}i.prototype.on=function(t,e){this._events[t]||(this._events[t]=[]);var i=this._events[t];return i.push(e),function(){i.splice(i.indexOf(e),1)}},i.prototype.off=function(t,e){var i=this._events[t];return i&&i.splice(i.indexOf(e),1),this},i.prototype.trigger=function(t,e){var i=this._events[t];if(i)for(var a=0,n=i.length;n>a;a++)i[a](e);return this},e.exports=i},{}],91:[function(t,e){function i(t,e,i){this._r=new a(0),this._g=new a(0),this._b=new a(0),this._opacity=new a(1),t&&this.set(t,e,i)}var a=t("../transitions/Transitionable");i.prototype.toString=function(){return"Color"},i.prototype.set=function(t,e,a){switch(i.determineType(t)){case"hex":return this.setHex(t,e,a);case"colorName":return this.setColor(t,e,a);case"instance":return this.changeTo(t,e,a);case"rgb":return this.setRGB(t[0],t[1],t[2],e,a)}return this},i.prototype.isActive=function(){return this._r.isActive()||this._g.isActive()||this._b.isActive()||this._opacity.isActive()},i.prototype.halt=function(){return this._r.halt(),this._g.halt(),this._b.halt(),this._opacity.halt(),this},i.prototype.changeTo=function(t,e,a){if(i.isColorInstance(t)){var n=t.getRGB();this.setRGB(n[0],n[1],n[2],e,a)}return this},i.prototype.setColor=function(t,e,i){return n[t]&&this.setHex(n[t],e,i),this},i.prototype.getColor=function(t){return i.isString(t)&&(t=t.toLowerCase()),"hex"===t?this.getHex():this.getRGB()},i.prototype.setR=function(t,e,i){return this._r.set(t,e,i),this},i.prototype.setG=function(t,e,i){return this._g.set(t,e,i),this},i.prototype.setB=function(t,e,i){return this._b.set(t,e,i),this},i.prototype.setOpacity=function(t,e,i){return this._opacity.set(t,e,i),this},i.prototype.setRGB=function(t,e,i,a,n){return this.setR(t,a),this.setG(e,a),this.setB(i,a,n),this},i.prototype.getR=function(){return this._r.get()},i.prototype.getG=function(){return this._g.get()},i.prototype.getB=function(){return this._b.get()},i.prototype.getOpacity=function(){return this._opacity.get()},i.prototype.getRGB=function(){return[this.getR(),this.getG(),this.getB()]},i.prototype.getNormalizedRGB=function(){var t=this.getR()/255,e=this.getG()/255,i=this.getB()/255;return[t,e,i]},i.prototype.getNormalizedRGBA=function(){var t=this.getR()/255,e=this.getG()/255,i=this.getB()/255,a=this.getOpacity();return[t,e,i,a]},i.prototype.getHex=function(){var t=i.toHex(this.getR()),e=i.toHex(this.getG()),a=i.toHex(this.getB());return"#"+t+e+a},i.prototype.setHex=function(t,e,i){if(t="#"===t.charAt(0)?t.substring(1,t.length):t,3===t.length){var a=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(a,function(t,e,i,a){return e+e+i+i+a+a})}var n=parseInt(t.substring(0,2),16),s=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);return this.setRGB(n,s,o,e,i),this},i.toHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},i.determineType=function(t){return i.isColorInstance(t)?"instance":n[t]?"colorName":i.isHex(t)?"hex":Array.isArray(t)?"rgb":void 0},i.isString=function(t){return"string"==typeof t},i.isHex=function(t){return i.isString(t)?"#"===t[0]:!1},i.isColorInstance=function(t){return!!t.getColor};var n={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};
e.exports=i},{"../transitions/Transitionable":88}],92:[function(t,e){e.exports={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9}},{}],93:[function(t,e){function i(t,e){return function(){return 0!==t.length?t.pop():new e}}function a(t){return function(e){t.push(e)}}var n={};n.pools={},n.register=function(t,e){var n=this.pools[t]=[];this["request"+t]=i(n,e),this["free"+t]=a(n)},n.disposeOf=function(t){for(var e=this.pools[t],i=e.length;i--;)e.pop()},e.exports=n},{}],94:[function(t,e){function i(t,e,i){return e>t?e:t>i?i:t}e.exports=i},{}],95:[function(t,e){var i=function a(t){var e;if("object"==typeof t){e=t instanceof Array?[]:{};for(var i in t)if("object"==typeof t[i]&&null!==t[i])if(t[i]instanceof Array){e[i]=new Array(t[i].length);for(var n=0;n<t[i].length;n++)e[i][n]=a(t[i][n])}else e[i]=a(t[i]);else e[i]=t[i]}else e=t;return e};e.exports=i},{}],96:[function(t,e){e.exports={CallbackStore:t("./CallbackStore"),clamp:t("./clamp"),clone:t("./clone"),Color:t("./Color"),KeyCodes:t("./KeyCodes"),keyValueToArrays:t("./keyValueToArrays"),loadURL:t("./loadURL"),ObjectManager:t("./ObjectManager"),strip:t("./strip"),vendorPrefix:t("./vendorPrefix")}},{"./CallbackStore":90,"./Color":91,"./KeyCodes":92,"./ObjectManager":93,"./clamp":94,"./clone":95,"./keyValueToArrays":97,"./loadURL":98,"./strip":99,"./vendorPrefix":100}],97:[function(t,e){e.exports=function(t){var e=[],i=[],a=0;for(var n in t)t.hasOwnProperty(n)&&(e[a]=n,i[a]=t[n],a++);return{keys:e,values:i}}},{}],98:[function(t,e){var i=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()};e.exports=i},{}],99:[function(t,e){function i(t){switch(t){case null:case void 0:return t}switch(t.constructor){case Boolean:case Number:case String:return t;case Object:for(var e in t){var a=i(t[e],!0);t[e]=a}return t;default:return null}}e.exports=i},{}],100:[function(t,e){function i(t){for(var e=0;e<a.length;e++){var i=a[e]+t;if(""===document.documentElement.style[i])return i}return t}var a=["","-ms-","-webkit-","-moz-","-o-"];e.exports=i},{}],101:[function(t,e){function i(t){a.call(this,t),this.spec.dynamic=!0}var a=t("./Geometry");i.prototype.getLength=function(){return this.getVertexPositions().length},i.prototype.getVertexBuffer=function(t){if(!t)throw"getVertexBuffer requires a name";var e=this.spec.bufferNames.indexOf(t);if(~e)return this.spec.bufferValues[e];throw"buffer does not exist"},i.prototype.setVertexBuffer=function(t,e,i){var a=this.spec.bufferNames.indexOf(t);return-1===a&&(a=this.spec.bufferNames.push(t)-1),this.spec.bufferValues[a]=e||[],this.spec.bufferSpacings[a]=i||this.DEFAULT_BUFFER_SIZE,-1===this.spec.invalidations.indexOf(a)&&this.spec.invalidations.push(a),this},i.prototype.fromGeometry=function(t){for(var e=t.spec.bufferNames.length,i=0;e>i;i++)this.setVertexBuffer(t.spec.bufferNames[i],t.spec.bufferValues[i],t.spec.bufferSpacings[i]);return this},i.prototype.setVertexPositions=function(t){return this.setVertexBuffer("a_pos",t,3)},i.prototype.setNormals=function(t){return this.setVertexBuffer("a_normals",t,3)},i.prototype.setTextureCoords=function(t){return this.setVertexBuffer("a_texCoord",t,2)},i.prototype.setIndices=function(t){return this.setVertexBuffer("indices",t,1)},i.prototype.setDrawType=function(t){return this.spec.type=t.toUpperCase(),this},i.prototype.getVertexPositions=function(){return this.getVertexBuffer("a_pos")},i.prototype.getNormals=function(){return this.getVertexBuffer("a_normals")},i.prototype.getTextureCoords=function(){return this.getVertexBuffer("a_texCoord")},e.exports=i},{"./Geometry":102}],102:[function(t,e){function i(t){if(this.options=t||{},this.DEFAULT_BUFFER_SIZE=3,this.spec={id:a++,dynamic:!1,type:this.options.type||"TRIANGLES",bufferNames:[],bufferValues:[],bufferSpacings:[],invalidations:[]},this.options.buffers)for(var e=this.options.buffers.length,i=0;e>i;)this.spec.bufferNames.push(this.options.buffers[i].name),this.spec.bufferValues.push(this.options.buffers[i].data),this.spec.bufferSpacings.push(this.options.buffers[i].size||this.DEFAULT_BUFFER_SIZE),this.spec.invalidations.push(i++)}var a=0;e.exports=i},{}],103:[function(t,e){function i(t,e){return-(e+(t-e)/2)}function a(t,e){return 1/((t-e)/2)}var n=t("../math/Vec3"),s=t("../math/Vec2"),o=[new n,new n,new n,new s,new s],r={};r.generateParametric=function(t,e,i,a){var n,s,o,r,l=[],p=a?Math.PI+Math.PI/(t-1):Math.PI,c=[];for(n=0;t+1>n;n++)for(s=n*p/t,r=0;e>r;r++)o=2*r*p/e,i(s,o,c),l.push(c[0],c[1],c[2]);var u,h=[],d=0;for(n=0;t>n;n++){for(r=0;e>r;r++)u=(r+1)%e,h.push(d+r,d+r+e,d+u),h.push(d+u,d+r+e,d+u+e);d+=e}return{vertices:l,indices:h}},r.computeNormals=function(t,e,i){var a,n,s,r,l,p,c,u,h,d,m=i||[],g=e.length/3;for(p=0;g>p;p++)n=3*e[3*p+0],a=3*e[3*p+1],s=3*e[3*p+2],o[0].set(t[a],t[a+1],t[a+2]),o[1].set(t[n],t[n+1],t[n+2]),o[2].set(t[s],t[s+1],t[s+2]),r=o[2].subtract(o[0]).cross(o[1].subtract(o[0])).normalize(),m[a+0]=(m[a+0]||0)+r.x,m[a+1]=(m[a+1]||0)+r.y,m[a+2]=(m[a+2]||0)+r.z,m[n+0]=(m[n+0]||0)+r.x,m[n+1]=(m[n+1]||0)+r.y,m[n+2]=(m[n+2]||0)+r.z,m[s+0]=(m[s+0]||0)+r.x,m[s+1]=(m[s+1]||0)+r.y,m[s+2]=(m[s+2]||0)+r.z;for(p=0;p<m.length;p+=3)for(c=m[p],u=m[p+1],h=m[p+2],d=Math.sqrt(c*c+u*u+h*h),l=0;3>l;l++)m[p+l]/=d;return m},r.subdivide=function(t,e,i){for(var a,r,l,p,c,u,h=t.length/3;h--;)a=t.slice(3*h,3*h+3),c=a.map(function(t){return new n(e[3*t],e[3*t+1],e[3*t+2])}),e.push.apply(e,n.scale(n.add(c[0],c[1],o[0]),.5,o[1]).toArray()),e.push.apply(e,n.scale(n.add(c[1],c[2],o[0]),.5,o[1]).toArray()),e.push.apply(e,n.scale(n.add(c[0],c[2],o[0]),.5,o[1]).toArray()),i&&(u=a.map(function(t){return new s(i[2*t],i[2*t+1])}),i.push.apply(i,s.scale(s.add(u[0],u[1],o[3]),.5,o[4]).toArray()),i.push.apply(i,s.scale(s.add(u[1],u[2],o[3]),.5,o[4]).toArray()),i.push.apply(i,s.scale(s.add(u[0],u[2],o[3]),.5,o[4]).toArray())),r=e.length-3,l=r+1,p=r+2,t.push(r,l,p),t.push(a[0],r,p),t.push(r,a[1],l),t[h]=p,t[h+1]=l,t[h+2]=a[2]},r.getUniqueFaces=function(t,e){for(var i,a=e.length/3,n=[];a--;)for(var s=0;3>s;s++)i=e[3*a+s],n[i]?(t.push(t[3*i],t[3*i+1],t[3*i+2]),e[3*a+s]=t.length/3-1):n[i]=!0},r.subdivideSpheroid=function(t,e){for(var i,a,s,r,l,p=e.length/3;p--;)a=e.slice(3*p,3*p+3),i=a.map(function(e){return new n(t[3*e],t[3*e+1],t[3*e+2])}),t.push.apply(t,n.normalize(n.add(i[0],i[1],o[0]),o[1]).toArray()),t.push.apply(t,n.normalize(n.add(i[1],i[2],o[0]),o[1]).toArray()),t.push.apply(t,n.normalize(n.add(i[0],i[2],o[0]),o[1]).toArray()),s=t.length/3-3,r=s+1,l=s+2,e.push(s,r,l),e.push(a[0],s,l),e.push(s,a[1],r),e[3*p]=l,e[3*p+1]=r,e[3*p+2]=a[2]},r.getSpheroidNormals=function(t,e){e=e||[];for(var i,a=t.length/3,s=0;a>s;s++)i=new n(t[3*s+0],t[3*s+1],t[3*s+2]).normalize().toArray(),e[3*s+0]=i[0],e[3*s+1]=i[1],e[3*s+2]=i[2];return e},r.getSpheroidUV=function(t,e){e=e||[];for(var i,a=t.length/3,n=[],s=0;a>s;s++)i=o[0].set(t[3*s],t[3*s+1],t[3*s+2]).normalize().toArray(),n[0]=.5*this.getAzimuth(i)/Math.PI+.5,n[1]=this.getAltitude(i)/Math.PI+.5,e.push.apply(e,n);return e},r.normalizeAll=function(t,e){e=e||[];for(var i=t.length/3,a=0;i>a;a++)Array.prototype.push.apply(e,new n(t[3*a],t[3*a+1],t[3*a+2]).normalize().toArray());return e},r.normalizeVertices=function(t,e){e=e||[];var s,o,r,l,p,c,u,h,d=t.length/3,m=[];for(h=0;d>h;h++)u=m[h]=new n(t[3*h],t[3*h+1],t[3*h+2]),(null==s||u.x<s)&&(s=u.x),(null==o||u.x>o)&&(o=u.x),(null==r||u.y<r)&&(r=u.y),(null==l||u.y>l)&&(l=u.y),(null==p||u.z<p)&&(p=u.z),(null==c||u.z>c)&&(c=u.z);var g=new n(i(o,s),i(l,r),i(c,p)),f=Math.min(a(o+g.x,s+g.x),a(l+g.y,r+g.y),a(c+g.z,p+g.z));for(h=0;h<m.length;h++)e.push.apply(e,m[h].add(g).scale(f).toArray());return e},r.getAzimuth=function(t){return Math.atan2(t[2],-t[0])},r.getAltitude=function(t){return Math.atan2(-t[1],Math.sqrt(t[0]*t[0]+t[2]*t[2]))},r.trianglesToLines=function(t,e){var i=t.length/3;e=e||[];var a;for(a=0;i>a;a++)e.push(t[3*a+0],t[3*a+1]),e.push(t[3*a+1],t[3*a+2]),e.push(t[3*a+2],t[3*a+0]);return e},r.addBackfaceTriangles=function(t,e){for(var i=e.length/3,a=0,n=e.length;n--;)e[n]>a&&(a=e[n]);for(a++,n=0;i>n;n++){var s=e[3*n],o=e[3*n+1],r=e[3*n+2];e.push(s+a,r+a,o+a)}var l=t.length;for(n=0;l>n;n++)t.push(t[n])},e.exports=r},{"../math/Vec2":43,"../math/Vec3":44}],104:[function(t,e){function i(t,e){t=n(t);var i=t.split("\n"),s=[];e=e||{};for(var o,r,l,p,c,u,h=[],d=[],m=[],g=[],f=[],y=[],_=i.length,v=0;_>v;v++)u=i[v],c=i[v].split(" "),-1!==u.indexOf("v ")?y.push([parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])]):-1!==u.indexOf("vt ")?f.push([parseFloat(c[1]),parseFloat(c[2])]):-1!==u.indexOf("vn ")?g.push([parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])]):-1!==u.indexOf("f ")?-1!==c[1].indexOf("//")?(o=c[1].split("//"),r=c[2].split("//"),l=c[3].split("//"),d.push([parseFloat(o[0])-1,parseFloat(r[0])-1,parseFloat(l[0])-1]),m.push([parseFloat(o[1])-1,parseFloat(r[1])-1,parseFloat(l[1])-1]),c[4]&&(p=c[4].split("//"),d.push([parseFloat(o[0])-1,parseFloat(l[0])-1,parseFloat(p[0])-1]),m.push([parseFloat(o[2])-1,parseFloat(l[2])-1,parseFloat(p[2])-1]))):-1!==c[1].indexOf("/")?(o=c[1].split("/"),r=c[2].split("/"),l=c[3].split("/"),d.push([parseFloat(o[0])-1,parseFloat(r[0])-1,parseFloat(l[0])-1]),h.push([parseFloat(o[1])-1,parseFloat(r[1])-1,parseFloat(l[1])-1]),m.push([parseFloat(o[2])-1,parseFloat(r[2])-1,parseFloat(l[2])-1]),c[4]&&(p=c[4].split("/"),d.push([parseFloat(o[0])-1,parseFloat(l[0])-1,parseFloat(p[0])-1]),h.push([parseFloat(o[1])-1,parseFloat(l[1])-1,parseFloat(p[1])-1]),m.push([parseFloat(o[2])-1,parseFloat(l[2])-1,parseFloat(p[2])-1]))):(d.push([parseFloat(c[1])-1,parseFloat(c[2])-1,parseFloat(c[3])-1]),h.push([parseFloat(c[1])-1,parseFloat(c[2])-1,parseFloat(c[3])-1]),m.push([parseFloat(c[1])-1,parseFloat(c[2])-1,parseFloat(c[3])-1]),c[4]&&(d.push([parseFloat(c[1])-1,parseFloat(c[3])-1,parseFloat(c[4])-1]),h.push([parseFloat(c[1])-1,parseFloat(c[3])-1,parseFloat(c[4])-1]),m.push([parseFloat(c[1])-1,parseFloat(c[3])-1,parseFloat(c[4])-1]))):-1!==u.indexOf("g ")&&(d.length&&s.push(a(y,g,f,d,m,h,e)),d.length=0,h.length=0,m.length=0);return s.push(a(y,g,f,d,m,h,e)),s}function a(t,e,i,a,n,r,p){var c=s(t,e,i,a,n,r);return c.vertices=o(c.vertices),c.normals=o(c.normals),c.texCoords=o(c.texCoords),c.indices=o(c.indices),p.normalize&&(c.vertices=l.normalizeVertices(c.vertices)),p.computeNormals&&(c.normals=l.computeNormals(c.vertices,c.indices)),{vertices:c.vertices,normals:c.normals,textureCoords:c.texCoords,indices:c.indices}}function n(t){return t.replace(/ +(?= )/g,"").replace(/\s+$/g,"")}function s(t,e,i,a,n,s){for(var o,r,l,p,c,u=[],h=[],d=[],m=[],g={},f=0,y=a.length,_=n.length,v=s.length,S=0;y>S;S++){m[S]=[],p=a[S].length;for(var x=0;p>x;x++)v&&(l=s[S][x]),_&&(r=n[S][x]),o=a[S][x],c=g[o+","+r+","+l],void 0===c&&(c=f++,h.push(t[o]),_&&u.push(e[r]),v&&d.push(i[l]),g[o+","+r+","+l]=c),m[S].push(c)}return{vertices:h,normals:u,texCoords:d,indices:m}}function o(t){for(var e=t.length,i=[],a=0;e>a;a++)i.push.apply(i,t[a]);return i}var r=t("../utilities/loadURL"),l=t("./GeometryHelper"),p={cached:{},requests:{},formatText:i};p.load=function(t,e,i){this.cached[t]?e(this.cached[t]):this.requests[t]?this.requests[t].push(e):(this.requests[t]=[e],r(t,this._onsuccess.bind(this,t,i)))},p._onsuccess=function(t,e,a){var n=i.call(this,a,e||{});this.cached[t]=n;for(var s=0;s<this.requests[t].length;s++)this.requests[t][s](n);this.requests[t]=null},e.exports=p},{"../utilities/loadURL":98,"./GeometryHelper":103}],105:[function(t,e){e.exports={Box:t("./primitives/Box"),Circle:t("./primitives/Circle"),Cylinder:t("./primitives/Cylinder"),GeodesicSphere:t("./primitives/GeodesicSphere"),Icosahedron:t("./primitives/Icosahedron"),ParametricCone:t("./primitives/ParametricCone"),Plane:t("./primitives/Plane"),Sphere:t("./primitives/Sphere"),Tetrahedron:t("./primitives/Tetrahedron"),Torus:t("./primitives/Torus"),Triangle:t("./primitives/Triangle"),GeometryHelper:t("./GeometryHelper"),DynamicGeometry:t("./DynamicGeometry"),Geometry:t("./Geometry"),OBJLoader:t("./OBJLoader")}},{"./DynamicGeometry":101,"./Geometry":102,"./GeometryHelper":103,"./OBJLoader":104,"./primitives/Box":106,"./primitives/Circle":107,"./primitives/Cylinder":108,"./primitives/GeodesicSphere":109,"./primitives/Icosahedron":110,"./primitives/ParametricCone":111,"./primitives/Plane":112,"./primitives/Sphere":113,"./primitives/Tetrahedron":114,"./primitives/Torus":115,"./primitives/Triangle":116}],106:[function(t,e){function i(t){return[2*(1&t)-1,(2&t)-1,(4&t)/2-1]}function a(t){t=t||{};var e,a,o,r,l,p=[],c=[],u=[],h=[];for(r=0;r<s.length;r++){for(e=s[r],o=4*r,l=0;4>l;l++){a=e[l];var d=i(a);p.push(d[0],d[1],d[2]),c.push(1&l,(2&l)/2),u.push(e[4],e[5],e[6])}h.push(o,o+1,o+2),h.push(o+2,o+1,o+3)}return new n({buffers:[{name:"a_pos",data:p},{name:"a_texCoord",data:c,size:2},{name:"a_normals",data:u},{name:"indices",data:h,size:1}]})}var n=t("../Geometry"),s=[[0,4,2,6,-1,0,0],[1,3,5,7,1,0,0],[0,1,4,5,0,-1,0],[2,6,3,7,0,1,0],[0,2,1,3,0,0,-1],[4,5,6,7,0,0,1]];e.exports=a},{"../Geometry":102}],107:[function(t,e){function i(t){t=t||{};var e=t.detail||30,i=n(e,!0);t.backface!==!1&&o.addBackfaceTriangles(i.vertices,i.indices);var r=a(i.vertices),l=o.computeNormals(i.vertices,i.indices);return new s({buffers:[{name:"a_pos",data:i.vertices},{name:"a_texCoord",data:r,size:2},{name:"a_normals",data:l},{name:"indices",data:i.indices,size:1}]})}function a(t){for(var e=[],i=t.length/3,a=0;i>a;a++){var n=t[3*a],s=t[3*a+1];e.push(.5+.5*n,.5+.5*-s)}return e}function n(t){for(var e,i,a,n=[0,0,0],s=[],o=1,r=0;t+1>r;r++)e=r/t*Math.PI*2,i=Math.cos(e),a=Math.sin(e),n.push(i,a,0),r>0&&s.push(0,o,++o);return{vertices:n,indices:s}}var s=t("../Geometry"),o=t("../GeometryHelper");e.exports=i},{"../Geometry":102,"../GeometryHelper":103}],108:[function(t,e){function i(t){t=t||{};var e,s=t.radius||1,o=t.detail||15;return e=n.generateParametric(o,o,i.generator.bind(null,s)),t.backface!==!1&&n.addBackfaceTriangles(e.vertices,e.indices),new a({buffers:[{name:"a_pos",data:e.vertices},{name:"a_texCoord",data:n.getSpheroidUV(e.vertices),size:2},{name:"a_normals",data:n.computeNormals(e.vertices,e.indices)},{name:"indices",data:e.indices,size:1}]})}var a=t("../Geometry"),n=t("../GeometryHelper");i.generator=function(t,e,i,a){a[1]=t*Math.sin(i),a[0]=t*Math.cos(i),a[2]=t*(-1+e/Math.PI*2)},e.exports=i},{"../Geometry":102,"../GeometryHelper":103}],109:[function(t,e){function i(t){var e=.5*(1+Math.sqrt(5)),i=[-1,e,0,1,e,0,-1,-e,0,1,-e,0,0,-1,-e,0,1,-e,0,-1,e,0,1,e,e,0,1,e,0,-1,-e,0,1,-e,0,-1],s=[0,5,11,0,1,5,0,7,1,0,10,7,0,11,10,1,9,5,5,4,11,11,2,10,10,6,7,7,8,1,3,4,9,3,2,4,3,6,2,3,8,6,3,9,8,4,5,9,2,11,4,6,10,2,8,7,6,9,1,8];i=n.normalizeAll(i),t=t||{};for(var o=t.detail||3;--o;)n.subdivideSpheroid(i,s);n.getUniqueFaces(i,s);var r=n.computeNormals(i,s),l=n.getSpheroidUV(i);return new a({buffers:[{name:"a_pos",data:i},{name:"a_texCoord",data:l,size:2},{name:"a_normals",data:r},{name:"indices",data:s,size:1}]})}var a=t("../Geometry"),n=t("../GeometryHelper");e.exports=i},{"../Geometry":102,"../GeometryHelper":103}],110:[function(t,e){function i(){var t=(1+Math.sqrt(5))/2,e=[-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,-t,0,1,-t,0,-1,t,0,1,t,t,0,1,t,0,-1,-t,0,1,-t,0,-1],i=[0,5,11,0,1,5,0,7,1,0,10,7,0,11,10,1,9,5,5,4,11,11,2,10,10,6,7,7,8,1,3,4,9,3,2,4,3,6,2,3,8,6,3,9,8,4,5,9,2,11,4,6,10,2,8,7,6,9,1,8];n.getUniqueFaces(e,i);var s=n.computeNormals(e,i),o=n.getSpheroidUV(e);return e=n.normalizeAll(e),new a({buffers:[{name:"a_pos",data:e},{name:"a_texCoord",data:o,size:2},{name:"a_normals",data:s},{name:"indices",data:i,size:1}]})}var a=t("../Geometry"),n=t("../GeometryHelper");e.exports=i},{"../Geometry":102,"../GeometryHelper":103}],111:[function(t,e){function i(t){t=t||{};var e=t.detail||15,s=t.radius||1/Math.PI,o=n.generateParametric(e,e,i.generator.bind(null,s));return t.backface!==!1&&n.addBackfaceTriangles(o.vertices,o.indices),new a({buffers:[{name:"a_pos",data:o.vertices},{name:"a_texCoord",data:n.getSpheroidUV(o.vertices),size:2},{name:"a_normals",data:n.computeNormals(o.vertices,o.indices)},{name:"indices",data:o.indices,size:1}]})}var a=t("../Geometry"),n=t("../GeometryHelper");i.generator=function(t,e,i,a){a[0]=-t*e*Math.cos(i),a[1]=t*e*Math.sin(i),a[2]=-e/(Math.PI/2)+1},e.exports=i},{"../Geometry":102,"../GeometryHelper":103}],112:[function(t,e){function i(t){t=t||{};for(var e,i=t.detailX||t.detail||1,s=t.detailY||t.detail||1,o=[],r=[],l=[],p=[],c=0;s>=c;c++)for(var u=c/s,h=0;i>=h;h++){var d=h/i;o.push(2*(d-.5),2*(u-.5),0),r.push(d,1-u),i>h&&s>c&&(e=h+c*(i+1),p.push(e,e+1,e+i+1),p.push(e+i+1,e+1,e+i+2))}if(t.backface!==!1){n.addBackfaceTriangles(o,p);var m=r.length;for(e=0;m>e;e++)r.push(r[e])}return l=n.computeNormals(o,p),new a({buffers:[{name:"a_pos",data:o},{name:"a_texCoord",data:r,size:2},{name:"a_normals",data:l},{name:"indices",data:p,size:1}]})}var a=t("../Geometry"),n=t("../GeometryHelper");e.exports=i},{"../Geometry":102,"../GeometryHelper":103}],113:[function(t,e){function i(t){t=t||{};var e=t.detail||10,s=t.detailX||e,o=t.detailY||e,r=n.generateParametric(s,o,i.generator,!0);return n.getUniqueFaces(r.vertices,r.indices),new a({buffers:[{name:"a_pos",data:r.vertices},{name:"a_texCoord",data:n.getSpheroidUV(r.vertices),size:2},{name:"a_normals",data:n.getSpheroidNormals(r.vertices)},{name:"indices",data:r.indices,size:1}]})}var a=t("../Geometry"),n=t("../GeometryHelper");i.generator=function(t,e,i){var a=Math.sin(t)*Math.cos(e),n=Math.cos(t),s=-Math.sin(t)*Math.sin(e);i[0]=a,i[1]=n,i[2]=s},e.exports=i},{"../Geometry":102,"../GeometryHelper":103}],114:[function(t,e){function i(t){var e,i,s=[],o=[],r=Math.sqrt(3),l=[1,-1,-1/r,-1,-1,-1/r,0,1,0,0,1,0,0,-1,r-1/r,1,-1,-1/r,0,1,0,-1,-1,-1/r,0,-1,r-1/r,0,-1,r-1/r,-1,-1,-1/r,1,-1,-1/r],p=[0,1,2,3,4,5,6,7,8,9,10,11];for(i=0;4>i;i++)s.push(0,0,.5,1,1,0);for(t=t||{};--e;)n.subdivide(p,l,s);return o=n.computeNormals(l,p),new a({buffers:[{name:"a_pos",data:l},{name:"a_texCoord",data:s,size:2},{name:"a_normals",data:o},{name:"indices",data:p,size:1}]})}var a=t("../Geometry"),n=t("../GeometryHelper");e.exports=i},{"../Geometry":102,"../GeometryHelper":103}],115:[function(t,e){function i(t){t=t||{};var e=t.detail||30,s=t.holeRadius||.8,o=t.tubeRadius||.2,r=n.generateParametric(e,e,i.generator.bind(null,s,o));return new a({buffers:[{name:"a_pos",data:r.vertices},{name:"a_texCoord",data:n.getSpheroidUV(r.vertices),size:2},{name:"a_normals",data:n.computeNormals(r.vertices,r.indices)},{name:"indices",data:r.indices,size:1}]})}var a=t("../Geometry"),n=t("../GeometryHelper");i.generator=function(t,e,i,a,n){n[0]=(t+e*Math.cos(2*a))*Math.sin(2*i),n[1]=-(t+e*Math.cos(2*a))*Math.cos(2*i),n[2]=e*Math.sin(2*a)},e.exports=i},{"../Geometry":102,"../GeometryHelper":103}],116:[function(t,e){function i(t){t=t||{};for(var e=t.detail||1,i=[],s=[0,0,.5,1,1,0],o=[0,1,2],r=[-1,-1,0,0,1,0,1,-1,0];--e;)n.subdivide(o,r,s);return t.backface!==!1&&n.addBackfaceTriangles(r,o),i=n.computeNormals(r,o),new a({buffers:[{name:"a_pos",data:r},{name:"a_texCoord",data:s,size:2},{name:"a_normals",data:i},{name:"indices",data:o,size:1}]})}var a=t("../Geometry"),n=t("../GeometryHelper");e.exports=i},{"../Geometry":102,"../GeometryHelper":103}],117:[function(t,e){function i(t,e,n,s){s=s||{},this.name=t,this.chunk=e,this.inputs=n?Array.isArray(n)?n:[n]:[],this.uniforms=s.uniforms||{},this.varyings=s.varyings,this.attributes=s.attributes,s.texture&&(this.texture=s.texture.__isATexture__?s.texture:a.register(null,s.texture)),this._id=i.id++,this.invalidations=[],this.__isAMaterial__=!0}var a=t("./TextureRegistry"),n={},s={abs:{glsl:"abs(%1);",output:{4:4,3:3,2:2,1:1}},sign:{glsl:"sign(%1);",output:{4:4,3:3,2:2,1:1}},floor:{glsl:"floor(%1);",output:{4:4,3:3,2:2,1:1}},ceiling:{glsl:"ceil(%1);",output:{4:4,3:3,2:2,1:1}},mod:{glsl:"mod(%1, %2);"},min:{glsl:"min(%1, %2);",output:{4:4,3:3,2:2,1:1}},max:{glsl:"max(%1, %2);",output:{4:4,3:3,2:2,1:1}},clamp:{glsl:"clamp(%1, %2, %3);",output:{"4,1,1":4,"3,1,1":3,"2,1,1":2,"1,1,1":1}},mix:{glsl:"mix(%1, %2, %3);",output:{"4,4,1":4,"3,3,1":3,"2,2,1":2,"1,1,1":1}},step:{glsl:"step(%1, %2, %3);",output:{"1,1":1,"1,2":2,"1,3":3,"1,4":4}},smoothstep:{glsl:"smoothstep(%1);",output:{"1,1,1":1,"2,2,2":2,"3,3,3":3,"4,4,4":4}},fragCoord:{glsl:"gl_FragColor;",output:4},sin:{glsl:"sin(%1);",output:{1:1,2:2,3:3,4:4}},cos:{glsl:"cos(%1);",output:{1:1,2:2,3:3,4:4}},pow:{glsl:"pow(%1, %2);",output:{"1,1":1,"2,2":2,"3,3":3,"1,4":4}},sqrt:{glsl:"sqrt(%1);",output:{"1,1":1,"2,2":2,"3,3":3,"1,4":4}},time:{glsl:"time;",output:1},add:{glsl:"%1 + %2;",output:{"1,1":1,"2,2":2,"3,3":3,"4,4":4,"2,1":2,"3,1":3,"4,1":4}},subtract:{glsl:"%1 - %2;",output:{"1,1":1,"2,2":2,"3,3":3,"4,4":4,"2,1":2,"3,1":3,"4,1":4}},multiply:{glsl:"%1 * %2;",output:{"1,1":1,"2,2":2,"3,3":3,"4,4":4,"2,1":2,"3,1":3,"4,1":4}},normal:{glsl:"vec4((v_normal + 1.0) * 0.5, 1.0);",output:4},uv:{glsl:"v_textureCoordinate;",output:2},meshPosition:{glsl:"(v_position + 1.0) * 0.5;",output:3},normalize:{glsl:"normalize(%1)",output:{1:1,2:2,3:3,4:4}},dot:{glsl:"dot(%1, %2);",output:{"1,1":1,"2,2":1,"3,3":1,"4,4":1}},image:{glsl:"texture2D($TEXTURE, v_textureCoordinate);",output:4},constant:{glsl:"%1;"},parameter:{uniforms:{parameter:1},glsl:"parameter;"},vec3:{glsl:"vec3(%1);",output:3},vec2:{glsl:"vec2(%1);",output:2}};n.registerExpression=function(t,e){this[t]=function(a,n){return new i(t,e,a,n)}};for(var o in s)n.registerExpression(o,s[o]);i.id=2,i.prototype.setUniform=function(t,e){this.uniforms[t]=e,this.invalidations.push(t)},e.exports=n,n.Material=i,n.Texture=function(t){return"undefined"==typeof window?console.error("Texture constructor cannot be run inside of a worker"):n.image([],{texture:t})},n.Custom=function(t,e,a){return new i("custom",{glsl:t,output:1,uniforms:a||{}},e)}},{"./TextureRegistry":118}],118:[function(t,e){var i={registry:{},textureIds:1};i.register=function(t,e,i){return t?(this.registry[t]={id:this.textureIds++,__isATexture__:!0,data:e,options:i},this.registry[t]):{id:this.textureIds++,data:e,__isATexture__:!0,options:i}},i.get=function(t){if(this.registry[t])return this.registry[t];throw'Texture "'+t+'" not found!'},e.exports=i},{}],119:[function(t,e){e.exports={Material:t("./Material"),TextureRegistry:t("./TextureRegistry")}},{"./Material":117,"./TextureRegistry":118}],120:[function(t,e){function i(t,e){this._node=t,this._changeQueue=[],this._initialized=!1,this._requestingUpdate=!1,this._inDraw=!1,this.value={drawOptions:{},color:null,expressions:{},geometry:null,flatShading:null,glossiness:null,positionOffset:null,normals:null},e&&this.setDrawOptions(e),this._id=t.addComponent(this)}var a=t("../webgl-geometries");i.prototype.setDrawOptions=function(t){return this._changeQueue.push("GL_SET_DRAW_OPTIONS"),this._changeQueue.push(t),this},i.prototype.getDrawOptions=function(){return this.value.drawOptions},i.prototype.setGeometry=function(t,e){if("string"==typeof t){if(!a[t])throw'Invalid geometry: "'+t+'".';t=new a[t](e)}if((this.value.geometry!==t||this._inDraw)&&(this._initialized&&(this._changeQueue.push("GL_SET_GEOMETRY"),this._changeQueue.push(t.spec.id),this._changeQueue.push(t.spec.type),this._changeQueue.push(t.spec.dynamic)),this._requestUpdate(),this.value.geometry=t),this._initialized&&this._node){for(var i=this.value.geometry.spec.invalidations.length;i--;)this.value.geometry.spec.invalidations.pop(),this._changeQueue.push("GL_BUFFER_DATA"),this._changeQueue.push(this.value.geometry.spec.id),this._changeQueue.push(this.value.geometry.spec.bufferNames[i]),this._changeQueue.push(this.value.geometry.spec.bufferValues[i]),this._changeQueue.push(this.value.geometry.spec.bufferSpacings[i]),this._changeQueue.push(this.value.geometry.spec.dynamic);i&&this._requestUpdate()}return this},i.prototype.getGeometry=function(){return this.value.geometry},i.prototype.setBaseColor=function(t){var e,i=t.__isAMaterial__,a=!!t.getNormalizedRGBA;return i?(this.value.color=null,this.value.expressions.baseColor=t,e=t):a&&(this.value.expressions.baseColor=null,this.value.color=t,e=t.getNormalizedRGBA()),this._initialized&&(i?this._changeQueue.push("MATERIAL_INPUT"):a&&this._changeQueue.push("GL_UNIFORMS"),this._changeQueue.push("u_baseColor"),this._changeQueue.push(e)),this._requestUpdate(),this},i.prototype.getBaseColor=function(){return this.value.expressions.baseColor||this.value.color},i.prototype.setFlatShading=function(t){return(this._inDraw||this.value.flatShading!==t)&&(this.value.flatShading=t,this._initialized&&(this._changeQueue.push("GL_UNIFORMS"),this._changeQueue.push("u_flatShading"),this._changeQueue.push(t?1:0)),this._requestUpdate()),this},i.prototype.getFlatShading=function(){return this.value.flatShading},i.prototype.setNormals=function(t){var e=t.__isAMaterial__;return e&&(this.value.expressions.normals=t),this._initialized&&(this._changeQueue.push(e?"MATERIAL_INPUT":"UNIFORM_INPUT"),this._changeQueue.push("u_normals"),this._changeQueue.push(t)),this._requestUpdate(),this},i.prototype.getNormals=function(){return this.value.expressions.normals},i.prototype.setGlossiness=function(t,e){var i=t.__isAMaterial__,a=!!t.getNormalizedRGB;return i?(this.value.glossiness=[null,null],this.value.expressions.glossiness=t):a&&(this.value.expressions.glossiness=null,this.value.glossiness=[t,e||20],t=t?t.getNormalizedRGB():[0,0,0],t.push(e||20)),this._initialized&&(this._changeQueue.push(i?"MATERIAL_INPUT":"GL_UNIFORMS"),this._changeQueue.push("u_glossiness"),this._changeQueue.push(t)),this._requestUpdate(),this},i.prototype.getGlossiness=function(){return this.value.expressions.glossiness||this.value.glossiness},i.prototype.setPositionOffset=function(t){var e,i=t.__isAMaterial__;return i?(this.value.expressions.positionOffset=t,e=t):(this.value.expressions.positionOffset=null,this.value.positionOffset=t,e=this.value.positionOffset),this._initialized&&(this._changeQueue.push(i?"MATERIAL_INPUT":"GL_UNIFORMS"),this._changeQueue.push("u_positionOffset"),this._changeQueue.push(e)),this._requestUpdate(),this},i.prototype.getPositionOffset=function(){return this.value.expressions.positionOffset||this.value.positionOffset},i.prototype.getMaterialExpressions=function(){return this.value.expressions},i.prototype.getValue=function(){return this.value},i.prototype._pushInvalidations=function(t){var e,i=this.value.expressions[t];if(i)for(var a=i.invalidations.length;a--;)e=i.invalidations.pop(),this._node.sendDrawCommand("GL_UNIFORMS"),this._node.sendDrawCommand(e),this._node.sendDrawCommand(i.uniforms[e]);return this},i.prototype.onUpdate=function(){var t=this._node,e=this._changeQueue;if(t){if(t.sendDrawCommand("WITH"),t.sendDrawCommand(t.getLocation()),this.value.color&&this.value.color.isActive()&&(this._node.sendDrawCommand("GL_UNIFORMS"),this._node.sendDrawCommand("u_baseColor"),this._node.sendDrawCommand(this.value.color.getNormalizedRGBA()),this._node.requestUpdateOnNextTick(this._id)),this.value.glossiness&&this.value.glossiness[0]&&this.value.glossiness[0].isActive()){this._node.sendDrawCommand("GL_UNIFORMS"),this._node.sendDrawCommand("u_glossiness");var i=this.value.glossiness[0].getNormalizedRGB();i.push(this.value.glossiness[1]),this._node.sendDrawCommand(i),this._node.requestUpdateOnNextTick(this._id)}else this._requestingUpdate=!1;this._pushInvalidations("baseColor"),this._pushInvalidations("positionOffset");for(var a=0;a<e.length;a++)t.sendDrawCommand(e[a]);e.length=0}},i.prototype.onMount=function(t,e){this._node=t,this._id=e,this.draw()},i.prototype.onDismount=function(){this._initialized=!1,this._changeQueue.push("GL_REMOVE_MESH"),this._requestUpdate()},i.prototype.onShow=function(){this._changeQueue.push("GL_MESH_VISIBILITY",!0),this._requestUpdate()},i.prototype.onHide=function(){this._changeQueue.push("GL_MESH_VISIBILITY",!1),this._requestUpdate()},i.prototype.onTransformChange=function(t){this._initialized&&(this._changeQueue.push("GL_UNIFORMS"),this._changeQueue.push("u_transform"),this._changeQueue.push(t)),this._requestUpdate()},i.prototype.onSizeChange=function(t){this._initialized&&(this._changeQueue.push("GL_UNIFORMS"),this._changeQueue.push("u_size"),this._changeQueue.push(t)),this._requestUpdate()},i.prototype.onOpacityChange=function(t){this._initialized&&(this._changeQueue.push("GL_UNIFORMS"),this._changeQueue.push("u_opacity"),this._changeQueue.push(t)),this._requestUpdate()},i.prototype.onAddUIEvent=function(){},i.prototype._requestUpdate=function(){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0)},i.prototype.init=function(){this._initialized=!0,this.onTransformChange(this._node.getTransform()),this.onSizeChange(this._node.getSize()),this.onOpacityChange(this._node.getOpacity()),this._requestUpdate()},i.prototype.draw=function(){this._inDraw=!0,this.init();var t=this.getValue();null!=t.geometry&&this.setGeometry(t.geometry),null!=t.color&&this.setBaseColor(t.color),null!=t.glossiness&&this.setGlossiness.apply(this,t.glossiness),null!=t.drawOptions&&this.setDrawOptions(t.drawOptions),null!=t.flatShading&&this.setFlatShading(t.flatShading),null!=t.expressions.normals&&this.setNormals(t.expressions.normals),null!=t.expressions.baseColor&&this.setBaseColor(t.expressions.baseColor),null!=t.expressions.glossiness&&this.setGlossiness(t.expressions.glossiness),null!=t.expressions.positionOffset&&this.setPositionOffset(t.expressions.positionOffset),this._inDraw=!1},e.exports=i},{"../webgl-geometries":105}],121:[function(t,e){e.exports={Mesh:t("./Mesh"),PointLight:t("./lights/PointLight"),AmbientLight:t("./lights/AmbientLight")}},{"./Mesh":120,"./lights/AmbientLight":122,"./lights/PointLight":124}],122:[function(t,e){function i(t){a.call(this,t),this.commands.color="GL_AMBIENT_LIGHT"}var a=t("./Light");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,e.exports=i},{"./Light":123}],123:[function(t,e){function i(t){this._node=t,this._id=t.addComponent(this),this._requestingUpdate=!1,this.queue=[],this._color=null,this.commands={color:"GL_LIGHT_COLOR"}}i.prototype.setColor=function(t){if(!t.getNormalizedRGB)return!1;this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._color=t,this.queue.push(this.commands.color);var e=this._color.getNormalizedRGB();return this.queue.push(e[0]),this.queue.push(e[1]),this.queue.push(e[2]),this},i.prototype.getColor=function(){return this._color},i.prototype.onUpdate=function(){var t=this._node.getLocation();this._node.sendDrawCommand("WITH").sendDrawCommand(t);for(var e=this.queue.length;e--;)this._node.sendDrawCommand(this.queue.shift());if(this._color&&this._color.isActive()){this._node.sendDrawCommand(this.commands.color);var i=this._color.getNormalizedRGB();this._node.sendDrawCommand(i[0]),this._node.sendDrawCommand(i[1]),this._node.sendDrawCommand(i[2]),this._node.requestUpdateOnNextTick(this._id)}else this._requestingUpdate=!1},e.exports=i},{}],124:[function(t,e){function i(t){a.call(this,t),this.commands.position="GL_LIGHT_POSITION",this.onTransformChange(t.getTransform())}var a=t("./Light");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.onTransformChange=function(t){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this.queue.push(this.commands.position),this.queue.push(t[12]),this.queue.push(t[13]),this.queue.push(t[14])},e.exports=i},{"./Light":123}],125:[function(t,e){function i(t,e,i){this.buffer=null,this.target=t,this.type=e,this.data=[],this.gl=i}i.prototype.subData=function(){for(var t=this.gl,e=[],i=0,a=1e4;i<this.data.length;i+=a)e=Array.prototype.concat.apply(e,this.data.slice(i,i+a));this.buffer=this.buffer||t.createBuffer(),t.bindBuffer(this.target,this.buffer),t.bufferData(this.target,new this.type(e),t.STATIC_DRAW)
},e.exports=i},{}],126:[function(t,e){function i(t){this.gl=t,this.registry={},this._dynamicBuffers=[],this._staticBuffers=[],this._arrayBufferMax=3e4,this._elementBufferMax=3e4}var a="indices",n=t("./Buffer");i.prototype.allocate=function(t,e,i,s,o){var r,l,p,c,u=this.registry[t]||(this.registry[t]={keys:[],values:[],spacing:[],offset:[],length:[]}),h=u.keys.indexOf(e),d=e===a,m=!1,g=0;if(-1===h){if(h=u.keys.length,l=d?i.length:Math.floor(i.length/s),o)p=new n(d?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,d?Uint16Array:Float32Array,this.gl),this._dynamicBuffers.push({buffer:p,offset:i.length,isIndex:d});else{for(c=0;c<this._staticBuffers.length;c++)if(d===this._staticBuffers[c].isIndex&&(r=this._staticBuffers[c].offset+i.length,!d&&r<this._arrayBufferMax||d&&r<this._elementBufferMax)){p=this._staticBuffers[c].buffer,g=this._staticBuffers[c].offset,this._staticBuffers[c].offset+=i.length,m=!0;break}m||(p=new n(d?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,d?Uint16Array:Float32Array,this.gl),this._staticBuffers.push({buffer:p,offset:i.length,isIndex:d}))}u.keys.push(e),u.values.push(p),u.spacing.push(s),u.offset.push(g),u.length.push(l)}var f=i.length;for(c=0;f>c;c++)u.values[h].data[g+c]=i[c];u.values[h].subData()},e.exports=i},{"./Buffer":125}],127:[function(t,e){function i(t,e){return function(){var i=t.apply(this,arguments);return e.apply(this,arguments),i}}function a(t,e){var i="body,html{background:#e3e3e3;font-family:monaco,monospace;font-size:14px;line-height:1.7em}#shaderReport{left:0;top:0;right:0;box-sizing:border-box;position:absolute;z-index:1000;color:#222;padding:15px;white-space:normal;list-style-type:none;margin:50px auto;max-width:1200px}#shaderReport li{background-color:#fff;margin:13px 0;box-shadow:0 1px 2px rgba(0,0,0,.15);padding:20px 30px;border-radius:2px;border-left:20px solid #e01111}span{color:#e01111;text-decoration:underline;font-weight:700}#shaderReport li p{padding:0;margin:0}#shaderReport li:nth-child(even){background-color:#f4f4f4}#shaderReport li p:first-child{margin-bottom:10px;color:#666}",a=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(a),a.textContent=i;var n=document.createElement("ul");n.setAttribute("id","shaderReport"),document.body.appendChild(n);for(var s,o=/ERROR: [\d]+:([\d]+): (.+)/gim,r=e.split("\n");null!=(s=o.exec(t));){s.index===o.lastIndex&&o.lastIndex++;var l=document.createElement("li"),p='<p><span>ERROR</span> "'+s[2]+'" in line '+s[1]+"</p>";p+="<p><b>"+r[s[1]-1].replace(/^[ \t]+/g,"")+"</b></p>",l.innerHTML=p,n.appendChild(l)}}e.exports=function(){return i(this.gl.compileShader,function(t){if(!this.getShaderParameter(t,this.COMPILE_STATUS)){var e=this.getShaderInfoLog(t),i=this.getShaderSource(t);a(e,i)}})}},{}],128:[function(t,e){function i(t,e){this.gl=t,this.textureSlots=1,this.options=e||{},this.registeredMaterials={},this.flaggedUniforms=[],this.cachedUniforms={},this.uniformTypes=[],this.definitionVec4=[],this.definitionVec3=[],this.definitionFloat=[],this.applicationVec3=[],this.applicationVec4=[],this.applicationFloat=[],this.applicationVert=[],this.definitionVert=[],this.resetProgram()}var a=t("../utilities/clone"),n=t("../utilities/keyValueToArrays"),s=t("../webgl-shaders").vertex,o=t("../webgl-shaders").fragment,r=t("./Debug"),l=35633,p=35632,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],u="precision mediump float;\n",h={undefined:"float ",1:"float ",2:"vec2 ",3:"vec3 ",4:"vec4 ",16:"mat4 "},d={u_baseColor:"vec4",u_normals:"vert",u_glossiness:"vec4",u_positionOffset:"vert"},m={vert:1,vec3:2,vec4:4,"float":8},g=n({u_perspective:c,u_view:c,u_resolution:[0,0,0],u_transform:c,u_size:[1,1,1],u_time:0,u_opacity:1,u_metalness:0,u_glossiness:[0,0,0,0],u_baseColor:[1,1,1,1],u_normals:[1,1,1],u_positionOffset:[0,0,0],u_lightPosition:c,u_lightColor:c,u_ambientLight:[0,0,0],u_flatShading:0,u_numLights:0}),f=n({a_pos:[0,0,0],a_texCoord:[0,0],a_normals:[0,0,0]}),y=n({v_textureCoordinate:[0,0],v_normal:[0,0,0],v_position:[0,0,0],v_eyeVector:[0,0,0]});i.prototype.registerMaterial=function(t,e){var i=e,a=d[t],n=m[a];if((this.registeredMaterials[e._id]&n)===n)return this;var s;for(s in i.uniforms)-1===g.keys.indexOf(s)&&(g.keys.push(s),g.values.push(i.uniforms[s]));for(s in i.varyings)-1===y.keys.indexOf(s)&&(y.keys.push(s),y.values.push(i.varyings[s]));for(s in i.attributes)-1===f.keys.indexOf(s)&&(f.keys.push(s),f.values.push(i.attributes[s]));return this.registeredMaterials[e._id]|=n,"float"===a&&(this.definitionFloat.push(e.defines),this.definitionFloat.push("float fa_"+e._id+"() {\n "+i.glsl+" \n}"),this.applicationFloat.push("if (int(abs(ID)) == "+e._id+") return fa_"+e._id+"();")),"vec3"===a&&(this.definitionVec3.push(e.defines),this.definitionVec3.push("vec3 fa_"+e._id+"() {\n "+i.glsl+" \n}"),this.applicationVec3.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),"vec4"===a&&(this.definitionVec4.push(e.defines),this.definitionVec4.push("vec4 fa_"+e._id+"() {\n "+i.glsl+" \n}"),this.applicationVec4.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),"vert"===a&&(this.definitionVert.push(e.defines),this.definitionVert.push("vec3 fa_"+e._id+"() {\n "+i.glsl+" \n}"),this.applicationVert.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),this.resetProgram()},i.prototype.resetProgram=function(){var t,e,i,n,r,c,d=[u],m=[u];for(this.uniformLocations=[],this.attributeLocations={},this.uniformTypes={},this.attributeNames=a(f.keys),this.attributeValues=a(f.values),this.varyingNames=a(y.keys),this.varyingValues=a(y.values),this.uniformNames=a(g.keys),this.uniformValues=a(g.values),this.flaggedUniforms=[],this.cachedUniforms={},m.push("uniform sampler2D u_textures[7];\n"),this.applicationVert.length&&d.push("uniform sampler2D u_textures[7];\n"),c=0;c<this.uniformNames.length;c++)n=this.uniformNames[c],r=this.uniformValues[c],d.push("uniform "+h[r.length]+n+";\n"),m.push("uniform "+h[r.length]+n+";\n");for(c=0;c<this.attributeNames.length;c++)n=this.attributeNames[c],r=this.attributeValues[c],d.push("attribute "+h[r.length]+n+";\n");for(c=0;c<this.varyingNames.length;c++)n=this.varyingNames[c],r=this.varyingValues[c],d.push("varying "+h[r.length]+n+";\n"),m.push("varying "+h[r.length]+n+";\n");e=d.join("")+s.replace("#vert_definitions",this.definitionVert.join("\n")).replace("#vert_applications",this.applicationVert.join("\n")),t=m.join("")+o.replace("#vec3_definitions",this.definitionVec3.join("\n")).replace("#vec3_applications",this.applicationVec3.join("\n")).replace("#vec4_definitions",this.definitionVec4.join("\n")).replace("#vec4_applications",this.applicationVec4.join("\n")).replace("#float_definitions",this.definitionFloat.join("\n")).replace("#float_applications",this.applicationFloat.join("\n")),i=this.gl.createProgram(),this.gl.attachShader(i,this.compileShader(this.gl.createShader(l),e)),this.gl.attachShader(i,this.compileShader(this.gl.createShader(p),t)),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.program=i,this.gl.useProgram(this.program)):(console.error("link error: "+this.gl.getProgramInfoLog(i)),this.program=null),this.setUniforms(this.uniformNames,this.uniformValues);var _=this.gl.getUniformLocation(this.program,"u_textures[0]");return this.gl.uniform1iv(_,[0,1,2,3,4,5,6]),this},i.prototype.uniformIsCached=function(t,e){if(null==this.cachedUniforms[t])return this.cachedUniforms[t]=e.length?new Float32Array(e):e,!1;if(e.length){for(var i=e.length;i--;)if(e[i]!==this.cachedUniforms[t][i]){for(i=e.length;i--;)this.cachedUniforms[t][i]=e[i];return!1}}else if(this.cachedUniforms[t]!==e)return this.cachedUniforms[t]=e,!1;return!0},i.prototype.setUniforms=function(t,e){var i,a,n,s,o,r=this.gl;if(!this.program)return this;for(s=t.length,o=0;s>o;o++)if(n=t[o],a=e[o],i=this.uniformLocations[n]||r.getUniformLocation(this.program,n),i&&(this.uniformLocations[n]=i,!this.uniformIsCached(n,a)))switch(this.uniformTypes[n]||(this.uniformTypes[n]=this.getUniformTypeFromValue(a)),this.uniformTypes[n]){case"uniform4fv":r.uniform4fv(i,a);break;case"uniform3fv":r.uniform3fv(i,a);break;case"uniform2fv":r.uniform2fv(i,a);break;case"uniform1fv":r.uniform1fv(i,a);break;case"uniform1f":r.uniform1f(i,a);break;case"uniformMatrix3fv":r.uniformMatrix3fv(i,!1,a);break;case"uniformMatrix4fv":r.uniformMatrix4fv(i,!1,a)}return this},i.prototype.getUniformTypeFromValue=function(t){if(Array.isArray(t)||t instanceof Float32Array)switch(t.length){case 1:return"uniform1fv";case 2:return"uniform2fv";case 3:return"uniform3fv";case 4:return"uniform4fv";case 9:return"uniformMatrix3fv";case 16:return"uniformMatrix4fv"}else if(!isNaN(parseFloat(t))&&isFinite(t))return"uniform1f";throw'cant load uniform "'+name+'" with value:'+JSON.stringify(t)},i.prototype.compileShader=function(t,e){var i=1;return this.options.debug&&(this.gl.compileShader=r.call(this)),this.gl.shaderSource(t,e),this.gl.compileShader(t),this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS)||(console.error("compile error: "+this.gl.getShaderInfoLog(t)),console.error("1: "+e.replace(/\n/g,function(){return"\n"+(i+=1)+": "}))),t},e.exports=i},{"../utilities/clone":95,"../utilities/keyValueToArrays":97,"../webgl-shaders":136,"./Debug":127}],129:[function(t,e){function i(t,e){e=e||{},this.id=t.createTexture(),this.width=e.width||0,this.height=e.height||0,this.mipmap=e.mipmap,this.format=e.format||"RGBA",this.type=e.type||"UNSIGNED_BYTE",this.gl=t,this.bind(),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[e.magFilter]||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[e.minFilter]||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t[e.wrapS]||t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t[e.wrapT]||t.CLAMP_TO_EDGE)}i.prototype.bind=function(){return this.gl.bindTexture(this.gl.TEXTURE_2D,this.id),this},i.prototype.unbind=function(){return this.gl.bindTexture(this.gl.TEXTURE_2D,null),this},i.prototype.setImage=function(t){return this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl[this.format],this.gl[this.format],this.gl[this.type],t),this.mipmap&&this.gl.generateMipmap(this.gl.TEXTURE_2D),this},i.prototype.setArray=function(t){return this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl[this.format],this.width,this.height,0,this.gl[this.format],this.gl[this.type],t),this},i.prototype.readBack=function(t,e,i,a){var n,s=this.gl;t=t||0,e=e||0,i=i||this.width,a=a||this.height;var o=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,o),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.id,0),s.checkFramebufferStatus(s.FRAMEBUFFER)===s.FRAMEBUFFER_COMPLETE&&(n=new Uint8Array(i*a*4),s.readPixels(t,e,i,a,s.RGBA,s.UNSIGNED_BYTE,n)),n},e.exports=i},{}],130:[function(t,e){function i(t){this.registry=[],this._needsResample=[],this._activeTexture=0,this._boundTexture=null,this._checkerboard=s(),this.gl=t}function a(t,e){var i=("string"==typeof t?new Image:t)||{};return i.crossOrigin="anonymous",i.src||(i.src=t),i.complete?e(i):i.onload=function(){e(i)},i}var n=t("./Texture"),s=t("./createCheckerboard");i.prototype.update=function(t){for(var e=this.registry.length,i=1;e>i;i++){var a=this.registry[i];a&&a.isLoaded&&a.resampleRate&&(!a.lastResample||t-a.lastResample>a.resampleRate)&&(this._needsResample[a.id]||(this._needsResample[a.id]=!0,a.lastResample=t))}},i.prototype.register=function(t,e){var i,s=t.data,o=t.id,r=t.options||{},l=this.registry[o];return l||(l=new n(this.gl,r),l.setImage(this._checkerboard),i=this.registry[o]={resampleRate:r.resampleRate||null,lastResample:null,isLoaded:!1,texture:l,source:s,id:o,slot:e},Array.isArray(s)||s instanceof Uint8Array||s instanceof Float32Array?(this.bindTexture(o),l.setArray(s),i.isLoaded=!0):window&&s instanceof window.HTMLVideoElement?s.addEventListener("loadeddata",function(){this.bindTexture(o),l.setImage(s),i.isLoaded=!0,i.source=s}.bind(this)):"string"==typeof s&&a(s,function(t){this.bindTexture(o),l.setImage(t),i.isLoaded=!0,i.source=t}.bind(this))),o},i.prototype.bindTexture=function(t){var e=this.registry[t];this._activeTexture!==e.slot&&(this.gl.activeTexture(this.gl.TEXTURE0+e.slot),this._activeTexture=e.slot),this._boundTexture!==t&&(this._boundTexture=t,e.texture.bind()),this._needsResample[e.id]&&(e.texture.setImage(e.source),this._needsResample[e.id]=!1)},e.exports=i},{"./Texture":129,"./createCheckerboard":133}],131:[function(t,e){function i(t,e){t.classList.add("famous-webgl-renderer"),this.canvas=t,this.compositor=e;for(var i in this.constructor.DEFAULT_STYLES)this.canvas.style[i]=this.constructor.DEFAULT_STYLES[i];var o=this.gl=this.getWebGLContext(this.canvas);o.clearColor(0,0,0,0),o.polygonOffset(.1,.1),o.enable(o.POLYGON_OFFSET_FILL),o.enable(o.DEPTH_TEST),o.enable(o.BLEND),o.depthFunc(o.LEQUAL),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.enable(o.CULL_FACE),o.cullFace(o.BACK),this.meshRegistry={},this.meshRegistryKeys=[],this.cutoutRegistry={},this.cutoutRegistryKeys=[],this.numLights=0,this.ambientLightColor=[0,0,0],this.lightRegistry={},this.lightRegistryKeys=[],this.lightPositions=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.lightColors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.textureManager=new l(o),this.texCache={},this.bufferRegistry=new n(o),this.program=new a(o,{debug:!0}),this.state={boundArrayBuffer:null,boundElementBuffer:null,lastDrawn:null,enabledAttributes:{},enabledAttributesKeys:[]},this.resolutionName=["u_resolution"],this.resolutionValues=[],this.cachedSize=[],this.projectionTransform=[1,0,0,0,0,1,0,0,0,0,-1e-6,0,-1,1,0,1];var r=this.cutoutGeometry=new s;this.bufferRegistry.allocate(r.spec.id,"a_pos",r.spec.bufferValues[0],3),this.bufferRegistry.allocate(r.spec.id,"a_texCoord",r.spec.bufferValues[1],2),this.bufferRegistry.allocate(r.spec.id,"a_normals",r.spec.bufferValues[2],3),this.bufferRegistry.allocate(r.spec.id,"indices",r.spec.bufferValues[3],1)}var a=t("./Program"),n=t("./BufferRegistry"),s=t("../webgl-geometries/primitives/Plane"),o=t("./radixSort"),r=t("../utilities/keyValueToArrays"),l=t("./TextureManager"),p=t("./compileMaterial"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],u=r({u_numLights:0,u_ambientLight:new Array(3),u_lightPosition:new Array(3),u_lightColor:new Array(3),u_perspective:new Array(16),u_time:0,u_view:new Array(16)});i.prototype.getWebGLContext=function(t){for(var e=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=null,a=0;a<e.length;a++){try{i=t.getContext(e[a])}catch(t){var n="Error creating WebGL context: "+t.prototype.toString();console.error(n)}if(i)break}return i?i:!1},i.prototype.createLight=function(t){return this.numLights++,this.lightRegistryKeys.push(t),this.lightRegistry[t]={color:[0,0,0],position:[0,0,0]},this.lightRegistry[t]},i.prototype.createMesh=function(t){this.meshRegistryKeys.push(t);var e=r({u_opacity:1,u_transform:c,u_size:[0,0,0],u_baseColor:[.5,.5,.5,1],u_positionOffset:[0,0,0],u_normals:[0,0,0],u_flatShading:0,u_glossiness:[0,0,0,0]});return this.meshRegistry[t]={depth:null,uniformKeys:e.keys,uniformValues:e.values,buffers:{},geometry:null,drawType:null,textures:[],visible:!0},this.meshRegistry[t]},i.prototype.setCutoutState=function(t,e){var i=this.getOrSetCutout(t);i.visible=e},i.prototype.getOrSetCutout=function(t){if(this.cutoutRegistry[t])return this.cutoutRegistry[t];var e=r({u_opacity:0,u_transform:c.slice(),u_size:[0,0,0],u_origin:[0,0,0],u_baseColor:[0,0,0,1]});return this.cutoutRegistryKeys.push(t),this.cutoutRegistry[t]={uniformKeys:e.keys,uniformValues:e.values,geometry:this.cutoutGeometry.spec.id,drawType:this.cutoutGeometry.spec.type,visible:!0},this.cutoutRegistry[t]},i.prototype.setMeshVisibility=function(t,e){var i=this.meshRegistry[t]||this.createMesh(t);i.visible=e},i.prototype.removeMesh=function(t){var e=this.meshRegistryKeys.indexOf(t);this.meshRegistryKeys.splice(e,1),this.meshRegistry[t]=null},i.prototype.setCutoutUniform=function(t,e,i){var a=this.getOrSetCutout(t),n=a.uniformKeys.indexOf(e);if(Array.isArray(i))for(var s=0,o=i.length;o>s;s++)a.uniformValues[n][s]=i[s];else a.uniformValues[n]=i},i.prototype.setMeshOptions=function(t,e){var i=this.meshRegistry[t]||this.createMesh(t);return i.options=e,this},i.prototype.setAmbientLightColor=function(t,e,i,a){return this.ambientLightColor[0]=e,this.ambientLightColor[1]=i,this.ambientLightColor[2]=a,this},i.prototype.setLightPosition=function(t,e,i,a){var n=this.lightRegistry[t]||this.createLight(t);return n.position[0]=e,n.position[1]=i,n.position[2]=a,this},i.prototype.setLightColor=function(t,e,i,a){var n=this.lightRegistry[t]||this.createLight(t);return n.color[0]=e,n.color[1]=i,n.color[2]=a,this},i.prototype.handleMaterialInput=function(t,e,i){var a=this.meshRegistry[t]||this.createMesh(t);i=p(i,a.textures.length),a.uniformValues[a.uniformKeys.indexOf(e)][0]=-i._id;for(var n=i.textures.length;n--;)a.textures.push(this.textureManager.register(i.textures[n],a.textures.length+n));return this.program.registerMaterial(e,i),this.updateSize()},i.prototype.setGeometry=function(t,e,i,a){var n=this.meshRegistry[t]||this.createMesh(t);return n.geometry=e,n.drawType=i,n.dynamic=a,this},i.prototype.setMeshUniform=function(t,e,i){var a=this.meshRegistry[t]||this.createMesh(t),n=a.uniformKeys.indexOf(e);-1===n?(a.uniformKeys.push(e),a.uniformValues.push(i)):a.uniformValues[n]=i},i.prototype.bufferData=function(t,e,i,a,n,s){return this.bufferRegistry.allocate(e,i,a,n,s),this},i.prototype.draw=function(t){var e=this.compositor.getTime();this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.textureManager.update(e),this.meshRegistryKeys=o(this.meshRegistryKeys,this.meshRegistry),this.setGlobalUniforms(t),this.drawCutouts(),this.drawMeshes()},i.prototype.drawMeshes=function(){for(var t,e,i=this.gl,a=0;a<this.meshRegistryKeys.length;a++)if(e=this.meshRegistry[this.meshRegistryKeys[a]],t=this.bufferRegistry.registry[e.geometry],e.visible&&(e.uniformValues[0]<1?(i.depthMask(!1),i.enable(i.BLEND)):(i.depthMask(!0),i.disable(i.BLEND)),t)){for(var n=e.textures.length;n--;)this.textureManager.bindTexture(e.textures[n]);e.options&&this.handleOptions(e.options,e),this.program.setUniforms(e.uniformKeys,e.uniformValues),this.drawBuffers(t,e.drawType,e.geometry),e.options&&this.resetOptions(e.options)}},i.prototype.drawCutouts=function(){var t,e,i=this.cutoutRegistryKeys.length;i&&(this.gl.enable(this.gl.BLEND),this.gl.depthMask(!0));for(var a=0;i>a;a++)t=this.cutoutRegistry[this.cutoutRegistryKeys[a]],e=this.bufferRegistry.registry[t.geometry],t.visible&&(this.program.setUniforms(t.uniformKeys,t.uniformValues),this.drawBuffers(e,t.drawType,t.geometry))},i.prototype.setGlobalUniforms=function(t){for(var e,i,a=0,n=this.lightRegistryKeys.length;n>a;a++)e=this.lightRegistry[this.lightRegistryKeys[a]],i=4*a,this.lightPositions[0+i]=e.position[0],this.lightPositions[1+i]=e.position[1],this.lightPositions[2+i]=e.position[2],this.lightColors[0+i]=e.color[0],this.lightColors[1+i]=e.color[1],this.lightColors[2+i]=e.color[2];u.values[0]=this.numLights,u.values[1]=this.ambientLightColor,u.values[2]=this.lightPositions,u.values[3]=this.lightColors,this.projectionTransform[0]=1/(.5*this.cachedSize[0]),this.projectionTransform[5]=-1/(.5*this.cachedSize[1]),this.projectionTransform[11]=t.perspectiveTransform[11],u.values[4]=this.projectionTransform,u.values[5]=.001*this.compositor.getTime(),u.values[6]=t.viewTransform,this.program.setUniforms(u.keys,u.values)},i.prototype.drawBuffers=function(t,e,i){var a,n,s,o,r,l,p,c,u=this.gl,h=0;for(l=t.keys.length,c=0;l>c;c++)a=t.keys[c],"indices"!==a?(n=this.program.attributeLocations[a],-1!==n&&(void 0!==n||(n=u.getAttribLocation(this.program.program,a),this.program.attributeLocations[a]=n,-1!==n))&&(this.state.enabledAttributes[a]||(u.enableVertexAttribArray(n),this.state.enabledAttributes[a]=!0,this.state.enabledAttributesKeys.push(a)),r=t.values[c],s=t.spacing[c],o=t.offset[c],h=t.length[c],this.state.boundArrayBuffer!==r&&(u.bindBuffer(r.target,r.buffer),this.state.boundArrayBuffer=r),this.state.lastDrawn!==i&&u.vertexAttribPointer(n,s,u.FLOAT,u.FALSE,0,4*o))):p=c;var d=this.state.enabledAttributesKeys.length;for(c=0;d>c;c++){var m=this.state.enabledAttributesKeys[c];this.state.enabledAttributes[m]&&-1===t.keys.indexOf(m)&&(u.disableVertexAttribArray(this.program.attributeLocations[m]),this.state.enabledAttributes[m]=!1)}h&&(void 0!==p?(r=t.values[p],o=t.offset[p],s=t.spacing[p],h=t.length[p],this.state.boundElementBuffer!==r&&(u.bindBuffer(r.target,r.buffer),this.state.boundElementBuffer=r),u.drawElements(u[e],h,u.UNSIGNED_SHORT,2*o)):u.drawArrays(u[e],0,h)),this.state.lastDrawn=i},i.prototype.updateSize=function(t){return t&&(this.cachedSize[0]=t[0],this.cachedSize[1]=t[1],this.cachedSize[2]=t[0]>t[1]?t[0]:t[1]),this.gl.viewport(0,0,this.cachedSize[0],this.cachedSize[1]),this.resolutionValues[0]=this.cachedSize,this.program.setUniforms(this.resolutionName,this.resolutionValues),this},i.prototype.handleOptions=function(t,e){var i=this.gl;t&&("double"===t.side&&(this.gl.cullFace(this.gl.FRONT),this.drawBuffers(this.bufferRegistry.registry[e.geometry],e.drawType,e.geometry),this.gl.cullFace(this.gl.BACK)),t.blending&&i.blendFunc(i.SRC_ALPHA,i.ONE),"back"===t.side&&i.cullFace(i.FRONT))},i.prototype.resetOptions=function(t){var e=this.gl;t&&(t.blending&&e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),"back"===t.side&&e.cullFace(e.BACK))},i.DEFAULT_STYLES={pointerEvents:"none",position:"absolute",zIndex:1,top:"0px",left:"0px"},e.exports=i},{"../utilities/keyValueToArrays":97,"../webgl-geometries/primitives/Plane":112,"./BufferRegistry":126,"./Program":128,"./TextureManager":130,"./compileMaterial":132,"./radixSort":135}],132:[function(t,e){function i(t,e){var i="",l={},c={},u={},h=[],d=[];return a(t,function(t){if(t.chunk){var a=p[n(t)],m=o(t),g=s(t.chunk.glsl,t.inputs,d.length+e);i+=a+m+" = "+g+"\n ",t.uniforms&&r(l,t.uniforms),t.varyings&&r(c,t.varyings),t.attributes&&r(u,t.attributes),t.chunk.defines&&h.push(t.chunk.defines),t.texture&&d.push(t.texture)}}),{_id:t._id,glsl:i+"return "+o(t)+";",defines:h.join("\n"),uniforms:l,varyings:c,attributes:u,textures:d}}function a(t,e){for(var i=t.inputs,n=i&&i.length,s=-1;++s<n;)a(i[s],e);return e(t),t}function n(t){if("number"==typeof t)return 1;if(Array.isArray(t))return t.length;var e=t.chunk.output;if("number"==typeof e)return e;var i=t.inputs.map(function(t){return n(t)}).join(",");return e[i]}function s(t,e,i){return t.replace(/%\d/g,function(t){return o(e[t[1]-1])}).replace(/\$TEXTURE/,"u_textures["+i+"]")}function o(t){return Array.isArray(t)?l(t):"object"==typeof t?"fa_"+t._id:t.toFixed(6)}function r(t,e){for(var i in e)t[i]=e[i]}function l(t){var e=t.length;return"vec"+e+"("+t.join(",")+")"}var p={1:"float ",2:"vec2 ",3:"vec3 ",4:"vec4 "};e.exports=i},{}],133:[function(t,e){function i(){var t=document.createElement("canvas").getContext("2d");t.canvas.width=t.canvas.height=128;for(var e=0;e<t.canvas.height;e+=16)for(var i=0;i<t.canvas.width;i+=16)t.fillStyle=16&(i^e)?"#FFF":"#DDD",t.fillRect(i,e,16,16);return t.canvas}e.exports=i},{}],134:[function(t,e){e.exports={Buffer:t("./Buffer"),BufferRegistry:t("./BufferRegistry"),createCheckerboard:t("./createCheckerboard"),Program:t("./Program"),WebGLRenderer:t("./WebGLRenderer"),Texture:t("./Texture")}},{"./Buffer":125,"./BufferRegistry":126,"./Program":128,"./Texture":129,"./WebGLRenderer":131,"./createCheckerboard":133}],135:[function(t,e){function i(t,e,i){var a=t[i],n=e[a];return(n.depth?n.depth:e[a].uniformValues[1][14])+f}function a(t,e,i,a){var n=t[i];return e[n].depth=o(a)-f,n}function n(t,e,i){e[t[i]].depth=null}function s(t){return _[0]=t,v[0]}function o(t){return v[0]=t,_[0]}function r(t,e){var o,r,h,f,y,_,v,S,x,A,b,T=0,z=[];for(m=32/l+.999999999999999|0,o=0,f=p*m;f>o;o++)u[o]=0;for(o=0,f=t.length;f>o;o++){for(y=s(i(t,e,o)),y^=y>>31|2147483648,r=0,h=0;g>r;r+=p,h+=l)u[r+(y>>>h&c)]++;u[r+(y>>>h&d)]++}for(r=0;g>=r;r+=p)for(S=r,x=0;r+p>S;S++)A=u[S]+x,u[S]=x-1,x=A;if(--m){for(o=0,f=t.length;f>o;o++)y=s(i(t,e,o)),z[++u[y&c]]=a(t,e,o,y^=y>>31|2147483648);for(v=z,z=t,t=v;++T<m;){for(o=0,f=t.length,_=T*p,b=T*l;f>o;o++)y=s(i(t,e,o)),z[++u[_+(y>>>b&c)]]=t[o];v=z,z=t,t=v}}for(o=0,f=t.length,_=T*p,b=T*l;f>o;o++)y=s(i(t,e,o)),z[++u[_+(y>>>b&d)]]=a(t,e,o,y^(~y>>31|2147483648)),n(t,e,o);return z}var l=11,p=1<<l,c=p-1,u=new Array(p*Math.ceil(64/l)),h=1<<31%l,d=(h<<1)-1,m=32/l+.999999999999999|0,g=p*(m-1),f=Math.pow(20,6),y=new ArrayBuffer(4),_=new Float32Array(y,0,1),v=new Int32Array(y,0,1);e.exports=r},{}],136:[function(t,e){var i=(t("glslify"),t("glslify/simple-adapter.js")("\n#define GLSLIFY 1\n\nmat3 a_x_getNormalMatrix(in mat4 t) {\n  mat3 matNorm;\n  mat4 a = t;\n  float a00 = a[0][0], a01 = a[0][1], a02 = a[0][2], a03 = a[0][3], a10 = a[1][0], a11 = a[1][1], a12 = a[1][2], a13 = a[1][3], a20 = a[2][0], a21 = a[2][1], a22 = a[2][2], a23 = a[2][3], a30 = a[3][0], a31 = a[3][1], a32 = a[3][2], a33 = a[3][3], b00 = a00 * a11 - a01 * a10, b01 = a00 * a12 - a02 * a10, b02 = a00 * a13 - a03 * a10, b03 = a01 * a12 - a02 * a11, b04 = a01 * a13 - a03 * a11, b05 = a02 * a13 - a03 * a12, b06 = a20 * a31 - a21 * a30, b07 = a20 * a32 - a22 * a30, b08 = a20 * a33 - a23 * a30, b09 = a21 * a32 - a22 * a31, b10 = a21 * a33 - a23 * a31, b11 = a22 * a33 - a23 * a32, det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  det = 1.0 / det;\n  matNorm[0][0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  matNorm[0][1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  matNorm[0][2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  matNorm[1][0] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  matNorm[1][1] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  matNorm[1][2] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  matNorm[2][0] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  matNorm[2][1] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  matNorm[2][2] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return matNorm;\n}\nfloat b_x_inverse(float m) {\n  return 1.0 / m;\n}\nmat2 b_x_inverse(mat2 m) {\n  return mat2(m[1][1], -m[0][1], -m[1][0], m[0][0]) / (m[0][0] * m[1][1] - m[0][1] * m[1][0]);\n}\nmat3 b_x_inverse(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11), b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10), b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\nmat4 b_x_inverse(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3], a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3], a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3], a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3], b00 = a00 * a11 - a01 * a10, b01 = a00 * a12 - a02 * a10, b02 = a00 * a13 - a03 * a10, b03 = a01 * a12 - a02 * a11, b04 = a01 * a13 - a03 * a11, b05 = a02 * a13 - a03 * a12, b06 = a20 * a31 - a21 * a30, b07 = a20 * a32 - a22 * a30, b08 = a20 * a33 - a23 * a30, b09 = a21 * a32 - a22 * a31, b10 = a21 * a33 - a23 * a31, b11 = a22 * a33 - a23 * a32, det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  return mat4(a11 * b11 - a12 * b10 + a13 * b09, a02 * b10 - a01 * b11 - a03 * b09, a31 * b05 - a32 * b04 + a33 * b03, a22 * b04 - a21 * b05 - a23 * b03, a12 * b08 - a10 * b11 - a13 * b07, a00 * b11 - a02 * b08 + a03 * b07, a32 * b02 - a30 * b05 - a33 * b01, a20 * b05 - a22 * b02 + a23 * b01, a10 * b10 - a11 * b08 + a13 * b06, a01 * b08 - a00 * b10 - a03 * b06, a30 * b04 - a31 * b02 + a33 * b00, a21 * b02 - a20 * b04 - a23 * b00, a11 * b07 - a10 * b09 - a12 * b06, a00 * b09 - a01 * b07 + a02 * b06, a31 * b01 - a30 * b03 - a32 * b00, a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\nfloat c_x_transpose(float m) {\n  return m;\n}\nmat2 c_x_transpose(mat2 m) {\n  return mat2(m[0][0], m[1][0], m[0][1], m[1][1]);\n}\nmat3 c_x_transpose(mat3 m) {\n  return mat3(m[0][0], m[1][0], m[2][0], m[0][1], m[1][1], m[2][1], m[0][2], m[1][2], m[2][2]);\n}\nmat4 c_x_transpose(mat4 m) {\n  return mat4(m[0][0], m[1][0], m[2][0], m[3][0], m[0][1], m[1][1], m[2][1], m[3][1], m[0][2], m[1][2], m[2][2], m[3][2], m[0][3], m[1][3], m[2][3], m[3][3]);\n}\nvec4 applyTransform(vec4 pos) {\n  mat4 MVMatrix = u_view * u_transform;\n  pos.x += 1.0;\n  pos.y -= 1.0;\n  pos.xyz *= u_size * 0.5;\n  pos.y *= -1.0;\n  v_position = (MVMatrix * pos).xyz;\n  v_eyeVector = (u_resolution * 0.5) - v_position;\n  pos = u_perspective * MVMatrix * pos;\n  return pos;\n}\n#vert_definitions\n\nvec3 calculateOffset(vec3 ID) {\n  \n  #vert_applications\n  return vec3(0.0);\n}\nvoid main() {\n  v_textureCoordinate = a_texCoord;\n  vec3 invertedNormals = a_normals + (u_normals.x < 0.0 ? calculateOffset(u_normals) * 2.0 - 1.0 : vec3(0.0));\n  invertedNormals.y *= -1.0;\n  v_normal = c_x_transpose(mat3(b_x_inverse(u_transform))) * invertedNormals;\n  vec3 offsetPos = a_pos + calculateOffset(u_positionOffset);\n  gl_Position = applyTransform(vec4(offsetPos, 1.0));\n}","\n#define GLSLIFY 1\n\n#float_definitions\n\nfloat a_x_applyMaterial(float ID) {\n  \n  #float_applications\n  return 1.;\n}\n#vec3_definitions\n\nvec3 a_x_applyMaterial(vec3 ID) {\n  \n  #vec3_applications\n  return vec3(0);\n}\n#vec4_definitions\n\nvec4 a_x_applyMaterial(vec4 ID) {\n  \n  #vec4_applications\n  return vec4(0);\n}\nvec4 b_x_applyLight(in vec4 baseColor, in vec3 normal, in vec4 glossiness) {\n  int numLights = int(u_numLights);\n  vec3 ambientColor = u_ambientLight * baseColor.rgb;\n  vec3 eyeVector = normalize(v_eyeVector);\n  vec3 diffuse = vec3(0.0);\n  bool hasGlossiness = glossiness.a > 0.0;\n  bool hasSpecularColor = length(glossiness.rgb) > 0.0;\n  for(int i = 0; i < 4; i++) {\n    if(i >= numLights)\n      break;\n    vec3 lightDirection = normalize(u_lightPosition[i].xyz - v_position);\n    float lambertian = max(dot(lightDirection, normal), 0.0);\n    if(lambertian > 0.0) {\n      diffuse += u_lightColor[i].rgb * baseColor.rgb * lambertian;\n      if(hasGlossiness) {\n        vec3 halfVector = normalize(lightDirection + eyeVector);\n        float specularWeight = pow(max(dot(halfVector, normal), 0.0), glossiness.a);\n        vec3 specularColor = hasSpecularColor ? glossiness.rgb : u_lightColor[i].rgb;\n        diffuse += specularColor * specularWeight * lambertian;\n      }\n    }\n  }\n  return vec4(ambientColor + diffuse, baseColor.a);\n}\nvoid main() {\n  vec4 material = u_baseColor.r >= 0.0 ? u_baseColor : a_x_applyMaterial(u_baseColor);\n  bool lightsEnabled = (u_flatShading == 0.0) && (u_numLights > 0.0 || length(u_ambientLight) > 0.0);\n  vec3 normal = normalize(v_normal);\n  vec4 glossiness = u_glossiness.x < 0.0 ? a_x_applyMaterial(u_glossiness) : u_glossiness;\n  vec4 color = lightsEnabled ? b_x_applyLight(material, normalize(v_normal), glossiness) : material;\n  gl_FragColor = color;\n  gl_FragColor.a *= u_opacity;\n}",[],[]));e.exports=i},{glslify:46,"glslify/simple-adapter.js":47}]},{},[40])(40)}),i("helpers/StatsTimer",["require","exports","module"],function(t,e,i){function a(){}a.prototype.createTimer=function(){var t=function(){var t=Date.now(),e=t,i=0,a=1/0,n=0,s=0,o=1/0,r=0,l=0,p=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(t){t.preventDefault(),_(++p%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var u=document.createElement("div");u.id="fps",u.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(u);var h=document.createElement("div");h.id="fpsText",h.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",h.innerHTML="FPS",u.appendChild(h);var d=document.createElement("div");for(d.id="fpsGraph",d.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",u.appendChild(d);74>d.children.length;){var m=document.createElement("span");
m.style.cssText="width:1px;height:30px;float:left;background-color:#113",d.appendChild(m)}var g=document.createElement("div");g.id="ms",g.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(g);var f=document.createElement("div");f.id="msText",f.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",f.innerHTML="MS",g.appendChild(f);var y=document.createElement("div");for(y.id="msGraph",y.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",g.appendChild(y);74>y.children.length;)m=document.createElement("span"),m.style.cssText="width:1px;height:30px;float:left;background-color:#131",y.appendChild(m);var _=function(t){switch(p=t){case 0:u.style.display="block",g.style.display="none";break;case 1:u.style.display="none",g.style.display="block"}};return{REVISION:12,domElement:c,setMode:_,begin:function(){t=Date.now()},end:function(){var p=Date.now();i=p-t,a=Math.min(a,i),n=Math.max(n,i),f.textContent=i+" MS ("+a+"-"+n+")";var c=Math.min(30,30-30*(i/200));return y.appendChild(y.firstChild).style.height=c+"px",l++,p>e+1e3&&(s=Math.round(1e3*l/(p-e)),o=Math.min(o,s),r=Math.max(r,s),h.textContent=s+" FPS ("+o+"-"+r+")",c=Math.min(30,30-30*(s/100)),d.appendChild(d.firstChild).style.height=c+"px",e=p,l=0),p},update:function(){t=this.end()}}};"object"==typeof i&&(i.exports=t);var e=new t;return e.setMode(0),e.domElement.style.position="absolute",e.domElement.style.left="0px",e.domElement.style.top="0px",document.body.appendChild(e.domElement),e},i.exports=a}),i("helpers/OrientationController",["require","exports","module"],function(t,e,i){function a(){this.reset()}a.prototype.constructor=a,a.prototype.reset=function(){this.started=!1,this.baseOrientation=void 0,this.orientationDifference=[0,0,0],this.lastValue={orientationDifference:this.orientationDifference,timeStamp:Date.now()},this.orientationDifferenceAt=function(){return this.lastValue.orientationDifference}},a.prototype.interpolate=function(t,e,i,a){var n=function(n){return e+(a-e)*((n-t)/(i-t))};return n.m=(a-e)/(i-t),n.text="y = "+n.m+"x",n},a.prototype.makeOrientationFunction=function(t){var e=this,i=this.lastValue,a=t,n=[void 0,void 0,void 0];n=n.map(function(t,n){var s=i.timeStamp,o=i.orientationDifference[n],r=a.timeStamp,l=a.orientationDifference[n],p=e.interpolate(s,o,r,l);return p}),window.watchh=n;var s=function(t){var e;return e=t>=a.timeStamp?a.orientationDifference:[n[0](t),n[1](t),n[2](t)],this.lastValue={orientationDifference:e,timeStamp:t},e};return s},a.prototype.reInterpolate=function(t,e,i,a){var n=function(n){return e+(a-e)*((n-t)/(i-t))};return n},a.prototype.normalize=function(t){return t[0]=-t[0],t},a.prototype.startListening=function(){var t=this;window.DeviceOrientationEvent&&(t.started=!0,window.addEventListener("deviceorientation",function(e){var i=[e.gamma,e.beta,e.alpha],a=t.normalize(i);t.baseOrientation||(t.baseOrientation=a);var n=a.map(function(t){return t>30?30:-30>t?-30:t}),s={orientationDifference:n,timeStamp:e.timeStamp+50};t.orientationDifferenceAt=t.makeOrientationFunction(s)}))},i.exports=a}),this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="NEXT",t.buildDate="Tue, 19 May 2015 17:26:59 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){var i=t.prototype,a=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(a){i[(e+="_")+"constructor"]=a.constructor;for(var n in a)i.hasOwnProperty(n)&&"function"==typeof a[n]&&(i[e+n]=a[n])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){for(var i=0,a=t.length;a>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var a;a=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=a[t];return n&&this.removeEventListener(t,e,i),n=a[t],n?n.push(e):a[t]=[e],e},e.on=function(t,e,i,a,n,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,n),a&&t.remove()},s)},e.removeEventListener=function(t,e,i){var a=i?this._captureListeners:this._listeners;if(a){var n=a[t];if(n)for(var s=0,o=n.length;o>s;s++)if(n[s]==e){1==o?delete a[t]:n.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(i){}if(t.bubbles&&this.parent){for(var a=this,n=[a];a.parent;)n.push(a=a.parent);var s,o=n.length;for(s=o-1;s>=0&&!t.propagationStopped;s--)n[s]._dispatchEvent(t,1+(0==s));for(s=1;o>s&&!t.propagationStopped;s++)n[s]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,a=1==e?this._captureListeners:this._listeners;if(t&&a){var n=a[t.type];if(!n||!(i=n.length))return;try{t.currentTarget=this}catch(s){}try{t.eventPhase=e}catch(s){}t.removed=!1,n=n.slice();for(var o=0;i>o&&!t.immediatePropagationStopped;o++){var r=n[o];r.handleEvent?r.handleEvent(t):r(t),t.removed&&(this.off(t.type,r,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(t,"Event")}(window),this.createjs=this.createjs||{},function(){function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var a=new t;return a.src=e,a}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={};t.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,t.RELATIVE_PATT=/^[./]*?\//i,t.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,t.parseURI=function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var a=e.indexOf("?");a>-1&&(e=e.substr(0,a));var n;return t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},t.formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var a in t)i.push(a+"="+escape(t[a]));return e&&(i=i.concat(e)),i.join("&")},t.buildPath=function(t,e){if(null==e)return t;var i=[],a=t.indexOf("?");if(-1!=a){var n=t.slice(a+1);i=i.concat(n.split("&"))}return-1!=a?t.slice(0,a)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},t.isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");i.href=location.href;var a=""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname);return a},t.isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},t.isBinary=function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},t.isImageTag=function(t){return t instanceof HTMLImageElement},t.isAudioTag=function(t){return window.HTMLAudioElement?t instanceof HTMLAudioElement:!1},t.isVideoTag=function(t){return window.HTMLVideoElement?t instanceof HTMLVideoElement:!1},t.isText=function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},t.getTypeByExtension=function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),i=this;e instanceof Function?e(function(t){i._result=t,i._sendComplete()}):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(t.type)}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)return void this._handleError(t);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},a=null;if(window.XMLHttpRequest)a=new XMLHttpRequest,e&&void 0===a.withCredentials&&window.XDomainRequest&&(a=new XDomainRequest);else{for(var n=0,o=s.ACTIVEX_VERSIONS.length;o>n;n++){s.ACTIVEX_VERSIONS[n];try{a=new ActiveXObject(axVersions);break}catch(r){}}if(null==a)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof a.responseType?2:1;var l=null;if(l=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,a.open(t.method||createjs.AbstractLoader.GET,l,!0),e&&a instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var p in t.headers)i[p]=t.headers[p];for(p in i)a.setRequestHeader(p,i[p]);return a instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(a.withCredentials=t.withCredentials),this._request=a,!0},e._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){var t=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},e=t.prototype={},i=t;i.create=function(t){if(t instanceof i||t instanceof Object){var e=new createjs.PlayPropsConfig;return e.set(t),e}throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=i}(),this.createjs=this.createjs||{},function(){function t(){throw"Sound cannot be instantiated"}function e(t,e){this.init(t,e)}var i=t;i.INTERRUPT_ANY="any",i.INTERRUPT_EARLY="early",i.INTERRUPT_LATE="late",i.INTERRUPT_NONE="none",i.PLAY_INITED="playInited",i.PLAY_SUCCEEDED="playSucceeded",i.PLAY_INTERRUPTED="playInterrupted",i.PLAY_FINISHED="playFinished",i.PLAY_FAILED="playFailed",i.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],i.EXTENSION_MAP={m4a:"mp4"},i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,i.defaultInterruptBehavior=i.INTERRUPT_NONE,i.alternateExtensions=[],i.activePlugin=null,i._masterVolume=1,Object.defineProperty(i,"volume",{get:function(){return this._masterVolume},set:function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,a=0,n=e.length;n>a;a++)e[a].setMasterVolume(t)}}),i._masterMute=!1,Object.defineProperty(i,"muted",{get:function(){return this._masterMute},set:function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,a=e.length;a>i;i++)e[i].setMasterMute(t);return!0}}),Object.defineProperty(i,"capabilities",{get:function(){return null==i.activePlugin?null:i.activePlugin._capabilities},set:function(){return!1}}),i._pluginsRegistered=!1,i._lastID=0,i._instances=[],i._idHash={},i._preloadHash={},i._defaultPlayPropsHash={},i.addEventListener=null,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,createjs.EventDispatcher.initialize(i),i.getPreloadHandlers=function(){return{callback:createjs.proxy(i.initLoad,i),types:["sound"],extensions:i.SUPPORTED_EXTENSIONS}},i._handleLoadComplete=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var a=0,n=i._preloadHash[e].length;n>a;a++){var s=i._preloadHash[e][a];if(i._preloadHash[e][a]=!0,i.hasEventListener("fileload")){var t=new createjs.Event("fileload");t.src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}}},i._handleLoadError=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var a=0,n=i._preloadHash[e].length;n>a;a++){var s=i._preloadHash[e][a];if(i._preloadHash[e][a]=!1,i.hasEventListener("fileerror")){var t=new createjs.Event("fileerror");t.src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}}},i._registerPlugin=function(t){return t.isSupported()?(i.activePlugin=new t,!0):!1},i.registerPlugins=function(t){i._pluginsRegistered=!0;for(var e=0,a=t.length;a>e;e++)if(i._registerPlugin(t[e]))return!0;return!1},i.initializeDefaultPlugins=function(){return null!=i.activePlugin?!0:i._pluginsRegistered?!1:i.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},i.isReady=function(){return null!=i.activePlugin},i.getCapabilities=function(){return null==i.activePlugin?null:i.activePlugin._capabilities},i.getCapability=function(t){return null==i.activePlugin?null:i.activePlugin._capabilities[t]},i.initLoad=function(t){return i._registerSound(t)},i._registerSound=function(t){if(!i.initializeDefaultPlugins())return!1;var a;if(t.src instanceof Object?(a=i._parseSrc(t.src),a.src=t.path+a.src):a=i._parsePath(t.src),null==a)return!1;t.src=a.src,t.type="sound";var n=t.data,s=null;if(null!=n&&(isNaN(n.channels)?isNaN(n)||(s=parseInt(n)):s=parseInt(n.channels),n.audioSprite))for(var o,r=n.audioSprite.length;r--;)o=n.audioSprite[r],i._idHash[o.id]={src:t.src,startTime:parseInt(o.startTime),duration:parseInt(o.duration)},o.defaultPlayProps&&(i._defaultPlayPropsHash[o.id]=createjs.PlayPropsConfig.create(o.defaultPlayProps));null!=t.id&&(i._idHash[t.id]={src:t.src});var l=i.activePlugin.register(t);return e.create(t.src,s),null!=n&&isNaN(n)?t.data.channels=s||e.maxPerChannel():t.data=s||e.maxPerChannel(),l.type&&(t.type=l.type),t.defaultPlayProps&&(i._defaultPlayPropsHash[t.src]=createjs.PlayPropsConfig.create(t.defaultPlayProps)),l},i.registerSound=function(t,e,a,n,s){var o={src:t,id:e,data:a,defaultPlayProps:s};t instanceof Object&&t.src&&(n=e,o=t),o=createjs.LoadItem.create(o),o.path=n,null==n||o.src instanceof Object||(o.src=n+t);var r=i._registerSound(o);if(!r)return!1;if(i._preloadHash[o.src]||(i._preloadHash[o.src]=[]),i._preloadHash[o.src].push(o),1==i._preloadHash[o.src].length)r.on("complete",createjs.proxy(this._handleLoadComplete,this)),r.on("error",createjs.proxy(this._handleLoadError,this)),i.activePlugin.preload(r);else if(1==i._preloadHash[o.src][0])return!0;return o},i.registerSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var a=0,n=t.length;n>a;a++)i[a]=createjs.Sound.registerSound(t[a].src,t[a].id,t[a].data,e,t[a].defaultPlayProps);return i},i.removeSound=function(t,a){if(null==i.activePlugin)return!1;t instanceof Object&&t.src&&(t=t.src);var n;if(t instanceof Object?n=i._parseSrc(t):(t=i._getSrcById(t).src,n=i._parsePath(t)),null==n)return!1;t=n.src,null!=a&&(t=a+t);for(var s in i._idHash)i._idHash[s].src==t&&delete i._idHash[s];return e.removeSrc(t),delete i._preloadHash[t],i.activePlugin.removeSound(t),!0},i.removeSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var a=0,n=t.length;n>a;a++)i[a]=createjs.Sound.removeSound(t[a].src,e);return i},i.removeAllSounds=function(){i._idHash={},i._preloadHash={},e.removeAll(),i.activePlugin&&i.activePlugin.removeAllSounds()},i.loadComplete=function(t){if(!i.isReady())return!1;var e=i._parsePath(t);return t=e?i._getSrcById(e.src).src:i._getSrcById(t).src,void 0==i._preloadHash[t]?!1:1==i._preloadHash[t][0]},i._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var e=t.match(i.FILE_PATTERN);if(null==e)return!1;for(var a=e[4],n=e[5],s=i.capabilities,o=0;!s[n];)if(n=i.alternateExtensions[o++],o>i.alternateExtensions.length)return null;t=t.replace("."+e[5],"."+n);var r={name:a,src:t,extension:n};
return r},i._parseSrc=function(t){var e={name:void 0,src:void 0,extension:void 0},a=i.capabilities;for(var n in t)if(t.hasOwnProperty(n)&&a[n]){e.src=t[n],e.extension=n;break}if(!e.src)return!1;var s=e.src.lastIndexOf("/");return e.name=-1!=s?e.src.slice(s+1):e.src,e},i.play=function(t,e,a,n,s,o,r,l,p){var c;c=createjs.PlayPropsConfig.create(e instanceof Object||e instanceof createjs.PlayPropsConfig?e:{interrupt:e,delay:a,offset:n,loop:s,volume:o,pan:r,startTime:l,duration:p});var u=i.createInstance(t,c.startTime,c.duration),h=i._playInstance(u,c);return h||u._playFailed(),u},i.createInstance=function(t,a,n){if(!i.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,a,n);var s=i._defaultPlayPropsHash[t];t=i._getSrcById(t);var o=i._parsePath(t.src),r=null;return null!=o&&null!=o.src?(e.create(o.src),null==a&&(a=t.startTime),r=i.activePlugin.create(o.src,a,n||t.duration),s=s||i._defaultPlayPropsHash[o.src],s&&r.applyPlayProps(s)):r=new createjs.DefaultSoundInstance(t,a,n),r.uniqueId=i._lastID++,r},i.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},i.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,a=0,n=e.length;n>a;a++)e[a].setMasterVolume(t)},i.getVolume=function(){return this._masterVolume},i.setMute=function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,a=e.length;a>i;i++)e[i].setMasterMute(t);return!0},i.getMute=function(){return this._masterMute},i.setDefaultPlayProps=function(t,e){t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]=createjs.PlayPropsConfig.create(e)},i.getDefaultPlayProps=function(t){return t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]},i._playInstance=function(t,e){var a=i._defaultPlayPropsHash[t.src]||{};if(null==e.interrupt&&(e.interrupt=a.interrupt||i.defaultInterruptBehavior),null==e.delay&&(e.delay=a.delay||0),null==e.offset&&(e.offset=t.getPosition()),null==e.loop&&(e.loop=t.loop),null==e.volume&&(e.volume=t.volume),null==e.pan&&(e.pan=t.pan),0==e.delay){var n=i._beginPlaying(t,e);if(!n)return!1}else{var s=setTimeout(function(){i._beginPlaying(t,e)},e.delay);t.delayTimeoutId=s}return this._instances.push(t),!0},i._beginPlaying=function(t,i){if(!e.add(t,i.interrupt))return!1;var a=t._beginPlaying(i);if(!a){var n=createjs.indexOf(this._instances,t);return n>-1&&this._instances.splice(n,1),!1}return!0},i._getSrcById=function(t){return i._idHash[t]||{src:t}},i._playFinished=function(t){e.remove(t);var i=createjs.indexOf(this._instances,t);i>-1&&this._instances.splice(i,1)},createjs.Sound=t,e.channels={},e.create=function(t,i){var a=e.get(t);return null==a?(e.channels[t]=new e(t,i),!0):!1},e.removeSrc=function(t){var i=e.get(t);return null==i?!1:(i._removeAll(),delete e.channels[t],!0)},e.removeAll=function(){for(var t in e.channels)e.channels[t]._removeAll();e.channels={}},e.add=function(t,i){var a=e.get(t.src);return null==a?!1:a._add(t,i)},e.remove=function(t){var i=e.get(t.src);return null==i?!1:(i._remove(t),!0)},e.maxPerChannel=function(){return a.maxDefault},e.get=function(t){return e.channels[t]};var a=e.prototype;a.constructor=e,a.src=null,a.max=null,a.maxDefault=100,a.length=0,a.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},a._get=function(t){return this._instances[t]},a._add=function(t,e){return this._getSlot(e,t)?(this._instances.push(t),this.length++,!0):!1},a._remove=function(t){var e=createjs.indexOf(this._instances,t);return-1==e?!1:(this._instances.splice(e,1),this.length--,!0)},a._removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},a._getSlot=function(e){var i,a;if(e!=t.INTERRUPT_NONE&&(a=this._get(0),null==a))return!0;for(var n=0,s=this.max;s>n;n++){if(i=this._get(n),null==i)return!0;if(i.playState==t.PLAY_FINISHED||i.playState==t.PLAY_INTERRUPTED||i.playState==t.PLAY_FAILED){a=i;break}e!=t.INTERRUPT_NONE&&(e==t.INTERRUPT_EARLY&&i.getPosition()<a.getPosition()||e==t.INTERRUPT_LATE&&i.getPosition()>a.getPosition())&&(a=i)}return null!=a?(a._interrupt(),this._remove(a),!0):!1},a.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){var t=function(t,e,i,a){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,e||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,i||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),a!==!1&&a!==!0&&this.setPlaybackResource(a),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t,e,i,a,n,s){var o;return o=createjs.PlayPropsConfig.create(t instanceof Object||t instanceof createjs.PlayPropsConfig?t:{interrupt:t,delay:e,offset:i,loop:a,volume:n,pan:s}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(o),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,o),this)},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.applyPlayProps=function(t){return null!=t.offset&&this.setPosition(t.offset),null!=t.loop&&this.setLoop(t.loop),null!=t.volume&&this.setVolume(t.volume),null!=t.pan&&this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){return t!==!0&&t!==!1||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},e.setVolume=function(t){return t==this._volume?this:(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume(),this)},e.getVolume=function(){return this._volume},e.setMuted=function(t){return t===!0||t===!1?(this._muted=t,this._updateVolume(),this):void 0},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan?this:(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan(),this)},e.getPan=function(){return this._pan},e.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getStartTime=function(){return this._startTime},e.setStartTime=function(t){return t==this._startTime?this:(this._startTime=Math.max(0,t||0),this._updateStartTime(),this)},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration?this:(this._duration=Math.max(0,t||0),this._updateDuration(),this)},e.setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t?this._removeLooping(t):0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t){return this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateStartTime=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(){},e._addLooping=function(){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){var t=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){var e=this._loaders[t.src];return e&&!e.canceled?this._loaders[t.src]:(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],e=new this._loaderClass(t),e.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[t.src]=e,e)},e.preload=function(t){t.on("error",createjs.proxy(this._handlePreloadError,this)),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;){var i=this._soundInstances[t][e];i.destroy()}delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,i){this.isPreloadStarted(t)||this.preload(this.register(t));var a=new this._soundInstanceClass(t,e,i,this._audioSources[t]);return this._soundInstances[t].push(a),a},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var i=0,a=this._soundInstances[e].length;a>i;i++){var n=this._soundInstances[e][i];n.setPlaybackResource(this._audioSources[e])}},e._handlePreloadError=function(){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND)}var e=createjs.extend(t,createjs.AbstractLoader);t.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},e._sendComplete=function(){t.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e,a,n){this.AbstractSoundInstance_constructor(t,e,a,n),this.gainNode=i.context.createGain(),this.panNode=i.context.createPanner(),this.panNode.panningModel=i._panningModel,this.panNode.connect(this.gainNode),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i.context=null,i.destinationNode=null,i._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){return t&&(t.stop(0),t.disconnect(0),t=null),t},e._handleSoundReady=function(){this.gainNode.connect(i.destinationNode);var t=.001*this._duration,e=.001*this._position;e>t&&(e=t),this.sourceNode=this._createAndPlayAudioNode(i.context.currentTime-t,e),this._playbackStartTime=this.sourceNode.startTime-e,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(t-e)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var a=i.context.createBufferSource();a.buffer=this.playbackResource,a.connect(this.panNode);var n=.001*this._duration;return a.startTime=t+n,a.start(a.startTime,e+.001*this._startTime,n-e),a},e._pause=function(){this._position=1e3*(i.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(i.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){function t(){this.AbstractPlugin_constructor(),this._panningModel=i._panningModel,this.context=i.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=i._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._capabilities=null,i._panningModel="equalpower",i.context=null,i.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||t||this._isFileXHRSupported()?(i._generateCapabilities(),null==i.context?!1:!0):!1},i.playEmptySound=function(){if(null!=i.context){var t=i.context.createBufferSource();t.buffer=i.context.createBuffer(1,1,22050),t.connect(i.context.destination),t.start(0,0,0)}},i._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch(i){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(i){t=!1}return t},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==i.context)if(window.AudioContext)i.context=new AudioContext;else{if(!window.webkitAudioContext)return null;i.context=new webkitAudioContext}i._compatibilitySetUp(),i.playEmptySound(),i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,a=createjs.Sound.EXTENSION_MAP,n=0,s=e.length;s>n;n++){var o=e[n],r=a[o]||o;i._capabilities[o]="no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)||"no"!=t.canPlayType("audio/"+r)&&""!=t.canPlayType("audio/"+r)}i.context.destination.numberOfChannels<2&&(i._capabilities.panning=!1)}},i._compatibilitySetUp=function(){if(i._panningModel="equalpower",!i.context.createGain){i.context.createGain=i.context.createGainNode;var t=i.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,i._panningModel=0}},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){function t(){throw"HTMLAudioTagPool cannot be instantiated"}function e(){this._tags=[]}var i=t;i._tags={},i._tagPool=new e,i._tagUsed={},i.get=function(t){var e=i._tags[t];return null==e?(e=i._tags[t]=i._tagPool.get(),e.src=t):i._tagUsed[t]?(e=i._tagPool.get(),e.src=t):i._tagUsed[t]=!0,e},i.set=function(t,e){e==i._tags[t]?i._tagUsed[t]=!1:i._tagPool.set(e)},i.remove=function(t){var e=i._tags[t];return null==e?!1:(i._tagPool.set(e),delete i._tags[t],delete i._tagUsed[t],!0)},i.getDuration=function(t){var e=i._tags[t];return null==e?0:1e3*e.duration},createjs.HTMLAudioTagPool=t;var a=e.prototype;a.constructor=e,a.get=function(){var t;return t=0==this._tags.length?this._createTag():this._tags.pop(),null==t.parentNode&&document.body.appendChild(t),t},a.set=function(t){var e=createjs.indexOf(this._tags,t);-1==e&&(this._tags.src=null,this._tags.push(t))},a.toString=function(){return"[TagPool]"},a._createTag=function(){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t}}(),this.createjs=this.createjs||{},function(){function t(t,e,i,a){this.AbstractSoundInstance_constructor(t,e,i,a),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(e+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(){this._updateVolume()},e.setMasterMute=function(){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(e){}createjs.HTMLAudioTagPool.set(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(t)},e._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var t=this._playbackResource;return t.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.preload="auto",void t.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(null!=this._playbackResource){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){function t(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=i._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i.MAX_INSTANCES=30,i._AUDIO_READY="canplaythrough",i._AUDIO_ENDED="ended",i._AUDIO_SEEKED="seeked",i._AUDIO_STALLED="stalled",i._TIME_UPDATE="timeupdate",i._capabilities=null,i.isSupported=function(){return i._generateCapabilities(),null!=i._capabilities},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;i._capabilities={panning:!1,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,a=createjs.Sound.EXTENSION_MAP,n=0,s=e.length;s>n;n++){var o=e[n],r=a[o]||o;i._capabilities[o]="no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)||"no"!=t.canPlayType("audio/"+r)&&""!=t.canPlayType("audio/"+r)}}},e.register=function(t){var e=createjs.HTMLAudioTagPool.get(t.src),i=this.AbstractPlugin_register(t);return i.setTag(e),i},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,i){var a=this.AbstractPlugin_create(t,e,i);return a.setPlaybackResource(null),a},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND),this._media=null,this._loadTime=0,this._TIMER_FREQUENCY=100}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._media=new Media(this._item.src,null,createjs.proxy(this._mediaErrorHandler,this)),this._media.seekTo(0),this._getMediaDuration()},e.toString=function(){return"[CordovaAudioLoader]"},e._mediaErrorHandler=function(){this._media.release(),this._sendError()},e._getMediaDuration=function(){this._result=1e3*this._media.getDuration(),this._result<0?(this._loadTime+=this._TIMER_FREQUENCY,this._loadTime>this._item.loadTimeout?this.handleEvent({type:"timeout"}):setTimeout(createjs.proxy(this._getMediaDuration,this),this._TIMER_FREQUENCY)):(this._media.release(),this._sendComplete())},createjs.CordovaAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e,i,a){this.AbstractSoundInstance_constructor(t,e,i,a),this.playWhenScreenLocked=null,this._playStartTime=null,this._audioSpriteTimeout=null,this._audioSprite=!1,this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteComplete,this),this._mediaPlayFinishedHandler=createjs.proxy(this._handleSoundComplete,this),this._mediaErrorHandler=createjs.proxy(this._handleMediaError,this),this._mediaProgressHandler=createjs.proxy(this._handleMediaProgress,this),this._playbackResource=new Media(t,this._mediaPlayFinishedHandler,this._mediaErrorHandler,this._mediaProgressHandler),i?this._audioSprite=!0:this._setDurationFromSource()}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(){this._updateVolume()},e.setMasterMute=function(){this._updateVolume()},e.destroy=function(){this.AbstractSoundInstance_destroy(),this._playbackResource.release()},e.getCurrentPosition=function(t,e){this._playbackResource.getCurrentPosition(t,e)},e.toString=function(){return"[CordovaAudioSoundInstance]"},e._handleMediaError=function(){clearTimeout(this.delayTimeoutId),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleMediaProgress=function(){},e._handleAudioSpriteComplete=function(){this._playbackResource.pause(),this._handleSoundComplete()},e._handleCleanUp=function(){clearTimeout(this._audioSpriteTimeout),this._playbackResource.pause()},e._handleSoundReady=function(){this._playbackResource.seekTo(this._startTime+this._position),this._audioSprite&&(this._audioSpriteTimeout=setTimeout(this._audioSpriteEndHandler,this._duration-this._position)),this._playbackResource.play({playAudioWhenScreenIsLocked:this.playWhenScreenLocked}),this._playStartTime=Date.now()},e._pause=function(){clearTimeout(this._audioSpriteTimeout),this._playbackResource.pause(),this._playStartTime&&(this._position=Date.now()-this._playStartTime,this._playStartTime=null),this._playbackResource.getCurrentPosition(createjs.proxy(this._updatePausePos,this))},e._updatePausePos=function(t){this._position=1e3*t-this._startTime,this._playStartTime&&(this._playStartTime=Date.now())},e._resume=function(){this._audioSprite&&(this._audioSpriteTimeout=setTimeout(this._audioSpriteEndHandler,this._duration-this._position)),this._playbackResource.play({playAudioWhenScreenIsLocked:this.playWhenScreenLocked}),this._playStartTime=Date.now()},e._handleStop=function(){clearTimeout(this._audioSpriteTimeout),this._playbackResource.pause(),this._playbackResource.seekTo(this._startTime),this._playStartTime&&(this._position=0,this._playStartTime=null)},e._updateVolume=function(){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;this._playbackResource.setVolume(t)},e._calculateCurrentPosition=function(){return this._playStartTime&&(this._position=Date.now()-this._playStartTime+this._position,this._playStartTime=Date.now()),this._position},e._updatePosition=function(){this._playbackResource.seekTo(this._startTime+this._position),this._playStartTime=Date.now(),this._audioSprite&&(clearTimeout(this._audioSpriteTimeout),this._audioSpriteTimeout=setTimeout(this._audioSpriteEndHandler,this._duration-this._position))},e._handleLoop=function(){this._handleSoundReady()},e._updateStartTime=function(){this._audioSprite=!0,this.playState==createjs.Sound.PLAY_SUCCEEDED},e._updateDuration=function(){this._audioSprite,this.playState==createjs.Sound.PLAY_SUCCEEDED&&(clearTimeout(this._audioSpriteTimeout),this._audioSpriteTimeout=setTimeout(this._audioSpriteEndHandler,this._duration-this.position))},e._setDurationFromSource=function(){this._duration=createjs.Sound.activePlugin.getSrcDuration(this.src)},createjs.CordovaAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){function t(){this.AbstractPlugin_constructor(),this._capabilities=i._capabilities,this._loaderClass=createjs.CordovaAudioLoader,this._soundInstanceClass=createjs.CordovaAudioSoundInstance,this._srcDurationHash={}}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i.playWhenScreenLocked=!1,i._capabilities=null,i.isSupported=function(){return i._generateCapabilities(),null!=i._capabilities},i._generateCapabilities=function(){if(null==i._capabilities&&(window.cordova||window.PhoneGap||window.phonegap)&&window.Media){var t=document.createElement("audio");
if(null==t.canPlayType)return null;i._capabilities={panning:!1,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,a=createjs.Sound.EXTENSION_MAP,n=0,s=e.length;s>n;n++){var o=e[n],r=a[o]||o;i._capabilities[o]="no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)||"no"!=t.canPlayType("audio/"+r)&&""!=t.canPlayType("audio/"+r)}}},e.create=function(t,e,i){var a=this.AbstractPlugin_create(t,e,i);return a.playWhenScreenLocked=this.playWhenScreenLocked,a},e.toString=function(){return"[CordovaAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,e.getSrcDuration=function(t){return this._srcDurationHash[t]},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._srcDurationHash[e]=t.result,this._audioSources[e]=t.result},e.removeSound=function(t){delete this._srcDurationHash[t],this.AbstractPlugin_removeSound(t)},createjs.CordovaAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){var t=createjs.CordovaAudioPlugin=createjs.CordovaAudioPlugin||{};t.version="NEXT",t.buildDate="Tue, 19 May 2015 17:26:59 GMT"}(),i("soundjs",function(t){return function(){var e;return e||t.createjs.Sound}}(this)),i("helpers/SoundController",["require","exports","module","soundjs"],function(t,e,i){function a(e){this.isApp=e,e||(this.Sound=t("soundjs")),this.mediasPlaying=[]}a.prototype.mediaError=function(t){alert("Media Error"),alert(JSON.stringify(t))},a.prototype.createSounds=function(t){var e=this;e.manifest=t;var i="./content/sounds/";if(t)if(e.isApp)t.forEach(function(t){var a=new Media(i+t.src,null,e.mediaError);a.setVolume(parseFloat(t.volume)),a.play({numberOfLoops:parseInt(t.loop)}),e.mediasPlaying.push(a)});else{e.Sound.alternateExtensions=["mp3"];var a=function(t){var a=e.manifest.filter(function(e){return t.src===i+e.src})[0];e.Sound.play(i+a.src,{loop:a.loop,volume:a.volume})};e.Sound.addEventListener("fileload",a),e.Sound.registerSounds(t,i)}},a.prototype.clearSounds=function(){this.isApp?(this.mediasPlaying.forEach(function(t){t.stop(),t.release()}),this.mediasPlaying=[]):this.Sound.removeAllSounds(),this.manifest=null},i.exports=a}),i("helpers/ParameterTransformer",["require","exports","module"],function(t,e,i){function a(t,e){this.model=e,this.parsedConfig=t,this.initialPosition=[this.parsedConfig.x,this.parsedConfig.y,this.parsedConfig.height],this.initialOrigin=[this.parsedConfig.xOrigin,this.parsedConfig.yOrigin,0],this.initialScale=[this.parsedConfig.scale*this.parsedConfig.xyRatio,this.parsedConfig.scale,1],this.initialSize=[this.parsedConfig.sizeX,this.parsedConfig.sizeY],this.initialOpacity=this.parsedConfig.opacity}a.prototype.constructor=a,a.prototype.calculateTransform=function(){var t,e=parseFloat(Date.now()),i=0,a=0,n=0,s=0,o=0,r=1,l=1,p=1,c=0;if(this.parsedConfig.translate&&(i+=this.parsedConfig.translateFunction((e+this.parsedConfig.timeOffset)/this.parsedConfig.translateXSpeed,this.parsedConfig.translateX),a+=this.parsedConfig.translateFunction((e+this.parsedConfig.timeOffset)/this.parsedConfig.translateYSpeed,this.parsedConfig.translateY)),this.parsedConfig.accel&&(t=window.orientationController.orientationDifferenceAt(e),i+=t[1]*this.parsedConfig.accelAmount,a+=t[0]*this.parsedConfig.accelAmount),this.parsedConfig.accelRotate&&(t=window.orientationController.orientationDifferenceAt(e),n+=t[0]*this.parsedConfig.accelRotateAmount,s+=t[1]*this.parsedConfig.accelRotateAmount),this.parsedConfig.rotate&&(o=this.parsedConfig.rotateFunction((e+this.parsedConfig.timeOffset)/this.parsedConfig.rotateSpeed,1/this.parsedConfig.rotateAngle)),this.parsedConfig.skew&&(r=1+this.parsedConfig.skewFunction((e+this.parsedConfig.timeOffset)/this.parsedConfig.skewSpeedX,this.parsedConfig.skewAmountX),l=1+this.parsedConfig.skewFunction((e+this.parsedConfig.timeOffset)/this.parsedConfig.skewSpeedY,this.parsedConfig.skewAmountY)),this.parsedConfig.zoom&&(p=this.parsedConfig.zoomRelativeTranslate?1+this.parsedConfig.zoomFunction((e+this.parsedConfig.timeOffset)/this.parsedConfig.zoomSpeed,this.parsedConfig.zoomRelativeMultiplier/this.parsedConfig.translateY):1+this.parsedConfig.zoomFunction((e+this.parsedConfig.timeOffset)/this.parsedConfig.zoomSpeed,this.parsedConfig.zoomAmount)),this.parsedConfig.animation){var u=Math.floor(this.parsedConfig.animationFunction((e+this.parsedConfig.timeOffset)/this.parsedConfig.animationSpeed,this.parsedConfig.numFrames));a-=u*this.model.page.y*this.parsedConfig.scale}var h={rotate:[n,s,o],scale:[this.initialScale[0]*p*r,this.initialScale[1]*p*l,this.initialScale[2]],position:[this.initialPosition[0]+i,this.initialPosition[1]+a,this.initialPosition[2]+c]};return h},a.prototype.createComponent=function(t){this.node=t;var e=this,i={onUpdate:function(){var i=e.calculateTransform();t.setRotation(i.rotate[0],i.rotate[1],i.rotate[2]),t.setScale(i.scale[0],i.scale[1],i.scale[2]),t.setPosition(i.position[0],i.position[1],i.position[2]),t.requestUpdate(this.id)}},a=t.addComponent(i);return i.id=a,a},i.exports=a}),i("helpers/MathFunctions",["require","exports","module"],function(t,e,i){function a(){}a.prototype.constructor=a,a.prototype.sinFunction=function(t,e){return Math.sin(t)*e},a.prototype.sinFunction.period=2*Math.PI,a.prototype.halfOneSinFunction=function(t,e){return(Math.sin(t)+1)/2*e},a.prototype.halfOneSinFunction.period=2*Math.PI,a.prototype.cosFunction=function(t,e){return(1-Math.cos(2*Math.PI*t))/2*e},a.prototype.cosFunction.period=1,a.prototype.absSinFunction=function(t,e){return-Math.abs(Math.sin(t))*e},a.prototype.absSinFunction.period=Math.PI,a.prototype.triangleFunction=function(t,e){return 2/Math.PI*Math.asin(Math.sin(t))*e},a.prototype.triangleFunction.period=2*Math.PI,a.prototype.sawToothFunction=function(t,e){return e*(t-Math.floor(t))},a.prototype.sawToothFunction.period=1,a.prototype.periodChangedFunction=function(t,e){var i=function(i,a){return t(e*i,a)};return i.period=t.period/e,i},a.prototype.cutFunction=function(t,e,i,a){var n=this,s=100/(i-e),o=function(o,r){var l=a*e/100,p=a*i/100,c=o%a;if(l>c||c>p)return 0;var u=n.periodChangedFunction(t,s);return u(c-l,r)};return o.period=t.period/s,o},i.exports=a}),i("helpers/ConfigParser",["require","exports","module","helpers/MathFunctions"],function(t,e,i){function a(){}var n=t("helpers/MathFunctions");a.prototype.constructor=a,a.prototype.parseConfig=function(t,e){var i={};return i.name=t.name,i.pageSpeed=parseFloat(e.page.speed)||1,i.numFrames=parseFloat(t.numFrames),i.opacity=parseFloat(t.opacity)||1,i.sizeX=parseFloat(t.sizeX),i.sizeY=parseFloat(t.sizeY),i.x=parseFloat(t.initialX),i.y=parseFloat(t.initialY),i.xOrigin=parseFloat(t.xOrigin)||0,i.yOrigin=parseFloat(t.yOrigin)||0,i.scale=parseFloat(t.scale),i.xyRatio=parseFloat(t.xyRatio),i.timeOffset=parseFloat(t.timeOffset),i.translateXSpeed=i.pageSpeed*parseFloat(t.translateXSpeed),i.translateYSpeed=i.pageSpeed*parseFloat(t.translateYSpeed),i.translateX=parseFloat(t.translateX),i.translateY=parseFloat(t.translateY),i.rotateSpeed=i.pageSpeed*parseFloat(t.rotateSpeed),i.rotateAngle=parseFloat(t.rotateAngle),i.skewSpeedX=i.pageSpeed*parseFloat(t.skewSpeedX),i.skewAmountX=parseFloat(t.skewAmountX),i.skewSpeedY=i.pageSpeed*parseFloat(t.skewSpeedY),i.skewAmountY=parseFloat(t.skewAmountY),i.zoomSpeed=i.pageSpeed*parseFloat(t.zoomSpeed),i.zoomAmount=parseFloat(t.zoomAmount),i.zoomCutStart=parseFloat(t.zoomCutStart),i.zoomCutEnd=parseFloat(t.zoomCutEnd),i.translateCutStart=parseFloat(t.translateCutStart),i.translateCutEnd=parseFloat(t.translateCutEnd),i.height=parseFloat(t.height),i.cameraBoundOffset=parseFloat(t.cameraBoundOffset),i.zoomRelativeMultiplier=parseFloat(t.zoomRelativeMultiplier),i.animationSpeed=i.pageSpeed*parseFloat(t.animationSpeed)||100,i.numFrames=parseFloat(t.numFrames),i.motionType=t.motionType,i.zoomType=t.zoomType,i.rotateType=t.rotateType,i.zoomTypeCut=t.zoomTypeCut,i.translateTypeCut=t.translateTypeCut,i.translateFunction=void 0,i.zoomFunction=void 0,i.rotateFunction=void 0,i.skewFunction=void 0,i.animationFunction=n.prototype.sawToothFunction,i.translate=t.translate,i.accel=t.accel,i.accelAmount=parseFloat(t.accelAmount)||1,i.accelRotate=t.accelRotate,i.accelRotateAmount=parseFloat(t.accelRotateAmount)||1,i.rotate=t.rotate,i.skew=t.skew,i.zoom=t.zoom,i.zoomRelativeTranslate=t.zoomRelativeTranslate,i.animation=t.animation,i.cameraBound=t.cameraBound,i.translateFunction="triangle"===i.motionType?n.prototype.triangleFunction:"sawtooth"===i.motionType?n.prototype.sawToothFunction:"cos"===i.motionType?n.prototype.cosFunction:n.prototype.sinFunction,i.zoomFunction="triangle"===i.zoomType?n.prototype.triangleFunction:"sin"===i.zoomType?n.prototype.sinFunction:"cos"===i.zoomType?n.prototype.cosFunction:n.prototype.sawToothFunction,i.rotateFunction="triangle"===i.rotateType?n.prototype.triangleFunction:"sawToothFunction"===i.rotateType?n.prototype.sawToothFunction:"cos"===i.rotateType?n.prototype.cosFunction:n.prototype.sinFunction,i.skewFunction=n.prototype.cosFunction,i.zoomTypeCut&&(i.zoomFunction=n.prototype.cutFunction(i.zoomFunction,i.zoomCutStart,i.zoomCutEnd,i.zoomFunction.period)),i.translateTypeCut&&(i.translateFunction=n.prototype.cutFunction(i.translateFunction,i.translateCutStart,i.translateCutEnd,i.translateFunction.period)),i},i.exports=a}),i("elements/Element",["require","exports","module","famous"],function(t,e,i){function a(t,e,i){var a=(i.surfaceClasses||"").trim();a=(a+" "+(e.myClasses||"")).trim(),a&&""!==a&&(e.classes=a.split(" ")),s.apply(this,[t,e])}var n=t("famous"),s=n.domRenderables.DOMElement;a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.DEFAULT_OPTIONS={},a.prototype.contentInserted=function(){},i.exports=a}),i("elements/RepeatingImage",["require","exports","module","elements/Element"],function(t,e,i){function a(t,e){var i={attributes:{},properties:{}};i.tagName="div",i.myClasses="repeating-image",i.properties={"background-image":"url('"+e.url+"')"},n.apply(this,[t,i,e])}var n=t("elements/Element");a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.DEFAULT_OPTIONS={},i.exports=a}),i("elements/HighlightingText",["require","exports","module","elements/Element","helpers/MathFunctions"],function(t,e,i){function a(t,e,i){var a=this;this.config=e,this.model=i,this.node=t;var s={attributes:{},properties:{}};this.textLines=e.text.split("\n"),this.currentLine=0,s.tagName="div",s.myClasses="overlay-text",s.content=this.createContent(-1),n.apply(this,[t,s,e]),this.updaterComponent={onUpdate:function(){a.needsUpdating&&a.updateContent(),a.updateHighlightText(),t.requestUpdate(this.id)}},this.updaterComponentID=t.addComponent(this.updaterComponent),this.updaterComponent.id=this.updaterComponentID,t.requestUpdate(this.updaterComponentID)}var n=t("elements/Element"),s=t("helpers/MathFunctions");a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.updateHighlightText=function(){var t=parseFloat(Date.now()),e=parseFloat(this.config.timeOffset),i=parseFloat(this.model.page.speed)||1,a=(parseFloat(this.config.singSpeed)||1)*i,n=Math.floor(s.prototype.sawToothFunction((t+e)/a,this.textLines.length));n!==this.currentLine&&(this.currentLine=n,this.needsUpdating=!0)},a.prototype.updateContent=function(){var t=this.createContent(this.currentLine);this.setContent(t),this.needsUpdating=!1},a.prototype.setupGradientCSS=function(){var t=this.node.getAbsoluteSize()[0],e=t+80,i=e+80,a=i+80,n=2*t+240,s=t/270,o="-webkit-transform: translateZ(0);background-size: "+n+"px 3px;background-image: -webkit-linear-gradient(left, white 0px,white "+t+"px,rgb(53, 205, 247) "+e+"px,rgb(53, 205, 247) "+i+"px,white "+a+"px);-webkit-animation: stripes "+s+"s linear infinite;";return o},a.prototype.contentInserted=function(){self.needsUpdating=!0,this.updateContent()},a.prototype.createContent=function(t){var e=this,i=this.textLines.map(function(i,a){var n;return n=a===t?'<div class="highlight-text gradient-shadow" title="'+i+'"><div class="highlight-text-div" style="'+e.setupGradientCSS()+'">'+i+"</div></div>":'<div class="highlight-text gradient-shadow" title="'+i+'"><div class="highlight-text-div hightlight-inactive">'+i+"</div></div>"});return i.join("")},a.DEFAULT_OPTIONS={},i.exports=a}),i("elements/Image",["require","exports","module","elements/Element"],function(t,e,i){function a(t,e){var i={attributes:{},properties:{}};i.tagName="img",i.attributes={src:e.url},n.apply(this,[t,i,e])}var n=t("elements/Element");a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.DEFAULT_OPTIONS={},i.exports=a}),i("elements/PlainText",["require","exports","module","elements/Element"],function(t,e,i){function a(t,e){var i={attributes:{},properties:{}},a=(e.text||"").split("\n"),s=a.map(function(t){var e='<div class="highlight-text gradient-shadow" title="'+t+'"><div class="highlight-text-div hightlight-inactive">'+t+"</div></div>";return e});i.tagName="div",i.myClasses="overlay-text",i.content=s.join(""),n.apply(this,[t,i,e])}var n=t("elements/Element");a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.DEFAULT_OPTIONS={},i.exports=a}),i("elements/ChangingPlainText",["require","exports","module","elements/Element","helpers/MathFunctions"],function(t,e,i){function a(t,e,i){var a=this,o={attributes:{},properties:{}};this.textLines=(e.text||"").split("\n"),this.linesHtml=this.textLines.map(function(t){var e='<div class="highlight-text gradient-shadow" title="'+t+'"><div class="highlight-text-div hightlight-inactive">'+t+"</div></div>";return e}),o.tagName="div",o.myClasses="overlay-text",this.currentLine=0,o.content=this.linesHtml[0],n.apply(this,[t,o,e]),this.updaterComponent={onUpdate:function(){var n=parseFloat(Date.now()),o=parseFloat(e.timeOffset),r=parseFloat(i.page.speed)||1,l=(parseFloat(e.singSpeed)||1)*r,p=Math.floor(s.prototype.sawToothFunction((n+o)/l,a.textLines.length));p!==a.currentLine&&(a.currentLine=p,a.setContent(a.linesHtml[a.currentLine])),t.requestUpdate(this.id)}},this.updaterComponentID=t.addComponent(this.updaterComponent),this.updaterComponent.id=this.updaterComponentID,t.requestUpdate(this.updaterComponentID)}var n=t("elements/Element"),s=t("helpers/MathFunctions");a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.DEFAULT_OPTIONS={},i.exports=a}),i("elements/SingalongText",["require","exports","module","elements/Element","helpers/MathFunctions"],function(t,e,i){function a(t,e,i){var a=this;this.config=e,this.model=i;var s={attributes:{},properties:{}};this.textLines=e.text.split("\n"),this.currentLine=0,s.tagName="div",s.myClasses="overlay-text",s.content='<span class="highlight-text gradient-shadow singalong" title="'+this.textLines[this.currentLine]+'"><div class="highlight-text-div">'+this.textLines[this.currentLine]+"</div></span>",n.apply(this,[t,s,e]),this.updaterComponent={onUpdate:function(){a.needsUpdating&&a.updateContent(),a.updateHighlightText(),t.requestUpdate(this.id)}},this.updaterComponentID=t.addComponent(this.updaterComponent),this.updaterComponent.id=this.updaterComponentID,t.requestUpdate(this.updaterComponentID)}var n=t("elements/Element"),s=t("helpers/MathFunctions");a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.DEFAULT_OPTIONS={},a.prototype.updateSingalongText=function(){var t=parseFloat(Date.now()),e=parseFloat(this.config.timeOffset),i=parseFloat(this.model.page.speed)||1,a=(parseFloat(this.config.singSpeed)||1)*i,n=Math.floor(s.prototype.sawToothFunction((t+e)/a,this.textLines.length));n!==this.currentLine&&(this.currentLine=n,this.surface.setContent('<div class="overlay-text"><span class="highlight-text gradient-shadow singalong" title="'+this.textLines[this.currentLine]+'"><div class="highlight-text-div">'+this.textLines[this.currentLine]+"</div></span></div>"),this.needsUpdating=!0)},a.prototype.updateContent=function(){this.surface._currentTarget&&(this.refreshGradient(),this.needsUpdating=!1)},a.prototype.refreshGradient=function(){var t=this.setupGradientCSS(0),e=self.surface._currentTarget.getElementsByClassName("highlight-text-div")[0];e.setAttribute("style",t)},a.prototype.setupGradientCSS=function(t){var e=self.surface._currentTarget.getElementsByClassName("highlight-text-div")[t],i=e.getBoundingClientRect().width,a=i+80,n=a+80,s=n+80,o=2*i+240,r=i/270,l="-webkit-transform: translateZ(0);background-size: "+o+"px 3px;background-image: -webkit-linear-gradient(left, white 0px,white "+i+"px,rgb(53, 205, 247) "+a+"px,rgb(53, 205, 247) "+n+"px,white "+s+"px);-webkit-animation: stripes "+r+"s linear infinite;";return l},a.prototype.contentInserted=function(){self.needsUpdating=!0,this.updateContent()},i.exports=a}),i("nodes/PopupNode",["require","exports","module","famous","helpers/ParameterTransformer","helpers/ConfigParser","elements/RepeatingImage","elements/HighlightingText","elements/Image","elements/PlainText","elements/ChangingPlainText","elements/SingalongText"],function(t,e,i){function a(){var t=this;this.parsedConfig=l.prototype.parseConfig(t.config,t.model);var e=new r(this.parsedConfig,t.model);this.parsedConfig.sizeX&&this.parsedConfig.sizeY&&(t.setSizeMode("absolute","absolute"),t.setAbsoluteSize(e.initialSize[0],e.initialSize[1])),this.config.animation&&this.parsedConfig.numFrames&&t.setProportionalSize(1,this.parsedConfig.numFrames),t.setPosition(e.initialPosition[0],e.initialPosition[1],e.initialPosition[2]),t.setOrigin(e.initialOrigin[0],e.initialOrigin[1],e.initialOrigin[2]),t.setScale(e.initialScale[0],e.initialScale[1],e.initialScale[2]),t.setOpacity(e.initialOpacity),t.transformComponentID=e.createComponent(t),t.requestUpdate(t.transformComponentID);var i;switch(t.config.surfaceType){case"highlight":i=c;break;case"plain":i=h;break;case"changingPlain":i=d;break;case"repeatingImage":i=p;break;case"singalong":i=m;break;default:i=u}this.domElement=new i(this,this.config,this.model)}function n(t,e){o.apply(this,arguments),this.config=t,this.model=e,a.call(this),this.contentInserted=function(){this.domElement.contentInserted()}}var s=t("famous"),o=s.core.Node,r=t("helpers/ParameterTransformer"),l=t("helpers/ConfigParser"),p=t("elements/RepeatingImage"),c=t("elements/HighlightingText"),u=t("elements/Image"),h=t("elements/PlainText"),d=t("elements/ChangingPlainText"),m=t("elements/SingalongText");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,i.exports=n}),i("nodes/PopupPageNode",["require","exports","module","famous","nodes/PopupNode","helpers/ParameterTransformer","helpers/ConfigParser","helpers/MathFunctions"],function(t,e,i){function a(){var t,e=this;this.popupNodes=[],this.cameraBoundNodes=[],this.cameraBoundRoot=this.topScene.addChild().addChild(),this.popups.forEach(function(i){i.cameraBound?(t=new r(i,e.model),e.cameraBoundNodes.push(t),e.cameraBoundRoot.addChild(t)):(t=new r(i,e.model),e.popupNodes.push(t),e.addChild(t))})}function n(t,e,i){var n=this;o.apply(this,arguments),this.popups=t.popups,this.model=t,this.scene=e,this.topScene=i,this.camera=new c(e),this.camera.setDepth(parseFloat(t.page.perspective)),t.camera.perspectiveZoom&&(this.pageSpeed=parseFloat(t.page.speed)||1,this.perspectiveZoomSpeed=this.pageSpeed*parseFloat(t.camera.perspectiveZoomSpeed),this.perspectiveZoomAmount=parseFloat(t.camera.perspectiveZoomAmount),this.perspectiveZoomCutStart=parseFloat(t.camera.perspectiveZoomCutStart),this.perspectiveZoomCutEnd=parseFloat(t.camera.perspectiveZoomCutEnd),this.perspectiveFunction="triangle"===t.camera.perspectiveZoomType?u.prototype.triangleFunction:"sawtooth"===t.camera.perspectiveZoomType?u.prototype.sawToothFunction:"cos"===t.camera.perspectiveZoomType?u.prototype.cosFunction:u.prototype.sinFunction,t.camera.perspectiveZoomCut&&(this.perspectiveFunction=u.prototype.cutFunction(this.perspectiveFunction,this.perspectiveZoomCutStart,this.perspectiveZoomCutEnd,this.perspectiveFunction.period))),a.call(this),this.setAlign(0,0),this.setSizeMode("absolute","absolute"),this.setAbsoluteSize(parseFloat(t.page.x),parseFloat(t.page.y)),this.cameraBoundRoot.setAlign(0,0),this.cameraBoundRoot.setSizeMode("absolute","absolute"),this.cameraBoundRoot.setAbsoluteSize(parseFloat(t.page.x),parseFloat(t.page.y)),this.parsedConfig=p.prototype.parseConfig(t.camera,t);var s=new l(this.parsedConfig,t);this.setPosition(s.initialPosition[0],s.initialPosition[1],s.initialPosition[2]),this.setOrigin(s.initialOrigin[0],s.initialOrigin[1],s.initialOrigin[2]),this.setScale(s.initialScale[0],s.initialScale[1],s.initialScale[2]),this.cameraUpdaterComponent={onUpdate:function(){if(t.camera.perspectiveZoom){var e=parseFloat(Date.now())%n.pageSpeed,i=parseFloat(t.camera.timeOffset),a=t.page.perspective-n.perspectiveFunction((e+i)/n.perspectiveZoomSpeed,n.perspectiveZoomAmount);n.camera.setDepth(a),n.requestUpdate(this.id)}}},this.cameraUpdaterComponentID=this.addComponent(this.cameraUpdaterComponent),this.cameraUpdaterComponent.id=this.cameraUpdaterComponentID,this.requestUpdate(this.cameraUpdaterComponentID),this.componentID=s.createComponent(this),this.requestUpdate(this.componentID)}var s=t("famous"),o=s.core.Node,r=t("nodes/PopupNode"),l=t("helpers/ParameterTransformer"),p=t("helpers/ConfigParser"),c=s.components.Camera,u=t("helpers/MathFunctions");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.contentInserted=function(){this.popupNodes.forEach(function(t){t.contentInserted()})},n.prototype.dismount=function(){this.cameraBoundRoot.dismount(),o.prototype.dismount.apply(this,arguments)},i.exports=n}),i("nodes/PagerNode",["require","exports","module","famous"],function(t,e,i){function a(){s.apply(this,arguments)}var n=t("famous"),s=n.core.Node;a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.showPage=function(t){this.addChild(t),this.currentContent=t},a.prototype.clearPage=function(){this.currentContent.dismount()},i.exports=a}),i("nodes/AppNode",["require","exports","module","famous","nodes/PopupPageNode","nodes/PagerNode"],function(t,e,i){function a(t,e){s.apply(this,arguments),t.addChild(this),this.pagerNode=new r,this.addChild(this.pagerNode),this.scene=t,this.topScene=e}var n=t("famous"),s=n.core.Node,o=t("nodes/PopupPageNode"),r=t("nodes/PagerNode");a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.createAndShowPage=function(t){this.contentNode=new o(t,this.scene,this.topScene),this.pagerNode.showPage(this.contentNode)},a.prototype.clearPage=function(){this.pagerNode.clearPage()},a.DEFAULT_OPTIONS={},i.exports=a}),i("BlankyApp",["require","exports","module","famous","helpers/StatsTimer","helpers/OrientationController","helpers/SoundController","nodes/AppNode"],function(t,e,i){function a(t){this.isApp=t,r.init(),window.initialPageId="UHGPYzstxO",window.blanky=this;var e=r.createScene("#device-screen"),i=r.createScene("#top-screen");window.appNode=new l(e,i),window.orientationController=new s,window.orientationController.startListening(),this.soundController=new o(t)}var n=t("famous"),s=(t("helpers/StatsTimer"),t("helpers/OrientationController")),o=t("helpers/SoundController"),r=(n.Clock,n.core.FamousEngine),l=t("nodes/AppNode");a.prototype.clearPage=function(){window.appNode.clearPage(),this.soundController.clearSounds()},a.prototype.loadPage=function(t){var e=window.pagesModel.pages.filter(function(e){return e.objectId===t})[0];window.pageModel=e,window.appNode.createAndShowPage(e),this.soundController.createSounds(window.pageModel.sounds)},i.exports=a}),i("app",["require","exports","module","Fixtures","BlankyApp"],function(t){var e=t("Fixtures");window.Fixtures=e;var i={};i.pages=e.results,window.pagesModel=i;var a=["UHGPYzstxO","gBqF9PtfBm","w9zCNnEbfC","mt1s3uZ90p","rZ4dWe9BGU"],n=1,s=t("BlankyApp"),o=function(t){var e=t.clientX;e<document.getElementById("device-screen").getBoundingClientRect().width/2?window.orientationController.reset():(window.blanky.clearPage(),window.blanky.loadPage(a[n%a.length]),n++)},r=function(){window.blanky=new s(!0),window.blanky.loadPage(window.initialPageId),window.addEventListener("click",o,!1)},l=function(){window.blanky=new s(!1),window.blanky.loadPage(window.initialPageId),window.addEventListener("click",o,!1)},p=-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://");p?document.addEventListener("deviceready",r,!1):l()}),e(["app"])}();